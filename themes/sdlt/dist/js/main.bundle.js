!function(e){function t(t){for(var r,o,a=t[0],i=t[1],u=t[2],s=0,c=[];s<a.length;s++)o=a[s],I[o]&&c.push(I[o][0]),I[o]=0;for(r in i)Object.prototype.hasOwnProperty.call(i,r)&&(e[r]=i[r]);for(R&&R(t);c.length;)c.shift()();return P.push.apply(P,u||[]),n()}function n(){for(var e,t=0;t<P.length;t++){for(var n=P[t],r=!0,o=1;o<n.length;o++){var a=n[o];0!==I[a]&&(r=!1)}r&&(P.splice(t--,1),e=D(D.s=n[0]))}return e}var r=window.webpackHotUpdate;window.webpackHotUpdate=function(e,t){!function(e,t){if(!O[e]||!w[e])return;for(var n in w[e]=!1,t)Object.prototype.hasOwnProperty.call(t,n)&&(d[n]=t[n]);0==--v&&0===S&&j()}(e,t),r&&r(e,t)};var o,a=!0,i="f211015b81ed26c70072",u=1e4,s={},c=[],l=[];function f(e){var t={_acceptedDependencies:{},_declinedDependencies:{},_selfAccepted:!1,_selfDeclined:!1,_disposeHandlers:[],_main:o!==e,active:!0,accept:function(e,n){if(void 0===e)t._selfAccepted=!0;else if("function"==typeof e)t._selfAccepted=e;else if("object"==typeof e)for(var r=0;r<e.length;r++)t._acceptedDependencies[e[r]]=n||function(){};else t._acceptedDependencies[e]=n||function(){}},decline:function(e){if(void 0===e)t._selfDeclined=!0;else if("object"==typeof e)for(var n=0;n<e.length;n++)t._declinedDependencies[e[n]]=!0;else t._declinedDependencies[e]=!0},dispose:function(e){t._disposeHandlers.push(e)},addDisposeHandler:function(e){t._disposeHandlers.push(e)},removeDisposeHandler:function(e){var n=t._disposeHandlers.indexOf(e);n>=0&&t._disposeHandlers.splice(n,1)},check:E,apply:_,status:function(e){if(!e)return b;p.push(e)},addStatusHandler:function(e){p.push(e)},removeStatusHandler:function(e){var t=p.indexOf(e);t>=0&&p.splice(t,1)},data:s[e]};return o=void 0,t}var p=[],b="idle";function m(e){b=e;for(var t=0;t<p.length;t++)p[t].call(null,e)}var y,d,h,v=0,S=0,g={},w={},O={};function k(e){return+e+""===e?+e:e}function E(e){if("idle"!==b)throw new Error("check() is only allowed in idle status");return a=e,m("check"),(t=u,t=t||1e4,new Promise(function(e,n){if("undefined"==typeof XMLHttpRequest)return n(new Error("No browser support"));try{var r=new XMLHttpRequest,o=D.p+"hot/hot-update.json";r.open("GET",o,!0),r.timeout=t,r.send(null)}catch(e){return n(e)}r.onreadystatechange=function(){if(4===r.readyState)if(0===r.status)n(new Error("Manifest request to "+o+" timed out."));else if(404===r.status)e();else if(200!==r.status&&304!==r.status)n(new Error("Manifest request to "+o+" failed."));else{try{var t=JSON.parse(r.responseText)}catch(e){return void n(e)}e(t)}}})).then(function(e){if(!e)return m("idle"),null;w={},g={},O=e.c,h=e.h,m("prepare");var t=new Promise(function(e,t){y={resolve:e,reject:t}});for(var n in d={},I)T(n);return"prepare"===b&&0===S&&0===v&&j(),t});var t}function T(e){var t;O[e]?(w[e]=!0,v++,(t=document.createElement("script")).charset="utf-8",t.src=D.p+"hot/hot-update.js",document.head.appendChild(t)):g[e]=!0}function j(){m("ready");var e=y;if(y=null,e)if(a)Promise.resolve().then(function(){return _(a)}).then(function(t){e.resolve(t)},function(t){e.reject(t)});else{var t=[];for(var n in d)Object.prototype.hasOwnProperty.call(d,n)&&t.push(k(n));e.resolve(t)}}function _(t){if("ready"!==b)throw new Error("apply() is only allowed in ready status");var n,r,o,a,u;function l(e){for(var t=[e],n={},r=t.slice().map(function(e){return{chain:[e],id:e}});r.length>0;){var o=r.pop(),i=o.id,u=o.chain;if((a=A[i])&&!a.hot._selfAccepted){if(a.hot._selfDeclined)return{type:"self-declined",chain:u,moduleId:i};if(a.hot._main)return{type:"unaccepted",chain:u,moduleId:i};for(var s=0;s<a.parents.length;s++){var c=a.parents[s],l=A[c];if(l){if(l.hot._declinedDependencies[i])return{type:"declined",chain:u.concat([c]),moduleId:i,parentId:c};-1===t.indexOf(c)&&(l.hot._acceptedDependencies[i]?(n[c]||(n[c]=[]),f(n[c],[i])):(delete n[c],t.push(c),r.push({chain:u.concat([c]),id:c})))}}}}return{type:"accepted",moduleId:e,outdatedModules:t,outdatedDependencies:n}}function f(e,t){for(var n=0;n<t.length;n++){var r=t[n];-1===e.indexOf(r)&&e.push(r)}}t=t||{};var p={},y=[],v={},S=function(){console.warn("[HMR] unexpected require("+w.moduleId+") to disposed module")};for(var g in d)if(Object.prototype.hasOwnProperty.call(d,g)){var w;u=k(g);var E=!1,T=!1,j=!1,_="";switch((w=d[g]?l(u):{type:"disposed",moduleId:g}).chain&&(_="\nUpdate propagation: "+w.chain.join(" -> ")),w.type){case"self-declined":t.onDeclined&&t.onDeclined(w),t.ignoreDeclined||(E=new Error("Aborted because of self decline: "+w.moduleId+_));break;case"declined":t.onDeclined&&t.onDeclined(w),t.ignoreDeclined||(E=new Error("Aborted because of declined dependency: "+w.moduleId+" in "+w.parentId+_));break;case"unaccepted":t.onUnaccepted&&t.onUnaccepted(w),t.ignoreUnaccepted||(E=new Error("Aborted because "+u+" is not accepted"+_));break;case"accepted":t.onAccepted&&t.onAccepted(w),T=!0;break;case"disposed":t.onDisposed&&t.onDisposed(w),j=!0;break;default:throw new Error("Unexception type "+w.type)}if(E)return m("abort"),Promise.reject(E);if(T)for(u in v[u]=d[u],f(y,w.outdatedModules),w.outdatedDependencies)Object.prototype.hasOwnProperty.call(w.outdatedDependencies,u)&&(p[u]||(p[u]=[]),f(p[u],w.outdatedDependencies[u]));j&&(f(y,[w.moduleId]),v[u]=S)}var P,x=[];for(r=0;r<y.length;r++)u=y[r],A[u]&&A[u].hot._selfAccepted&&x.push({module:u,errorHandler:A[u].hot._selfAccepted});m("dispose"),Object.keys(O).forEach(function(e){!1===O[e]&&function(e){delete I[e]}(e)});for(var N,C,R=y.slice();R.length>0;)if(u=R.pop(),a=A[u]){var U={},q=a.hot._disposeHandlers;for(o=0;o<q.length;o++)(n=q[o])(U);for(s[u]=U,a.hot.active=!1,delete A[u],delete p[u],o=0;o<a.children.length;o++){var Q=A[a.children[o]];Q&&((P=Q.parents.indexOf(u))>=0&&Q.parents.splice(P,1))}}for(u in p)if(Object.prototype.hasOwnProperty.call(p,u)&&(a=A[u]))for(C=p[u],o=0;o<C.length;o++)N=C[o],(P=a.children.indexOf(N))>=0&&a.children.splice(P,1);for(u in m("apply"),i=h,v)Object.prototype.hasOwnProperty.call(v,u)&&(e[u]=v[u]);var M=null;for(u in p)if(Object.prototype.hasOwnProperty.call(p,u)&&(a=A[u])){C=p[u];var L=[];for(r=0;r<C.length;r++)if(N=C[r],n=a.hot._acceptedDependencies[N]){if(-1!==L.indexOf(n))continue;L.push(n)}for(r=0;r<L.length;r++){n=L[r];try{n(C)}catch(e){t.onErrored&&t.onErrored({type:"accept-errored",moduleId:u,dependencyId:C[r],error:e}),t.ignoreErrored||M||(M=e)}}}for(r=0;r<x.length;r++){var B=x[r];u=B.module,c=[u];try{D(u)}catch(e){if("function"==typeof B.errorHandler)try{B.errorHandler(e)}catch(n){t.onErrored&&t.onErrored({type:"self-accept-error-handler-errored",moduleId:u,error:n,originalError:e}),t.ignoreErrored||M||(M=n),M||(M=e)}else t.onErrored&&t.onErrored({type:"self-accept-errored",moduleId:u,error:e}),t.ignoreErrored||M||(M=e)}}return M?(m("fail"),Promise.reject(M)):(m("idle"),new Promise(function(e){e(y)}))}var A={},I={1:0},P=[];function D(t){if(A[t])return A[t].exports;var n=A[t]={i:t,l:!1,exports:{},hot:f(t),parents:(l=c,c=[],l),children:[]};return e[t].call(n.exports,n,n.exports,function(e){var t=A[e];if(!t)return D;var n=function(n){return t.hot.active?(A[n]?-1===A[n].parents.indexOf(e)&&A[n].parents.push(e):(c=[e],o=n),-1===t.children.indexOf(n)&&t.children.push(n)):(console.warn("[HMR] unexpected require("+n+") from disposed module "+e),c=[]),D(n)},r=function(e){return{configurable:!0,enumerable:!0,get:function(){return D[e]},set:function(t){D[e]=t}}};for(var a in D)Object.prototype.hasOwnProperty.call(D,a)&&"e"!==a&&"t"!==a&&Object.defineProperty(n,a,r(a));return n.e=function(e){return"ready"===b&&m("prepare"),S++,D.e(e).then(t,function(e){throw t(),e});function t(){S--,"prepare"===b&&(g[e]||T(e),0===S&&0===v&&j())}},n.t=function(e,t){return 1&t&&(e=n(e)),D.t(e,-2&t)},n}(t)),n.l=!0,n.exports}D.m=e,D.c=A,D.d=function(e,t,n){D.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},D.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},D.t=function(e,t){if(1&t&&(e=D(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(D.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)D.d(n,r,function(t){return e[t]}.bind(null,r));return n},D.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return D.d(t,"a",t),t},D.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},D.p="/resources/themes/sdlt/dist/img/",D.h=function(){return i};var x=window.webpackJsonp=window.webpackJsonp||[],N=x.push.bind(x);x.push=t,x=x.slice();for(var C=0;C<x.length;C++)t(x[C]);var R=N;P.push([630,2]),n()}({101:function(e,t,n){e.exports=n.p+"../img/64544011f835a0bcc13b668a98a70f78.svg"},337:function(e,t,n){e.exports=n.p+"../img/b2ce59ecfcc515cb33d81013163089b9.svg"},338:function(e,t,n){e.exports=n.p+"../img/41e304962a77cf734f9bfe9772ab12b9.svg"},339:function(e,t,n){e.exports=n.p+"../img/0e61629440d7a6d860ba88aad4af303a.svg"},340:function(e,t,n){e.exports=n.p+"../img/442b4a253c2be23661dc12e64f264053.svg"},342:function(e,t,n){e.exports=n.p+"../img/44cca0ef5b0830924492e8a8413b854e.svg"},343:function(e,t,n){e.exports=n.p+"../img/f0545538d29150bca803dd2e1d422c11.jpg"},348:function(e,t,n){e.exports=n.p+"../img/b0b707ee0bdf8b4add381179f4a89bf9.svg"},352:function(e,t,n){e.exports=n.p+"../img/4b4872cec3cb197b21f4d3ac1b8ee472.jpg"},353:function(e,t,n){e.exports=n.p+"../img/d1029db2ceff54ee06b8dafcf9f6a671.jpg"},565:function(e,t,n){var r={"./af":194,"./af.js":194,"./ar":195,"./ar-dz":196,"./ar-dz.js":196,"./ar-kw":197,"./ar-kw.js":197,"./ar-ly":198,"./ar-ly.js":198,"./ar-ma":199,"./ar-ma.js":199,"./ar-sa":200,"./ar-sa.js":200,"./ar-tn":201,"./ar-tn.js":201,"./ar.js":195,"./az":202,"./az.js":202,"./be":203,"./be.js":203,"./bg":204,"./bg.js":204,"./bm":205,"./bm.js":205,"./bn":206,"./bn.js":206,"./bo":207,"./bo.js":207,"./br":208,"./br.js":208,"./bs":209,"./bs.js":209,"./ca":210,"./ca.js":210,"./cs":211,"./cs.js":211,"./cv":212,"./cv.js":212,"./cy":213,"./cy.js":213,"./da":214,"./da.js":214,"./de":215,"./de-at":216,"./de-at.js":216,"./de-ch":217,"./de-ch.js":217,"./de.js":215,"./dv":218,"./dv.js":218,"./el":219,"./el.js":219,"./en-SG":220,"./en-SG.js":220,"./en-au":221,"./en-au.js":221,"./en-ca":222,"./en-ca.js":222,"./en-gb":223,"./en-gb.js":223,"./en-ie":224,"./en-ie.js":224,"./en-il":225,"./en-il.js":225,"./en-nz":226,"./en-nz.js":226,"./eo":227,"./eo.js":227,"./es":228,"./es-do":229,"./es-do.js":229,"./es-us":230,"./es-us.js":230,"./es.js":228,"./et":231,"./et.js":231,"./eu":232,"./eu.js":232,"./fa":233,"./fa.js":233,"./fi":234,"./fi.js":234,"./fo":235,"./fo.js":235,"./fr":236,"./fr-ca":237,"./fr-ca.js":237,"./fr-ch":238,"./fr-ch.js":238,"./fr.js":236,"./fy":239,"./fy.js":239,"./ga":240,"./ga.js":240,"./gd":241,"./gd.js":241,"./gl":242,"./gl.js":242,"./gom-latn":243,"./gom-latn.js":243,"./gu":244,"./gu.js":244,"./he":245,"./he.js":245,"./hi":246,"./hi.js":246,"./hr":247,"./hr.js":247,"./hu":248,"./hu.js":248,"./hy-am":249,"./hy-am.js":249,"./id":250,"./id.js":250,"./is":251,"./is.js":251,"./it":252,"./it-ch":253,"./it-ch.js":253,"./it.js":252,"./ja":254,"./ja.js":254,"./jv":255,"./jv.js":255,"./ka":256,"./ka.js":256,"./kk":257,"./kk.js":257,"./km":258,"./km.js":258,"./kn":259,"./kn.js":259,"./ko":260,"./ko.js":260,"./ku":261,"./ku.js":261,"./ky":262,"./ky.js":262,"./lb":263,"./lb.js":263,"./lo":264,"./lo.js":264,"./lt":265,"./lt.js":265,"./lv":266,"./lv.js":266,"./me":267,"./me.js":267,"./mi":268,"./mi.js":268,"./mk":269,"./mk.js":269,"./ml":270,"./ml.js":270,"./mn":271,"./mn.js":271,"./mr":272,"./mr.js":272,"./ms":273,"./ms-my":274,"./ms-my.js":274,"./ms.js":273,"./mt":275,"./mt.js":275,"./my":276,"./my.js":276,"./nb":277,"./nb.js":277,"./ne":278,"./ne.js":278,"./nl":279,"./nl-be":280,"./nl-be.js":280,"./nl.js":279,"./nn":281,"./nn.js":281,"./pa-in":282,"./pa-in.js":282,"./pl":283,"./pl.js":283,"./pt":284,"./pt-br":285,"./pt-br.js":285,"./pt.js":284,"./ro":286,"./ro.js":286,"./ru":287,"./ru.js":287,"./sd":288,"./sd.js":288,"./se":289,"./se.js":289,"./si":290,"./si.js":290,"./sk":291,"./sk.js":291,"./sl":292,"./sl.js":292,"./sq":293,"./sq.js":293,"./sr":294,"./sr-cyrl":295,"./sr-cyrl.js":295,"./sr.js":294,"./ss":296,"./ss.js":296,"./sv":297,"./sv.js":297,"./sw":298,"./sw.js":298,"./ta":299,"./ta.js":299,"./te":300,"./te.js":300,"./tet":301,"./tet.js":301,"./tg":302,"./tg.js":302,"./th":303,"./th.js":303,"./tl-ph":304,"./tl-ph.js":304,"./tlh":305,"./tlh.js":305,"./tr":306,"./tr.js":306,"./tzl":307,"./tzl.js":307,"./tzm":308,"./tzm-latn":309,"./tzm-latn.js":309,"./tzm.js":308,"./ug-cn":310,"./ug-cn.js":310,"./uk":311,"./uk.js":311,"./ur":312,"./ur.js":312,"./uz":313,"./uz-latn":314,"./uz-latn.js":314,"./uz.js":313,"./vi":315,"./vi.js":315,"./x-pseudo":316,"./x-pseudo.js":316,"./yo":317,"./yo.js":317,"./zh-cn":318,"./zh-cn.js":318,"./zh-hk":319,"./zh-hk.js":319,"./zh-tw":320,"./zh-tw.js":320};function o(e){var t=a(e);return n(t)}function a(e){if(!n.o(r,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return r[e]}o.keys=function(){return Object.keys(r)},o.resolve=a,e.exports=o,o.id=565},630:function(e,t,n){"use strict";n.r(t);n(357),n(359),n(360),n(363),n(364),n(365),n(113),n(368),n(369),n(371),n(372),n(374),n(375),n(376),n(377),n(378),n(379),n(380),n(381),n(382),n(383),n(384),n(386),n(387),n(388),n(389),n(390),n(391),n(392),n(393),n(394),n(395),n(396),n(397),n(398),n(399),n(400),n(401),n(402),n(403),n(405),n(407),n(408),n(409),n(410),n(411),n(412),n(413),n(414),n(415),n(416),n(417),n(418),n(419),n(420),n(421),n(422),n(423),n(424),n(425),n(426),n(427),n(430),n(431),n(432),n(434),n(435),n(436),n(437),n(438),n(439),n(440),n(441),n(442),n(443),n(444),n(445),n(170),n(446),n(448),n(449),n(450),n(451),n(452),n(453),n(455),n(456),n(457),n(458),n(459),n(460),n(461),n(462),n(463),n(464),n(465),n(466),n(467),n(468),n(469),n(470),n(471),n(472),n(473),n(474),n(475),n(476),n(477),n(478),n(479),n(480),n(481),n(482),n(483),n(484),n(485),n(486),n(487),n(488),n(489),n(490),n(491),n(492),n(493),n(494);var r=n(0),o=n.n(r),a=n(48),i=n.n(a),u=n(636),s=n(635),c=n(17),l={HOME:{LOAD_HOME_STATE_STARTED:"LOAD_HOME_STATE_STARTED",LOAD_HOME_STATE_FAILED:"LOAD_HOME_STATE_FAILED",LOAD_HOME_STATE_FINISHED:"LOAD_HOME_STATE_FINISHED"},QUESTIONNAIRE:{LOAD_QUESTIONNAIRE_START_STATE:"LOAD_QUESTIONNAIRE_START_STATE",LOAD_QUESTIONNAIRE_SUBMISSION_STATE:"LOAD_QUESTIONNAIRE_SUBMISSION_STATE",PUT_DATA_IN_QUESTIONNAIRE_ANSWER:"PUT_DATA_IN_QUESTIONNAIRE_ANSWER",MOVE_TO_ANOTHER_QUESTIONNAIRE_QUESTION:"MOVE_TO_ANOTHER_QUESTIONNAIRE_QUESTION",MARK_QUESTIONNAIRE_QUESTION_NOT_APPLICABLE:"MARK_QUESTIONNAIRE_QUESTION_NOT_APPLICABLE"},TASK:{LOAD_TASK_SUBMISSION:"ACTION_TASK_LOAD_TASK_SUBMISSION",PUT_DATA_IN_TASK_SUBMISSION:"ACTION_TASK_PUT_DATA_IN_TASK_SUBMISSION",MARK_TASK_QUESTION_NOT_APPLICABLE:"ACTION_TASK_MARK_TASK_QUESTION_NOT_APPLICABLE",MOVE_TO_ANOTHER_TASK_QUESTION:"ACTION_TASK_MOVE_TO_ANOTHER_TASK_QUESTION",COMPLETE_TASK_SUBMISSION:"ACTION_TASK_COMPLETE_TASK_SUBMISSION",EDIT_TASK_SUBMISSION:"ACTION_TASK_EDIT_TASK_SUBMISSION"},UI:{LOAD_DATA_STARTED:"LOAD_DATA_STARTED",LOAD_DATA_FAILED:"LOAD_DATA_FAILED",LOAD_DATA_FINISHED:"LOAD_DATA_FINISHED"},USER:{SET_CURRENT_USER:"ACTION_USER_SET_CURRENT_USER"},SITE_CONFIG:{SET_SITE_TITLE:"ACTION_SITE_CONFIG_SET_SITE_TITLE"}},f=n(56),p=n(337),b=n.n(p),m=n(338),y=n.n(m),d=n(339),h=n.n(d),v=n(340),S=n.n(v),g=n(5),w=n.n(g),O=n(11),k=n.n(O),E=n(341),T=n.n(E),j=n(98),_=n.n(j),A=n(2),I=n.n(A);function P(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var D=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,r;return t=e,r=[{key:"redirectToQuestionnaireEditing",value:function(e){window.location.href="/#/questionnaire/submission/".concat(e)}},{key:"redirectToQuestionnaireReview",value:function(e){window.location.href="/#/questionnaire/review/".concat(e)}},{key:"redirectToQuestionnaireSummary",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";window.location.href=t?"/businessOwnerApproval/#/questionnaire/summary/".concat(e,"?token=").concat(t):"/#/questionnaire/summary/".concat(e)}},{key:"redirectToTaskSubmission",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";window.location.href=t?"/businessOwnerApproval/#/task/submission/".concat(e,"?token=").concat(t):"/#/task/submission/".concat(e)}},{key:"redirectToLogout",value:function(){window.location.href="/Security/Logout"}},{key:"redirectToLogin",value:function(){window.location.href="/Security/login?BackURL=%2F"}}],(n=null)&&P(t.prototype,n),r&&P(t,r),e}();function x(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(t){N(e,t,n[t])})}return e}function N(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function C(e,t,n,r,o,a,i){try{var u=e[a](i),s=u.value}catch(e){return void n(e)}u.done?t(s):Promise.resolve(s).then(r,o)}function R(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var U=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,r;return t=e,n=null,r=[{key:"request",value:function(){var e,t=(e=regeneratorRuntime.mark(function e(t){var n,r,o,a,i,u,s,c,l,f;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=x({},t),r=n.query,o=n.variables,a=n.csrfToken,i={},a&&(i["X-CSRF-TOKEN"]=a),u={query:T()(r),variables:o},s=_.a.create({url:"/graphql",method:"post",data:u,headers:i}),e.next=7,s.request();case 7:if(c=e.sent,l=c.data,!(f=I.a.get(l,"errors.0.message",null))){e.next=12;break}throw new Error(f);case 12:return e.abrupt("return",l);case 13:case"end":return e.stop()}},e,this)}),function(){var t=this,n=arguments;return new Promise(function(r,o){var a=e.apply(t,n);function i(e){C(a,r,o,i,u,"next",e)}function u(e){C(a,r,o,i,u,"throw",e)}i(void 0)})});return function(e){return t.apply(this,arguments)}}()}],n&&R(t.prototype,n),r&&R(t,r),e}(),q=new Error("There is an error when fetching data..."),Q=new Error("There is an error when parsing data...");function M(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function L(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var B=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,r;return t=e,r=[{key:"parseQuestionsFromJSON",value:function(e){var t=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(t){M(e,t,n[t])})}return e}({},e),n=t.schemaJSON,r=t.answersJSON,o=function(e){var t=JSON.parse(e);if(!t||!Array.isArray(t))throw Q;return t}(n),a=function(e){if(!e)return{};var t=JSON.parse(e),n={};return t&&I.a.keys(t).forEach(function(e){n[I.a.toString(e)]=t[e]}),n}(r),i=function(e){var t="";return I.a.keys(e).forEach(function(n){var r=e[n];!t&&Boolean(I.a.get(r,"isCurrent",!1))&&(t=n)}),t}(a);return o.map(function(e,t){var n=I.a.toString(I.a.get(e,"ID","")),r=Boolean(I.a.get(a,"".concat(n,".hasAnswer"),!1)),o=Boolean(I.a.get(a,"".concat(n,".isApplicable"),!0)),u=!1;u=i?i===n:0===t;var s=null,c=null,l=r?I.a.get(a,"".concat(n,".inputs"),[]):[],f=r?I.a.get(a,"".concat(n,".actions"),[]):[],p=I.a.get(e,"AnswerInputFields",[]),b=I.a.get(e,"AnswerActionFields",[]);p&&Array.isArray(p)&&p.length>0&&(s=p.map(function(e){var t=I.a.toString(I.a.get(e,"InputType","")).toLowerCase();["text","email","textarea","date","url"].includes(t)||(t="text");var n=I.a.toString(I.a.get(e,"ID","")),r={id:n,label:I.a.toString(I.a.get(e,"Label","")),type:t,required:Boolean(I.a.get(e,"Required",!1)),minLength:Number.parseInt(I.a.toString(I.a.get(e,"MinLength",0))),placeholder:I.a.toString(I.a.get(e,"PlaceHolder","")),data:null};if(l&&Array.isArray(l)&&l.length>0){var o=I.a.head(l.filter(function(e){return e.id===n}));if(o){var a=I.a.toString(I.a.get(o,"data",null));a&&(r.data=a)}}return r})),b&&Array.isArray(b)&&b.length>0&&(c=b.map(function(e){var t=I.a.toString(I.a.get(e,"ActionType","")).toLowerCase();["continue","goto","message","finish"].includes(t)||(t="continue");var n=I.a.toString(I.a.get(e,"ID","")),r={id:n,label:I.a.toString(I.a.get(e,"Label","")),type:t,isChose:!1};"message"===t&&(r.message=I.a.toString(I.a.get(e,"Message",""))),"goto"===t&&(r.goto=I.a.toString(I.a.get(e,"GotoID",""))),"finish"===t&&(r.result=I.a.toString(I.a.get(e,"Result","")));var o=I.a.toString(I.a.get(e,"TaskID",""));if(r.taskID=o,f&&Array.isArray(f)&&f.length>0){var a=I.a.head(f.filter(function(e){return e.id===n}));if(a){var i=Boolean(I.a.get(a,"isChose",!1));r.isChose=i}}return r}));var m={id:n,title:I.a.toString(I.a.get(e,"Title","")),heading:I.a.toString(I.a.get(e,"Question","")),description:I.a.toString(I.a.get(e,"Description","")),type:"input"===I.a.toString(I.a.get(e,"AnswerFieldType","")).toLowerCase()?"input":"action",isCurrent:u,hasAnswer:r,isApplicable:o};return s&&(m.inputs=s),c&&(m.actions=c),m})}}],(n=null)&&L(t.prototype,n),r&&L(t,r),e}();function F(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var H=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,r;return t=e,r=[{key:"parseFromJSONObject",value:function(e){var t=k()(w()(e,"ID","")),n=k()(w()(e,"Name","")),r=k()(w()(e,"TaskType",""));switch(r){case"questionnaire":case"selection":break;default:r="questionnaire"}var o=[],a=k()(w()(e,"QuestionsDataJSON",""));return a&&(o=B.parseQuestionsFromJSON({schemaJSON:a,answersJSON:"{}"})),{id:t,name:n,type:r,questions:o}}}],(n=null)&&F(t.prototype,n),r&&F(t,r),e}();function K(e,t,n,r,o,a,i){try{var u=e[a](i),s=u.value}catch(e){return void n(e)}u.done?t(s):Promise.resolve(s).then(r,o)}function J(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var z=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,r;return t=e,n=null,r=[{key:"fetchHomeData",value:function(){var e,t=(e=regeneratorRuntime.mark(function e(){var t,n,r,o,a,i,u,s,c;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return"\nquery {\n  readDashboard {\n    Title\n    Subtitle\n    Pillars {\n      Label\n      Type\n      Disabled\n      Questionnaire {\n        ID\n      }\n    }\n    Tasks {\n      ID\n      Name\n      TaskType\n    }\n  }\n}",e.next=3,U.request({query:"\nquery {\n  readDashboard {\n    Title\n    Subtitle\n    Pillars {\n      Label\n      Type\n      Disabled\n      Questionnaire {\n        ID\n      }\n    }\n    Tasks {\n      ID\n      Name\n      TaskType\n    }\n  }\n}"});case 3:if(t=e.sent,n=w()(t,"data.readDashboard",[]),Array.isArray(n)&&0!==n.length){e.next=7;break}throw q;case 7:return r=n[0],o=k()(w()(r,"Title","")),a=k()(w()(r,"Subtitle","")),i=w()(r,"Pillars",[]),u=this.parsePillars(i),s=w()(r,"Tasks",[]),c=this.parseTasks(s),e.abrupt("return",{title:o,subtitle:a,pillars:u,tasks:c});case 15:case"end":return e.stop()}},e,this)}),function(){var t=this,n=arguments;return new Promise(function(r,o){var a=e.apply(t,n);function i(e){K(a,r,o,i,u,"next",e)}function u(e){K(a,r,o,i,u,"throw",e)}i(void 0)})});return function(){return t.apply(this,arguments)}}()},{key:"parsePillars",value:function(e){return Array.isArray(e)?e.map(function(e){var t="";switch(e.Type){case"proof_of_concept":t=b.a;break;case"software_as_service":t=y.a;break;case"product_project_or_solution":t=h.a;break;case"feature_or_bug_fix":t=S.a}return{title:k()(w()(e,"Label","")),disabled:Boolean(w()(e,"Disabled",!0)),questionnaireID:k()(w()(e,"Questionnaire.0.ID","")),icon:t}}):[]}},{key:"parseTasks",value:function(e){if(!Array.isArray(e))return[];var t=[];return e.forEach(function(e){var n=H.parseFromJSONObject(e);t.push(n)}),t}}],n&&J(t.prototype,n),r&&J(t,r),e}();function W(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var Y=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,r;return t=e,r=[{key:"displayError",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(alert(e),t)throw e}}],(n=null)&&W(t.prototype,n),r&&W(t,r),e}();function V(e,t,n,r,o,a,i){try{var u=e[a](i),s=u.value}catch(e){return void n(e)}u.done?t(s):Promise.resolve(s).then(r,o)}function G(){return function(){var e,t=(e=regeneratorRuntime.mark(function e(t){var n,r;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,z.fetchHomeData();case 3:n=e.sent,r={type:l.HOME.LOAD_HOME_STATE_FINISHED,payload:n},t(r),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),Y.displayError(e.t0);case 11:case"end":return e.stop()}},e,this,[[0,8]])}),function(){var t=this,n=arguments;return new Promise(function(r,o){var a=e.apply(t,n);function i(e){V(a,r,o,i,u,"next",e)}function u(e){V(a,r,o,i,u,"throw",e)}i(void 0)})});return function(e){return t.apply(this,arguments)}}()}var X=n(78),Z=n.n(X),$=n(633);function ee(e){return(ee="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function te(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function ne(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function re(e,t){return!t||"object"!==ee(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function oe(e){return(oe=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ae(e,t){return(ae=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var ie=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),re(this,oe(t).apply(this,arguments))}var n,a,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ae(e,t)}(t,r["Component"]),n=t,(a=[{key:"render",value:function(){var e=this,t=["Pillar"].concat(te(this.props.classes));return this.props.pillar.disabled&&t.push("disabled"),o.a.createElement($.a,{className:t.join(" "),to:this.props.link,onClick:function(t){e.props.pillar.disabled&&(t.preventDefault(),alert("Coming soon..."))}},o.a.createElement("div",{className:"icon"},o.a.createElement("img",{src:this.props.pillar.icon,alt:this.props.pillar.title})),o.a.createElement("div",{className:"title"},this.props.pillar.title))}}])&&ne(n.prototype,a),i&&ne(n,i),t}();function ue(e){return(ue="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function se(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function ce(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function le(e,t){return!t||"object"!==ue(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function fe(e){return(fe=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function pe(e,t){return(pe=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var be=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),le(this,fe(t).apply(this,arguments))}var n,a,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&pe(e,t)}(t,r["Component"]),n=t,(a=[{key:"render",value:function(){var e=["TaskButton"].concat(se(this.props.classes));return o.a.createElement($.a,{className:e.join(" "),to:this.props.link},this.props.title)}}])&&ce(n.prototype,a),i&&ce(n,i),t}(),me=n(342),ye=n.n(me);function de(e,t,n,r,o,a,i){try{var u=e[a](i),s=u.value}catch(e){return void n(e)}u.done?t(s):Promise.resolve(s).then(r,o)}function he(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var ve=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,r;return t=e,n=null,r=[{key:"getCSRFToken",value:function(){var e,t=(e=regeneratorRuntime.mark(function e(){var t,n,r,o;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=_.a.create({url:"/getCSRFToken",method:"get",headers:{"x-requested-with":"XMLHttpRequest"}}),e.next=3,t.request();case 3:if(n=e.sent,r=n.data,o=I.a.get(r,"CSRFToken",null)){e.next=8;break}throw new Error(r);case 8:return e.abrupt("return",o);case 9:case"end":return e.stop()}},e,this)}),function(){var t=this,n=arguments;return new Promise(function(r,o){var a=e.apply(t,n);function i(e){de(a,r,o,i,u,"next",e)}function u(e){de(a,r,o,i,u,"throw",e)}i(void 0)})});return function(){return t.apply(this,arguments)}}()}],n&&he(t.prototype,n),r&&he(t,r),e}();function Se(e){return(Se="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ge(e,t,n,r,o,a,i){try{var u=e[a](i),s=u.value}catch(e){return void n(e)}u.done?t(s):Promise.resolve(s).then(r,o)}function we(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Oe(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function ke(e,t){return!t||"object"!==Se(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Ee(e){return(Ee=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Te(e,t){return(Te=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var je=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),ke(this,Ee(t).apply(this,arguments))}var n,a,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Te(e,t)}(t,r["Component"]),n=t,(a=[{key:"render",value:function(){var e=this,t=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(t){we(e,t,n[t])})}return e}({},this.props).classes;return o.a.createElement("button",{className:"LogoutButton ".concat(t.join(" ")),onClick:function(){e.logout()}},o.a.createElement("div",null,o.a.createElement("img",{src:ye.a}),"Log Out"))}},{key:"logout",value:function(){var e,t=(e=regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ve.getCSRFToken();case 2:t=e.sent,window.location.href="/Security/Logout?SecurityID=".concat(t);case 4:case"end":return e.stop()}},e,this)}),function(){var t=this,n=arguments;return new Promise(function(r,o){var a=e.apply(t,n);function i(e){ge(a,r,o,i,u,"next",e)}function u(e){ge(a,r,o,i,u,"throw",e)}i(void 0)})});return function(){return t.apply(this,arguments)}}()}])&&Oe(n.prototype,a),i&&Oe(n,i),t}();je.defaultProps={classes:[]};var _e=je;function Ae(e){return(Ae="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ie(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Pe(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function De(e,t){return!t||"object"!==Ae(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function xe(e){return(xe=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Ne(e,t){return(Ne=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Ce=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),De(this,xe(t).apply(this,arguments))}var n,a,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Ne(e,t)}(t,r["Component"]),n=t,(a=[{key:"render",value:function(){var e=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(t){Ie(e,t,n[t])})}return e}({},this.props.homeState),t=e.title,n=e.subtitle,r=e.pillars,a=e.tasks;return o.a.createElement("div",{className:"Home"},o.a.createElement(_e,{classes:["clearfix","float-right","mt-5","mr-5"]}),o.a.createElement("div",{className:"layout"},o.a.createElement("a",{href:"/"},o.a.createElement("img",{src:Z.a,className:"logo"})),o.a.createElement("h1",null,t),o.a.createElement("h2",null,n),o.a.createElement("div",{className:"pillars"},o.a.createElement("div",{className:"row"},r.map(function(e,t){return o.a.createElement(ie,{link:"/questionnaire/start/".concat(e.questionnaireID),classes:["col","mx-1"],pillar:e,key:t})}))),o.a.createElement("div",{className:"tasks"},a.map(function(e){return o.a.createElement(be,{link:"/tasks/standalone/".concat(e.id),classes:["mx-1"],title:e.name})}))))}}])&&Pe(n.prototype,a),i&&Pe(n,i),t}();function Re(e){return(Re="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ue(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function qe(e,t){return!t||"object"!==Re(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Qe(e){return(Qe=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Me(e,t){return(Me=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Le=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),qe(this,Qe(t).apply(this,arguments))}var n,a,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Me(e,t)}(t,r["Component"]),n=t,(a=[{key:"render",value:function(){return o.a.createElement("footer",{className:"Footer"},o.a.createElement("div",null,"© 2019 | NZ Transport Agency"))}}])&&Ue(n.prototype,a),i&&Ue(n,i),t}(),Be=n(343),Fe=n.n(Be);function He(e){return(He="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ke(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Je(e,t){return!t||"object"!==He(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function ze(e){return(ze=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function We(e,t){return(We=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Ye=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),Je(this,ze(t).apply(this,arguments))}var n,a,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&We(e,t)}(t,r["Component"]),n=t,(a=[{key:"componentDidMount",value:function(){this.props.dispatchLoadHomeDataAction&&this.props.dispatchLoadHomeDataAction()}},{key:"render",value:function(){return this.props.homeState?o.a.createElement("div",{className:"HomeContainer",style:{backgroundImage:'url("'.concat(Fe.a,'")'),backgroundSize:"cover"}},o.a.createElement(Ce,{homeState:this.props.homeState}),o.a.createElement(Le,null)):null}}])&&Ke(n.prototype,a),i&&Ke(n,i),t}(),Ve=Object(c.b)(function(e){return{homeState:e.homeState}},function(e,t){return{dispatchLoadHomeDataAction:function(){e(G())}}})(Ye),Ge=n(31),Xe=n.n(Ge);function Ze(e){return(Ze="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function $e(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function et(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function tt(e,t){return!t||"object"!==Ze(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function nt(e){return(nt=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function rt(e,t){return(rt=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var ot=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),tt(this,nt(t).apply(this,arguments))}var n,a,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&rt(e,t)}(t,r["Component"]),n=t,(a=[{key:"render",value:function(){var e=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(t){$e(e,t,n[t])})}return e}({},this.props),t=e.title,n=e.classes,r=e.disabled,a=e.onClick,i=e.iconImage,u=null;return i&&(u=o.a.createElement("img",{src:i})),o.a.createElement("button",{className:Xe()("BaseButton",n,{disabled:r}),onClick:function(e){r?e.preventDefault():a(e)}},u,t)}}])&&et(n.prototype,a),i&&et(n,i),t}();ot.defaultProps={title:"",disabled:!1,classes:[],onClick:function(){}};var at=ot;function it(e){return(it="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ut(){return(ut=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function st(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function ct(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function lt(e,t){return!t||"object"!==it(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function ft(e){return(ft=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function pt(e,t){return(pt=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var bt=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),lt(this,ft(t).apply(this,arguments))}var n,a,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&pt(e,t)}(t,r["Component"]),n=t,(a=[{key:"render",value:function(){return o.a.createElement(at,ut({},this.props,{classes:["LightButton"].concat(st(this.props.classes))}))}}])&&ct(n.prototype,a),i&&ct(n,i),t}();bt.defaultProps={title:"",disabled:!1,classes:[],onClick:function(){}};var mt=bt;function yt(e){return(yt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function dt(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function ht(e,t){return!t||"object"!==yt(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function vt(e){return(vt=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function St(e,t){return(St=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var gt=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),ht(this,vt(t).apply(this,arguments))}var n,a,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&St(e,t)}(t,r["Component"]),n=t,(a=[{key:"render",value:function(){var e=this.props,t=e.keyInformation,n=e.user,r=e.onStartButtonClick;return o.a.createElement("div",{className:"Start"},o.a.createElement("div",{className:"start-form"},o.a.createElement("div",{className:"info-box"},o.a.createElement("div",{className:"key-info-title"},"Key Information:"),o.a.createElement("div",{className:"key-info",dangerouslySetInnerHTML:{__html:t}}),o.a.createElement("div",{className:"user-info"},o.a.createElement("div",{className:"info-line"},o.a.createElement("b",null,"Your Name: "),o.a.createElement("span",null,n.name)),o.a.createElement("div",{className:"info-line"},o.a.createElement("b",null,"Email Address: "),o.a.createElement("span",null,n.email))),o.a.createElement("div",{className:"actions"},o.a.createElement(mt,{title:"START",onClick:r})))))}}])&&dt(n.prototype,a),i&&dt(n,i),t}();function wt(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var Ot=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,r;return t=e,r=[{key:"parseUserFromJSON",value:function(e){var t="string"==typeof e?JSON.parse(e):e;return{id:k()(w()(t,"ID")),name:"".concat(w()(t,"FirstName")," ").concat(w()(t,"Surname")),email:w()(t,"Email"),isSA:"true"===k()(w()(t,"IsSA")),isCISO:"true"===k()(w()(t,"IsCISO"))}}}],(n=null)&&wt(t.prototype,n),r&&wt(t,r),e}();function kt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(t){Et(e,t,n[t])})}return e}function Et(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Tt(e,t,n,r,o,a,i){try{var u=e[a](i),s=u.value}catch(e){return void n(e)}u.done?t(s):Promise.resolve(s).then(r,o)}function jt(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var a=e.apply(t,n);function i(e){Tt(a,r,o,i,u,"next",e)}function u(e){Tt(a,r,o,i,u,"throw",e)}i(void 0)})}}function _t(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var At=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,r;return t=e,n=null,r=[{key:"createInProgressSubmission",value:function(){var e=jt(regeneratorRuntime.mark(function e(t){var n,r,o,a,i,u;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=kt({},t),r=n.questionnaireID,o=n.csrfToken,a="\nmutation {\n createQuestionnaireSubmission(QuestionnaireID: ".concat(r,"){\n   UUID\n }\n}"),e.next=4,U.request({query:a,csrfToken:o});case 4:if(i=e.sent,u=I.a.get(i,"data.createQuestionnaireSubmission.UUID",null)){e.next=8;break}throw q;case 8:return e.abrupt("return",u);case 9:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"fetchStartData",value:function(){var e=jt(regeneratorRuntime.mark(function e(t){var n,r,o,a,i;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n="\nquery {\n  readCurrentMember {\n    ID\n    Email\n    FirstName\n    Surname\n    IsSA\n    IsCISO\n  }\n  readQuestionnaire(ID: ".concat(t,") {\n    ID\n    Name\n    KeyInformation\n  }\n  readSiteConfig {\n    Title\n  }\n}\n"),e.next=3,U.request({query:n});case 3:if(r=e.sent,o=I.a.get(r,"data.readCurrentMember.0",null),a=I.a.get(r,"data.readQuestionnaire",null),i=I.a.get(r,"data.readSiteConfig.0",null),o&&a&&i){e.next=9;break}throw q;case 9:return e.abrupt("return",{title:I.a.get(a,"Name",""),subtitle:I.a.get(i,"Title",""),questionnaireID:I.a.get(a,"ID",""),keyInformation:I.a.get(a,"KeyInformation",""),user:Ot.parseUserFromJSON(o)});case 10:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"fetchSubmissionData",value:function(){var e=jt(regeneratorRuntime.mark(function e(t){var n,r,o,a,i;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n='\nquery {\n  readCurrentMember {\n    ID\n    Email\n    FirstName\n    Surname\n    IsSA\n    IsCISO\n  }\n  readQuestionnaireSubmission(UUID: "'.concat(t,'") {\n    ID\n    UUID\n    User {\n      ID\n    }\n    SubmitterName,\n    SubmitterRole,\n    SubmitterEmail,\n    QuestionnaireStatus\n    Questionnaire {\n      ID\n      Name\n    }\n    QuestionnaireData\n    AnswerData\n    CisoApprovalStatus\n    BusinessOwnerApprovalStatus\n    SecurityArchitectApprovalStatus\n    IsCurrentUserAnApprover\n    TaskSubmissions {\n      UUID\n      TaskName\n      Status\n    }\n  }\n  readSiteConfig {\n    Title\n  }\n}'),e.next=3,U.request({query:n});case 3:if(r=e.sent,o=I.a.get(r,"data.readCurrentMember.0",{}),a=I.a.get(r,"data.readQuestionnaireSubmission.0",{}),o&&a){e.next=8;break}throw q;case 8:return i={title:I.a.toString(I.a.get(a,"Questionnaire.Name","")),siteTitle:I.a.toString(I.a.get(r,"data.readSiteConfig.0.Title","")),user:Ot.parseUserFromJSON(o),isCurrentUserApprover:"true"===I.a.get(a,"IsCurrentUserAnApprover","false"),submission:{questionnaireID:I.a.toString(I.a.get(a,"Questionnaire.ID","")),questionnaireTitle:I.a.toString(I.a.get(a,"Questionnaire.Name","")),submissionID:I.a.toString(I.a.get(a,"ID","")),submissionUUID:I.a.toString(I.a.get(a,"UUID","")),submitter:{id:I.a.toString(I.a.get(a,"User.ID")),name:I.a.toString(I.a.get(a,"SubmitterName","")),role:I.a.toString(I.a.get(a,"SubmitterRole","")),email:I.a.toString(I.a.get(a,"SubmitterEmail","")),isSA:!1,isCISO:!1},status:I.a.toString(I.a.get(a,"QuestionnaireStatus","")).toLowerCase().replace("-","_"),approvalStatus:{chiefInformationSecurityOfficer:I.a.toString(I.a.get(a,"CisoApprovalStatus","")),businessOwner:I.a.toString(I.a.get(a,"BusinessOwnerApprovalStatus","")),securityArchitect:I.a.toString(I.a.get(a,"SecurityArchitectApprovalStatus",""))},questions:B.parseQuestionsFromJSON({schemaJSON:I.a.toString(I.a.get(a,"QuestionnaireData","")),answersJSON:I.a.toString(I.a.get(a,"AnswerData",""))}),taskSubmissions:I.a.toArray(I.a.get(a,"TaskSubmissions",[])).map(function(e){return{uuid:I.a.toString(I.a.get(e,"UUID","")),taskName:I.a.toString(I.a.get(e,"TaskName","")),status:I.a.toString(I.a.get(e,"Status",""))}})}},e.abrupt("return",i);case 10:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"updateSubmissionData",value:function(){var e=jt(regeneratorRuntime.mark(function e(t){var n,r,o,a,i,u,s,c;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=kt({},t),r=n.submissionID,o=n.questionID,a=n.answerData,i=n.csrfToken,u=window.btoa(JSON.stringify(a)),s='\nmutation {\n  updateQuestionnaireSubmission(ID: "'.concat(r,'", QuestionID: "').concat(o,'", AnswerData: "').concat(u,'") {\n    ID\n    AnswerData\n  }\n}'),e.next=5,U.request({query:s,csrfToken:i});case 5:if(c=e.sent,I.a.get(c,"data.updateQuestionnaireSubmission.AnswerData",null)){e.next=9;break}throw q;case 9:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"batchUpdateSubmissionData",value:function(){var e=jt(regeneratorRuntime.mark(function e(t){var n,r,o,a,i,u,s,c,l,f,p,b,m;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n=kt({},t),r=n.submissionID,o=n.questionIDList,a=n.answerDataList,i=n.csrfToken,o.length===a.length){e.next=3;break}throw q;case 3:for(u=[],s=0;s<o.length;s++)c=o[s],l=a[s],f=window.btoa(JSON.stringify(l)),p="\nupdateQuestion".concat(c,': updateQuestionnaireSubmission(ID: "').concat(r,'", QuestionID: "').concat(c,'", AnswerData: "').concat(f,'") {\n  ID\n  AnswerData\n}'),u.push(p);return b="\nmutation {\n  ".concat(u.join("\n"),"\n}\n"),e.next=8,U.request({query:b,csrfToken:i});case 8:if(m=e.sent,I.a.get(m,"data",null)){e.next=12;break}throw q;case 12:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"submitQuestionnaire",value:function(){var e=jt(regeneratorRuntime.mark(function e(t){var n,r,o,a,i,u,s;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=kt({},t),r=n.submissionID,o=n.csrfToken,a='\nmutation {\n updateQuestionnaireStatusToSubmitted(ID: "'.concat(r,'") {\n   QuestionnaireStatus\n   UUID\n }\n}'),e.next=4,U.request({query:a,csrfToken:o});case 4:if(i=e.sent,u=I.a.toString(I.a.get(i,"data.updateQuestionnaireStatusToSubmitted.QuestionnaireStatus",null)),s=I.a.toString(I.a.get(i,"data.updateQuestionnaireStatusToSubmitted.UUID",null)),u&&s){e.next=9;break}throw q;case 9:return e.abrupt("return",{uuid:s});case 10:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"submitQuestionnaireForApproval",value:function(){var e=jt(regeneratorRuntime.mark(function e(t){var n,r,o,a,i,u,s;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=kt({},t),r=n.submissionID,o=n.csrfToken,a='\nmutation {\n updateQuestionnaireStatusToWaitingForSecurityArchitectApproval(ID: "'.concat(r,'") {\n   QuestionnaireStatus\n   UUID\n }\n}'),e.next=4,U.request({query:a,csrfToken:o});case 4:if(i=e.sent,u=I.a.toString(I.a.get(i,"data.updateQuestionnaireStatusToWaitingForSecurityArchitectApproval.QuestionnaireStatus",null)),s=I.a.toString(I.a.get(i,"data.updateQuestionnaireStatusToWaitingForSecurityArchitectApproval.UUID",null)),u&&s){e.next=9;break}throw q;case 9:return e.abrupt("return",{uuid:s});case 10:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"approveQuestionnaireSubmission",value:function(){var e=jt(regeneratorRuntime.mark(function e(t){var n,r,o,a,i,u,s;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=kt({},t),r=n.submissionID,o=n.csrfToken,a='\nmutation {\n updateQuestionnaireOnApproveByGroupMember(ID: "'.concat(r,'") {\n   QuestionnaireStatus\n   UUID\n }\n}'),e.next=4,U.request({query:a,csrfToken:o});case 4:if(i=e.sent,u=I.a.toString(I.a.get(i,"data.updateQuestionnaireOnApproveByGroupMember.QuestionnaireStatus",null)),s=I.a.toString(I.a.get(i,"data.updateQuestionnaireOnApproveByGroupMember.UUID",null)),u&&s){e.next=9;break}throw q;case 9:return e.abrupt("return",{uuid:s});case 10:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"denyQuestionnaireSubmission",value:function(){var e=jt(regeneratorRuntime.mark(function e(t){var n,r,o,a,i,u,s;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=kt({},t),r=n.submissionID,o=n.csrfToken,a='\nmutation {\n updateQuestionnaireOnDenyByGroupMember(ID: "'.concat(r,'") {\n   QuestionnaireStatus\n   UUID\n }\n}'),e.next=4,U.request({query:a,csrfToken:o});case 4:if(i=e.sent,u=I.a.toString(I.a.get(i,"data.updateQuestionnaireOnDenyByGroupMember.QuestionnaireStatus",null)),s=I.a.toString(I.a.get(i,"data.updateQuestionnaireOnDenyByGroupMember.UUID",null)),u&&s){e.next=9;break}throw q;case 9:return e.abrupt("return",{uuid:s});case 10:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"editQuestionnaireSubmission",value:function(){var e=jt(regeneratorRuntime.mark(function e(t){var n,r,o,a,i,u,s;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=kt({},t),r=n.submissionID,o=n.csrfToken,a='\nmutation {\n updateQuestionnaireStatusToInProgress(ID: "'.concat(r,'") {\n   QuestionnaireStatus\n   UUID\n }\n}'),e.next=4,U.request({query:a,csrfToken:o});case 4:if(i=e.sent,u=I.a.toString(I.a.get(i,"data.updateQuestionnaireStatusToInProgress.QuestionnaireStatus",null)),s=I.a.toString(I.a.get(i,"data.updateQuestionnaireStatusToInProgress.UUID",null)),u&&s){e.next=9;break}throw q;case 9:return e.abrupt("return",{uuid:s});case 10:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()}],n&&_t(t.prototype,n),r&&_t(t,r),e}();function It(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(t){Pt(e,t,n[t])})}return e}function Pt(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Dt(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var xt=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,r;return t=e,r=[{key:"transformFromFullQuestionToData",value:function(e){var t={isCurrent:e.isCurrent,hasAnswer:e.hasAnswer,isApplicable:e.isApplicable,answerType:e.type};return"input"===e.type&&Array.isArray(e.inputs)&&(t.inputs=e.inputs.map(function(e){var t=e.data;return t&&I.a.isString(t)&&(t=t.trim()),{id:e.id,data:t}})),"action"===e.type&&Array.isArray(e.actions)&&(t.actions=e.actions.map(function(e){return{id:e.id,isChose:e.isChose}})),t}},{key:"existsUnansweredQuestion",value:function(e){var t=!1;return e.forEach(function(e){var n=It({},e),r=n.hasAnswer,o=n.isApplicable;!r&&o&&(t=!0)}),t}},{key:"existsIncompleteTaskSubmission",value:function(e){var t=!1;return e.forEach(function(e){"in_progress"===e.status&&(t=!0)}),t}},{key:"getDataUpdateIntent",value:function(e){var t=It({},e),n=t.answeredQuestion,r=t.questions,o={currentIndex:r.findIndex(function(e){return e.id===n.id}),nonApplicableIndexes:[],targetIndex:0,complete:!1,terminate:!1,result:""};if("input"===n.type)return o.currentIndex===r.length-1?o.complete=!0:o.targetIndex=o.currentIndex+1,o;if("action"===n.type){if(!n.actions)throw new Error("This question does not have any action!");var a=n.actions.find(function(e){return e.isChose});if(!a)throw new Error("This question does not have any chosen action!");if("finish"===a.type){for(var i=o.currentIndex+1;i<r.length;i++)o.nonApplicableIndexes.push(i);o.result=a.result||"",o.complete=!0}if("message"===a.type&&(o.terminate=!0),"continue"===a.type&&(o.targetIndex=o.currentIndex+1),"goto"===a.type){var u=a.goto;if(o.targetIndex=r.findIndex(function(e){return e.id===u}),o.targetIndex<=o.currentIndex)throw new Error("The next question is not set correctly!");if(o.targetIndex-o.currentIndex>1)for(var s=o.currentIndex+1;s<o.targetIndex;)o.nonApplicableIndexes.push(s),s++}return o.currentIndex===r.length-1&&(o.complete=!0),o}throw new Error("Wrong question type!")}}],(n=null)&&Dt(t.prototype,n),r&&Dt(t,r),e}(),Nt=n(344),Ct=n.n(Nt);function Rt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(t){Ut(e,t,n[t])})}return e}function Ut(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function qt(e,t,n,r,o,a,i){try{var u=e[a](i),s=u.value}catch(e){return void n(e)}u.done?t(s):Promise.resolve(s).then(r,o)}function Qt(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var a=e.apply(t,n);function i(e){qt(a,r,o,i,u,"next",e)}function u(e){qt(a,r,o,i,u,"throw",e)}i(void 0)})}}function Mt(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var Lt=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,r;return t=e,n=null,r=[{key:"createTaskSubmissionsAccordingToQuestions",value:function(){var e=Qt(regeneratorRuntime.mark(function e(t){var n,r,o,a,i,u,s,c,l;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n=Rt({},t),r=n.questions,o=n.questionnaireSubmissionID,a=n.csrfToken,i=[],r.forEach(function(e){if(e.isApplicable&&e.hasAnswer&&"action"===e.type){var t=e.actions;if(!t||!Array.isArray(t))throw new Error("Invalid questionnaire data, please reload the questionnaire");t.forEach(function(e){if(e.isChose){var t=e.taskID;!t||Number.parseInt(t)<=0||i.push(t)}})}}),0!==(u=Ct()(i)).length){e.next=6;break}return e.abrupt("return");case 6:return s=[],u.forEach(function(e){var t="\ncreateTaskSubmission".concat(e,': createTaskSubmission(TaskID: "').concat(e,'", QuestionnaireSubmissionID: "').concat(o,'") {\n  ID\n  UUID\n}');s.push(t)}),c="\nmutation {\n  ".concat(s.join("\n"),"\n}"),e.next=11,U.request({query:c,csrfToken:a});case 11:if(l=e.sent,w()(l,"data",null)){e.next=15;break}throw q;case 15:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"fetchTaskSubmission",value:function(){var e=Qt(regeneratorRuntime.mark(function e(t){var n,r,o,a,i,u,s;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=Rt({},t),r=n.uuid,o=n.secureToken,a='\nquery {\n  readTaskSubmission(UUID: "'.concat(r,'", SecureToken: "').concat(o||"",'") {\n    ID\n    UUID\n    TaskName\n    Status\n    Result\n    LockAnswersWhenComplete\n    QuestionnaireSubmission {\n      ID\n      UUID\n    }\n    Submitter {\n      ID\n      Email\n      FirstName\n      Surname\n      IsSA\n      IsCISO\n    }\n    QuestionnaireData\n    AnswerData\n  }\n}'),e.next=4,U.request({query:a});case 4:if(i=e.sent,u=w()(i,"data.readTaskSubmission.0",null)){e.next=8;break}throw q;case 8:return s={id:k()(w()(u,"ID","")),uuid:k()(w()(u,"UUID","")),taskName:k()(w()(u,"TaskName","")),status:k()(w()(u,"Status","")),result:k()(w()(u,"Result","")),submitter:Ot.parseUserFromJSON(w()(u,"Submitter")),lockWhenComplete:Boolean(w()(u,"LockAnswersWhenComplete",!1)),questionnaireSubmissionUUID:k()(w()(u,"QuestionnaireSubmission.UUID","")),questionnaireSubmissionID:k()(w()(u,"QuestionnaireSubmission.ID","")),questions:B.parseQuestionsFromJSON({schemaJSON:k()(w()(u,"QuestionnaireData","")),answersJSON:k()(w()(u,"AnswerData",""))})},e.abrupt("return",s);case 10:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"batchUpdateTaskSubmissionData",value:function(){var e=Qt(regeneratorRuntime.mark(function e(t){var n,r,o,a,i,u,s,c,l,f,p,b,m,y;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n=Rt({},t),r=n.uuid,o=n.questionIDList,a=n.answerDataList,i=n.csrfToken,u=n.secureToken,o.length===a.length){e.next=3;break}throw q;case 3:for(s=[],c=0;c<o.length;c++)l=o[c],f=a[c],p=window.btoa(JSON.stringify(f)),b="\nupdateQuestion".concat(l,': updateTaskSubmission(\n  UUID: "').concat(r,'", \n  QuestionID: "').concat(l,'", \n  AnswerData: "').concat(p,'", \n  SecureToken: "').concat(u||"",'"\n) {\n  UUID\n  Status\n}'),s.push(b);return m="\nmutation {\n  ".concat(s.join("\n"),"\n}\n"),e.next=8,U.request({query:m,csrfToken:i});case 8:if(y=e.sent,w()(y,"data",null)){e.next=12;break}throw q;case 12:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"completeTaskSubmission",value:function(){var e=Qt(regeneratorRuntime.mark(function e(t){var n,r,o,a,i,u,s;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=Rt({},t),r=n.uuid,o=n.result,a=n.csrfToken,i=n.secureToken,u='\nmutation {\n completeTaskSubmission(UUID: "'.concat(r,'", Result: "').concat(o,'", SecureToken: "').concat(i||"",'") {\n   UUID\n   Status\n }\n}'),e.next=4,U.request({query:u,csrfToken:a});case 4:if(s=e.sent,w()(s,"data.completeTaskSubmission.UUID",null)){e.next=7;break}throw q;case 7:return e.abrupt("return",{uuid:r});case 8:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"editTaskSubmission",value:function(){var e=Qt(regeneratorRuntime.mark(function e(t){var n,r,o,a,i,u;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=Rt({},t),r=n.uuid,o=n.csrfToken,a=n.secureToken,i='\nmutation {\n editTaskSubmission(UUID: "'.concat(r,'", SecureToken: "').concat(a||"",'") {\n   UUID\n   Status\n }\n}'),e.next=4,U.request({query:i,csrfToken:o});case 4:if(u=e.sent,w()(u,"data.editTaskSubmission.UUID",null)){e.next=7;break}throw q;case 7:return e.abrupt("return",{uuid:r});case 8:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"fetchStandaloneTask",value:function(){var e=Qt(regeneratorRuntime.mark(function e(t){var n,r,o,a,i,u;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=Rt({},t),r=n.taskId,o='\nquery {\n  readTask(ID: "'.concat(r,'") {\n    ID\n    Name\n    TaskType\n    QuestionsDataJSON\n  }\n}'),e.next=4,U.request({query:o});case 4:if(a=e.sent,i=w()(a,"data.readTask",null)){e.next=8;break}throw q;case 8:return u=H.parseFromJSONObject(i),e.abrupt("return",u);case 10:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()}],n&&Mt(t.prototype,n),r&&Mt(t,r),e}();function Bt(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function Ft(e,t,n,r,o,a,i){try{var u=e[a](i),s=u.value}catch(e){return void n(e)}u.done?t(s):Promise.resolve(s).then(r,o)}function Ht(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var a=e.apply(t,n);function i(e){Ft(a,r,o,i,u,"next",e)}function u(e){Ft(a,r,o,i,u,"throw",e)}i(void 0)})}}function Kt(e){return function(){var t=Ht(regeneratorRuntime.mark(function t(n){var r;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,At.fetchSubmissionData(e);case 3:r=t.sent,n((o=r,{type:l.QUESTIONNAIRE.LOAD_QUESTIONNAIRE_SUBMISSION_STATE,payload:o})),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),alert(t.t0);case 10:case"end":return t.stop()}var o},t,this,[[0,7]])}));return function(e){return t.apply(this,arguments)}}()}function Jt(e){return function(){var t=Ht(regeneratorRuntime.mark(function t(n,r){var o,a,i,u,s,c,f;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(o=r(),a=o.questionnaireState.submissionState.submission){t.next=4;break}return t.abrupt("return");case 4:return i=xt.getDataUpdateIntent({answeredQuestion:e,questions:a.questions}),u=i.currentIndex,s=i.targetIndex,c=i.nonApplicableIndexes,f=i.complete,c.length>0&&n({type:l.QUESTIONNAIRE.MARK_QUESTIONNAIRE_QUESTION_NOT_APPLICABLE,nonApplicableIndexes:c}),s>u&&n({type:l.QUESTIONNAIRE.MOVE_TO_ANOTHER_QUESTIONNAIRE_QUESTION,targetIndex:s}),t.next=9,zt(r(),I.a.uniq([u].concat(Bt(c),[s])));case 9:f&&D.redirectToQuestionnaireReview(a.submissionUUID);case 10:case"end":return t.stop()}},t,this)}));return function(e,n){return t.apply(this,arguments)}}()}function zt(e,t){return Wt.apply(this,arguments)}function Wt(){return(Wt=Ht(regeneratorRuntime.mark(function e(t,n){var r,o;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t.questionnaireState.submissionState.submission){e.next=3;break}return e.abrupt("return");case 3:return e.next=5,ve.getCSRFToken();case 5:return o=e.sent,e.prev=6,e.next=9,At.batchUpdateSubmissionData({submissionID:r.submissionID,questionIDList:n.map(function(e){return r.questions[e].id}),answerDataList:n.map(function(e){return xt.transformFromFullQuestionToData(r.questions[e])}),csrfToken:o});case 9:e.next=14;break;case 11:e.prev=11,e.t0=e.catch(6),alert(e.t0.message);case 14:case"end":return e.stop()}},e,this,[[6,11]])}))).apply(this,arguments)}function Yt(e){return(Yt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Vt(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Gt(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Xt(e,t){return!t||"object"!==Yt(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Zt(e){return(Zt=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function $t(e,t){return($t=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var en=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),Xt(this,Zt(t).apply(this,arguments))}var n,a,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&$t(e,t)}(t,r["Component"]),n=t,(a=[{key:"render",value:function(){var e=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(t){Vt(e,t,n[t])})}return e}({},this.props),t=e.title,n=e.subtitle;return o.a.createElement("header",{className:"Header"},o.a.createElement("div",{className:"top-banner"},o.a.createElement("a",{href:"/"},o.a.createElement("img",{src:Z.a,className:"logo"}))),o.a.createElement("div",{className:"logout-wrapper"},this.props.showLogoutButton&&o.a.createElement(_e,null)),o.a.createElement("h1",null,t),o.a.createElement("h2",null,n))}}])&&Gt(n.prototype,a),i&&Gt(n,i),t}();en.defaultProps={title:"",subtitle:"",showLogoutButton:!0};var tn=en;function nn(e){return(nn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function rn(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(t){on(e,t,n[t])})}return e}function on(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function an(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function un(e,t){return!t||"object"!==nn(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function sn(e){return(sn=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function cn(e,t){return(cn=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var ln=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),un(this,sn(t).apply(this,arguments))}var n,a,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&cn(e,t)}(t,r["Component"]),n=t,(a=[{key:"componentDidMount",value:function(){var e=rn({},this.props),t=e.questionnaireID;(0,e.dispatchLoadQuestionnaireAction)(t)}},{key:"render",value:function(){var e=rn({},this.props.startState),t=e.title,n=e.subtitle,r=e.keyInformation,a=e.user,i=rn({},this.props),u=i.questionnaireID,s=i.dispatchCreateInProgressSubmissionAction;return a?o.a.createElement("div",{className:"StartContainer"},o.a.createElement(tn,{title:t,subtitle:n}),o.a.createElement(gt,{keyInformation:r,user:a,onStartButtonClick:function(){s(u)}}),o.a.createElement(Le,null)):null}}])&&an(n.prototype,a),i&&an(n,i),t}(),fn=Object(c.b)(function(e){return{startState:e.questionnaireState.startState}},function(e,t){return{dispatchLoadQuestionnaireAction:function(t){e(function(e){return t=Ht(regeneratorRuntime.mark(function t(n){var r;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,At.fetchStartData(e);case 3:r=t.sent,n((o=r,{type:l.QUESTIONNAIRE.LOAD_QUESTIONNAIRE_START_STATE,payload:o})),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),alert(t.t0);case 10:case"end":return t.stop()}var o},t,this,[[0,7]])})),function(e){return t.apply(this,arguments)};var t}(t))},dispatchCreateInProgressSubmissionAction:function(t){e(function(e){return t=Ht(regeneratorRuntime.mark(function t(n){var r,o;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,ve.getCSRFToken();case 3:return r=t.sent,t.next=6,At.createInProgressSubmission({questionnaireID:e,csrfToken:r});case 6:o=t.sent,D.redirectToQuestionnaireEditing(o),t.next=13;break;case 10:t.prev=10,t.t0=t.catch(0),alert(t.t0);case 13:case"end":return t.stop()}},t,this,[[0,10]])})),function(e){return t.apply(this,arguments)};var t}(t))}}})(ln),pn=n(57),bn=n(348),mn=n.n(bn);function yn(e){return(yn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function dn(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(t){hn(e,t,n[t])})}return e}function hn(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function vn(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Sn(e,t){return!t||"object"!==yn(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function gn(e){return(gn=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function wn(e,t){return(wn=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var On=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),Sn(this,gn(t).apply(this,arguments))}var n,a,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&wn(e,t)}(t,r["Component"]),n=t,(a=[{key:"render",value:function(){var e=dn({},this.props),t=e.question,n=e.onItemClick;return o.a.createElement("div",{className:"LeftBarItem"},this.renderIcon(t),o.a.createElement("button",{className:"btn",disabled:!t.isApplicable,onClick:function(e){n(t)}},t.title))}},{key:"renderIcon",value:function(e){var t=dn({},e),n=t.isCurrent,r=t.hasAnswer,a=t.isApplicable;return n?o.a.createElement("img",{src:mn.a}):a?r&&a?o.a.createElement("i",{className:"fas fa-check-circle success"}):o.a.createElement("i",{className:"fas fa-check-circle pending"}):o.a.createElement("i",{className:"fas fa-question-circle not-applicable"})}}])&&vn(n.prototype,a),i&&vn(n,i),t}();function kn(e){return(kn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function En(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Tn(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function jn(e,t){return!t||"object"!==kn(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function _n(e){return(_n=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function An(e,t){return(An=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var In=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),jn(this,_n(t).apply(this,arguments))}var n,a,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&An(e,t)}(t,r["Component"]),n=t,(a=[{key:"render",value:function(){var e=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(t){En(e,t,n[t])})}return e}({},this.props),t=e.questions,n=e.onItemClick;return o.a.createElement("div",{className:"LeftBar"},o.a.createElement("div",{className:"title"},"QUESTIONS:"),o.a.createElement("div",{className:"items"},t.map(function(e){return o.a.createElement(On,{question:e,onItemClick:n,key:e.id})})))}}])&&Tn(n.prototype,a),i&&Tn(n,i),t}();function Pn(e){return(Pn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Dn(){return(Dn=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function xn(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function Nn(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Cn(e,t){return!t||"object"!==Pn(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Rn(e){return(Rn=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Un(e,t){return(Un=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var qn=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),Cn(this,Rn(t).apply(this,arguments))}var n,a,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Un(e,t)}(t,r["Component"]),n=t,(a=[{key:"render",value:function(){return o.a.createElement(at,Dn({},this.props,{classes:["DarkButton"].concat(xn(this.props.classes))}))}}])&&Nn(n.prototype,a),i&&Nn(n,i),t}();qn.defaultProps={title:"",disabled:!1,classes:[],onClick:function(){}};var Qn=qn,Mn=n(3),Ln=n.n(Mn),Bn=n(356);n(567);function Fn(e){return(Fn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Hn(){return(Hn=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function Kn(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(t){Jn(e,t,n[t])})}return e}function Jn(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function zn(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Wn(e,t){return!t||"object"!==Fn(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Yn(e){return(Yn=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Vn(e,t){return(Vn=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Gn=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),Wn(this,Yn(t).apply(this,arguments))}var n,a,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Vn(e,t)}(t,r["Component"]),n=t,(a=[{key:"render",value:function(){var e=Kn({},this.props).question;return o.a.createElement("div",{className:"QuestionForm"},o.a.createElement("div",{className:"heading"},e.heading),o.a.createElement("div",{className:"description"},e.description),this.renderActions(e),this.renderInputsForm(e))}},{key:"renderActions",value:function(e){var t=Kn({},this.props).handleActionClick;if("action"===e.type){var n=I.a.get(e,"actions",null);if(!n)return null;var r=null,a=n.find(function(e){return e.isChose});return a&&a.message&&(r=o.a.createElement("div",{className:"message"},o.a.createElement("b",null,"Message:"),o.a.createElement("div",{dangerouslySetInnerHTML:{__html:a.message}}))),o.a.createElement("div",null,o.a.createElement("div",{className:"actions"},n.map(function(e,n){switch(n){case 0:return o.a.createElement(Qn,{title:e.label,key:e.id,classes:["mr-3"],onClick:function(){t(e)}});default:return o.a.createElement(mt,{title:e.label,key:e.id,classes:["mr-3"],onClick:function(){t(e)}})}})),r)}}},{key:"renderInputsForm",value:function(e){var t=Kn({},this.props).handleFormSubmit;if("input"===e.type){var n=I.a.get(e,"inputs",null);if(!n)return null;var r={};return n.forEach(function(e){r[e.id]=e.data||""}),o.a.createElement(pn.c,{initialValues:r,validate:function(e){var t={};return n.forEach(function(n){var r=Kn({},n),o=r.id,a=r.type,i=r.required,u=r.label,s=r.minLength,c=I.a.get(e,o,null);!i||c?s>0&&c&&c.length<s?t[o]="- Please enter a value with at least ".concat(s," characters for ").concat(u):"email"!==a||/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,}$/i.test(c)?"date"===a&&(Ln()(c,"YYYY-MM-DD").isValid()||(t[o]="- Invalid date")):t[o]="- Invalid email address":t[o]="- Please enter a value for ".concat(u)}),t},onSubmit:function(e,n){t(n,e)}},function(e){e.isSubmitting;var t=e.errors,r=e.touched,a=e.setFieldValue,i=[];return I.a.keys(t).filter(function(e){return Boolean(r[e])}).forEach(function(e){i[e]=t[e]}),o.a.createElement(pn.b,null,o.a.createElement("table",null,o.a.createElement("tbody",null,n.map(function(e){var t=Kn({},e),n=t.id,r=t.type,u=t.label,s=t.placeholder,c=Boolean(I.a.get(i,n,null)),l=[];return c&&l.push("error"),["text","email","url"].includes(r)?o.a.createElement("tr",{key:n},o.a.createElement("td",{className:"label"},o.a.createElement("label",null,u)),o.a.createElement("td",null,o.a.createElement(pn.a,{type:r,name:n,className:l.join(" "),placeholder:s}),c&&o.a.createElement("i",{className:"fas fa-exclamation-circle text-danger ml-1"}))):"date"===r?o.a.createElement("tr",{key:n},o.a.createElement("td",{className:"label"},o.a.createElement("label",null,u)),o.a.createElement("td",null,o.a.createElement(pn.a,{name:n,render:function(e){var t=null,r=e.field.value||null;return r&&r.trim().length>0&&(t=Ln()(r).toDate()),o.a.createElement(Bn.a,{dateFormat:"dd-MM-yyyy",className:l.join(" "),selected:t,onChange:function(e){if(e){var t=Ln()(e).format("YYYY-MM-DD");a(n,t)}else a(n,null)},placeholderText:s,dropdownMode:"scroll",withPortal:!0})}}),c&&o.a.createElement("i",{className:"fas fa-exclamation-circle text-danger ml-1"}))):"textarea"===r?o.a.createElement("tr",{key:n},o.a.createElement("td",{className:"label"},o.a.createElement("label",null,u)),o.a.createElement("td",null,o.a.createElement(pn.a,{name:n},function(e){var t=e.field;return o.a.createElement("textarea",Hn({},t,{className:l.join(" "),placeholder:s}))}),c&&o.a.createElement("i",{className:"fas fa-exclamation-circle text-danger ml-1"}))):null}),o.a.createElement("tr",null,o.a.createElement("td",null),o.a.createElement("td",null,o.a.createElement(Qn,{title:"Continue"}))),o.a.createElement("tr",null,o.a.createElement("td",null),o.a.createElement("td",{className:"text-danger"},i&&I.a.keys(i).length>0&&o.a.createElement("div",null,"Whoops!",I.a.keys(i).map(function(e){return o.a.createElement("div",{className:"text-error",key:e},i[e])})))))))})}}}])&&zn(n.prototype,a),i&&zn(n,i),t}();function Xn(e){return(Xn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Zn(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(t){$n(e,t,n[t])})}return e}function $n(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function er(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function tr(e,t){return!t||"object"!==Xn(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function nr(e){return(nr=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function rr(e,t){return(rr=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var or=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),tr(this,nr(t).apply(this,arguments))}var n,a,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&rr(e,t)}(t,r["Component"]),n=t,(a=[{key:"handleFormSubmit",value:function(e,t){var n=Zn({},this.props),r=n.questions,o=n.saveAnsweredQuestion,a=r.find(function(e){return!0===e.isCurrent});if(a){var i=Zn({},a);I.a.forIn(t,function(e,t){var n=i.inputs.findIndex(function(e){return e.id===t});n>=0&&I.a.set(i,"inputs.".concat(n,".data"),e)}),i.hasAnswer=!0,i.isApplicable=!0,o(i)}}},{key:"handleActionClick",value:function(e){var t=Zn({},this.props),n=t.questions,r=t.saveAnsweredQuestion,o=n.find(function(e){return!0===e.isCurrent});if(o){var a=Zn({},o);a.actions=a.actions.map(function(t){return t.isChose=t.id===e.id,t}),a.hasAnswer=!0,a.isApplicable=!0,r(a)}}},{key:"render",value:function(){var e=Zn({},this.props),t=e.questions,n=e.onLeftBarItemClick,r=t.find(function(e){return!0===e.isCurrent});return o.a.createElement("div",{className:"Questionnaire mx-1"},o.a.createElement("div",{className:"major"},o.a.createElement(In,{questions:t,onItemClick:n}),r&&o.a.createElement(Gn,{key:r.id,question:r,handleFormSubmit:this.handleFormSubmit.bind(this),handleActionClick:this.handleActionClick.bind(this)})))}}])&&er(n.prototype,a),i&&er(n,i),t}();function ar(e){return(ar="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ir(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(t){ur(e,t,n[t])})}return e}function ur(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function sr(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function cr(e,t){return!t||"object"!==ar(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function lr(e){return(lr=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function fr(e,t){return(fr=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var pr=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),cr(this,lr(t).apply(this,arguments))}var n,a,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&fr(e,t)}(t,r["Component"]),n=t,(a=[{key:"componentDidMount",value:function(){var e=ir({},this.props),t=e.submissionHash;(0,e.dispatchLoadSubmissionAction)(t)}},{key:"render",value:function(){var e=ir({},this.props),t=e.dispatchSaveAnsweredQuestionAction,n=e.dispatchMoveToPreviousQuestionAction,r=ir({},this.props.submissionState),a=r.title,i=r.siteTitle,u=r.user,s=r.submission;return u&&s?"in_progress"!==s.status?o.a.createElement("div",{className:"QuestionnaireContainer"},o.a.createElement(tn,{title:a,subtitle:i}),o.a.createElement("div",{className:"Questionnaire"},o.a.createElement("h1",null,"The questionnaire is not in progress...")),o.a.createElement(Le,null)):o.a.createElement("div",{className:"QuestionnaireContainer"},o.a.createElement(tn,{title:a,subtitle:i}),o.a.createElement(or,{questions:s.questions,saveAnsweredQuestion:function(e){t(e)},onLeftBarItemClick:function(e){n(e)}}),o.a.createElement(Le,null)):null}}])&&sr(n.prototype,a),i&&sr(n,i),t}(),br=Object(c.b)(function(e){return{submissionState:e.questionnaireState.submissionState}},function(e,t){return{dispatchLoadSubmissionAction:function(t){e(Kt(t))},dispatchSaveAnsweredQuestionAction:function(t){var n,r;e((n=t,r=Ht(regeneratorRuntime.mark(function e(t,r){var o,a,i,u,s;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t({type:l.QUESTIONNAIRE.PUT_DATA_IN_QUESTIONNAIRE_ANSWER,payload:n}),o=r(),a=I.a.get(o,"questionnaireState.submissionState.submission.submissionID",null)){e.next=5;break}throw new Error("Something is wrong, please reload the page");case 5:return e.next=7,ve.getCSRFToken();case 7:return i=e.sent,u=n.id,s=xt.transformFromFullQuestionToData(n),e.prev=10,e.next=13,At.updateSubmissionData({submissionID:a,questionID:u,csrfToken:i,answerData:s});case 13:t(Jt(n)),e.next=19;break;case 16:e.prev=16,e.t0=e.catch(10),alert(e.t0.message);case 19:case"end":return e.stop()}},e,this,[[10,16]])})),function(e,t){return r.apply(this,arguments)}))},dispatchMoveToPreviousQuestionAction:function(t){e(function(e){return t=Ht(regeneratorRuntime.mark(function t(n,r){var o,a,i,u;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(o=r(),a=o.questionnaireState.submissionState.submission){t.next=4;break}return t.abrupt("return");case 4:if(!((i=a.questions.findIndex(function(e){return e.isCurrent}))<0)){t.next=7;break}throw new Error("Wrong state, please reload the questionnaire");case 7:if(e.isApplicable&&e.hasAnswer){t.next=9;break}return t.abrupt("return");case 9:if(!((u=a.questions.findIndex(function(t){return t.id===e.id}))<0)){t.next=12;break}return t.abrupt("return");case 12:return n({type:l.QUESTIONNAIRE.MOVE_TO_ANOTHER_QUESTIONNAIRE_QUESTION,targetIndex:u}),t.next=15,zt(r(),[i,u]);case 15:case"end":return t.stop()}},t,this)})),function(e,n){return t.apply(this,arguments)};var t}(t))}}})(pr),mr=n(70),yr=n.n(mr),dr=n(101),hr=n.n(dr);function vr(e){return(vr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Sr(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function gr(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function wr(e,t){return!t||"object"!==vr(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Or(e){return(Or=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function kr(e,t){return(kr=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Er=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),wr(this,Or(t).apply(this,arguments))}var n,a,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&kr(e,t)}(t,r["Component"]),n=t,(a=[{key:"render",value:function(){var e=this,t=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(t){Sr(e,t,n[t])})}return e}({},this.props).questions;return o.a.createElement("div",{className:"AnswersPreview"},o.a.createElement("div",{className:"questions"},t.map(function(t,n,r){var a=e.renderData(t);return o.a.createElement("div",{className:"row",key:t.id},o.a.createElement("div",{className:"col"},o.a.createElement("b",null,n+1,". ",t.heading)),o.a.createElement("div",{className:"vertical-divider"}),o.a.createElement("div",{className:"col"},a))})))}},{key:"renderData",value:function(e){if(!e.isApplicable){return o.a.createElement("div",null,"(Not applicable)")}if(!e.hasAnswer){return o.a.createElement("div",null,"(Has no answer)")}if("input"===e.type&&e.inputs&&Array.isArray(e.inputs)&&e.inputs.length>0){var t=function(e){var t=e.data||"";return"date"===e.type&&(t=Ln()(t).format("DD-MM-YYYY")),"textarea"===e.type&&(t="\n"+t),t};return e.inputs.length>1?o.a.createElement("div",null,e.inputs.map(function(e){var n=t(e);return o.a.createElement("div",{key:e.id},o.a.createElement("b",null,e.label)," ",o.a.createElement("span",null,"-")," ",o.a.createElement("span",null,n))})):o.a.createElement("div",null,t(e.inputs[0]).trim())}if("action"===e.type&&e.actions&&Array.isArray(e.actions)){var n=I.a.head(e.actions.filter(function(e){return e.isChose}));return o.a.createElement("div",null,n&&o.a.createElement("div",null,n.label))}}}])&&gr(n.prototype,a),i&&gr(n,i),t}();function Tr(e){return(Tr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function jr(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function _r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Ar(e,t){return!t||"object"!==Tr(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Ir(e){return(Ir=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Pr(e,t){return(Pr=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Dr=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),Ar(this,Ir(t).apply(this,arguments))}var n,a,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Pr(e,t)}(t,r["Component"]),n=t,(a=[{key:"render",value:function(){var e=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(t){jr(e,t,n[t])})}return e}({},this.props),t=e.submission,n=e.handleSubmitButtonClick,r=e.handlePDFDownloadButtonClick,a=e.handleEditAnswerButtonClick;return t?"in_progress"!==t.status?o.a.createElement("div",{className:"Review"},o.a.createElement("h3",null,"The questionnaire is not in progress...")):o.a.createElement("div",{className:"Review"},o.a.createElement(Er,{questions:t.questions}),o.a.createElement("div",{className:"buttons"},o.a.createElement(mt,{title:"EDIT ANSWERS",iconImage:yr.a,classes:["button"],onClick:a}),o.a.createElement(mt,{title:"DOWNLOAD PDF",iconImage:hr.a,classes:["button"],onClick:r}),o.a.createElement(Qn,{title:"SUBMIT QUESTIONNAIRE",classes:["button"],disabled:xt.existsUnansweredQuestion(t.questions),onClick:n}))):null}}])&&_r(n.prototype,a),i&&_r(n,i),t}(),xr=n(151),Nr=n.n(xr),Cr=n(351),Rr=n.n(Cr);function Ur(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var qr=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,r;return t=e,r=[{key:"toString",value:function(e){return e?"".concat(e):""}}],(n=null)&&Ur(t.prototype,n),r&&Ur(t,r),e}(),Qr=n(352),Mr=n.n(Qr),Lr=n(353),Br=n.n(Lr);function Fr(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(t){Hr(e,t,n[t])})}return e}function Hr(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Kr(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Jr(e,t,n,r,o,a,i){try{var u=e[a](i),s=u.value}catch(e){return void n(e)}u.done?t(s):Promise.resolve(s).then(r,o)}function zr(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var a=e.apply(t,n);function i(e){Jr(a,r,o,i,u,"next",e)}function u(e){Jr(a,r,o,i,u,"throw",e)}i(void 0)})}}function Wr(e){return Yr.apply(this,arguments)}function Yr(){return(Yr=zr(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise(function(e){var n=new FileReader;n.addEventListener("load",function(t){e(t.target.result)}),n.readAsDataURL(t)}));case 1:case"end":return e.stop()}},e,this)}))).apply(this,arguments)}function Vr(e){return Gr.apply(this,arguments)}function Gr(){return(Gr=zr(regeneratorRuntime.mark(function e(t){var n,r,o;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(t);case 2:return n=e.sent,e.next=5,n.blob();case 5:return r=e.sent,e.next=8,Wr(r);case 8:return o=e.sent,e.abrupt("return",o);case 10:case"end":return e.stop()}},e,this)}))).apply(this,arguments)}var Xr=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,r;return t=e,n=null,r=[{key:"generatePDF",value:function(){var e=zr(regeneratorRuntime.mark(function e(t){var n,r,o,a,i,u,s,c,l,f,p,b,m;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=Fr({},t),r=n.questions,o=n.submitter,a=n.questionnaireTitle,i=n.siteTitle,s=[],c={questionnaireTitle:{bold:!0,fontSize:(u=12)+4,color:"#004071",alignment:"center"},siteTitle:{bold:!0,fontSize:u,color:"#004071",alignment:"center"},sectionHeading:{bold:!0,fontSize:u+2,color:"#004071"},questionHeading:{bold:!0}},l={fontSize:u},f={title:"".concat(a," - ").concat(o.name)},p=Rr.a.pdfMake.vfs,Nr.a.vfs=p,e.next=10,Vr(Mr.a);case 10:return b=e.sent,s.push({image:b,width:500,margin:[0,0,0,u]}),s.push({text:a,style:"questionnaireTitle",margin:[0,0,0,u/2]}),s.push({text:i,style:"siteTitle",margin:[0,0,0,2*u]}),s.push({text:"Submitted by:",style:"sectionHeading",margin:[0,0,0,u]}),s.push({text:"Name: ".concat(o.name),style:"questionHeading",margin:[0,0,0,u/2]}),s.push({text:"Email: ".concat(o.email),margin:[0,0,0,2*u]}),s.push({text:"Responses",style:"sectionHeading",margin:[0,0,0,u]}),r.forEach(function(e,t){if(s.push({text:"".concat(t+1,". ").concat(e.heading),style:"questionHeading",margin:[0,0,0,u/2]}),e.isApplicable)if(e.hasAnswer){if("input"===e.type&&e.inputs&&Array.isArray(e.inputs)&&e.inputs.length>0){var n=function(e){var t=e.data||"";return"date"===e.type&&(t=Ln()(t).format("DD-MM-YYYY")),"textarea"===e.type&&(t="\n"+t),t};return e.inputs.length>1?void e.inputs.forEach(function(e,t,r){var o=t===r.length-1;s.push({text:"".concat(e.label,": ").concat(qr.toString(n(e))),margin:[0,0,0,o?u:parseInt("".concat(u/3))]})}):void s.push({text:n(e.inputs[0]).trim(),margin:[0,0,0,u]})}if("action"===e.type&&e.actions&&Array.isArray(e.actions)){var r=I.a.head(e.actions.filter(function(e){return e.isChose}));s.push({text:r.label,margin:[0,0,0,u]})}}else s.push({text:"(Has no answer)",margin:[0,0,0,u]});else s.push({text:"(Not applicable)",margin:[0,0,0,u]})}),e.next=21,Vr(Br.a);case 21:return m=e.sent,s.push({image:m,width:500,margin:[0,0,0,u]}),e.prev=23,e.next=26,Nr.a.createPdf({info:f,content:s,styles:c,defaultStyle:l}).download(f.title);case 26:e.next=31;break;case 28:e.prev=28,e.t0=e.catch(23),alert("Can't download PDF, please disable AdBlock!");case 31:case"end":return e.stop()}},e,this,[[23,28]])}));return function(t){return e.apply(this,arguments)}}()},{key:"blobToDataURL",value:function(){var e=zr(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise(function(e){var n=new FileReader;n.onload=function(t){e(t.target.result)},n.readAsDataURL(t)}));case 1:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()}],n&&Kr(t.prototype,n),r&&Kr(t,r),e}();function Zr(e){return(Zr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function $r(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(t){eo(e,t,n[t])})}return e}function eo(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function to(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function no(e,t){return!t||"object"!==Zr(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function ro(e){return(ro=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function oo(e,t){return(oo=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var ao=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),no(this,ro(t).apply(this,arguments))}var n,a,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&oo(e,t)}(t,r["Component"]),n=t,(a=[{key:"componentDidMount",value:function(){var e=$r({},this.props),t=e.submissionHash;(0,e.dispatchLoadSubmissionAction)(t)}},{key:"render",value:function(){var e=$r({},this.props.submissionState),t=e.title,n=e.siteTitle,r=e.user,a=e.submission;return r?o.a.createElement("div",{className:"ReviewContainer"},o.a.createElement(tn,{title:t,subtitle:"Review Responses"}),o.a.createElement(Dr,{siteTitle:n,submission:a,handleSubmitButtonClick:this.handleSubmitButtonClick.bind(this),handlePDFDownloadButtonClick:this.handlePDFDownloadButtonClick.bind(this),handleEditAnswerButtonClick:this.handleEditAnswerButtonClick.bind(this)}),o.a.createElement(Le,null),";"):null}},{key:"handleSubmitButtonClick",value:function(){this.props.dispatchSubmitQuestionnaire()}},{key:"handlePDFDownloadButtonClick",value:function(){var e=$r({},this.props.submissionState),t=e.submission,n=e.siteTitle;t&&Xr.generatePDF({questions:t.questions,submitter:t.submitter,questionnaireTitle:t.questionnaireTitle,siteTitle:n})}},{key:"handleEditAnswerButtonClick",value:function(){var e=I.a.get(this.props.submissionState,"submission.submissionUUID","");e&&D.redirectToQuestionnaireEditing(e)}}])&&to(n.prototype,a),i&&to(n,i),t}(),io=Object(c.b)(function(e){return{submissionState:e.questionnaireState.submissionState}},function(e,t){return{dispatchLoadSubmissionAction:function(t){e(Kt(t))},dispatchSubmitQuestionnaire:function(){var t;e((t=Ht(regeneratorRuntime.mark(function e(t,n){var r,o,a,i,u,s;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,r=n(),o=r.questionnaireState.submissionState,a=o.submission){e.next=6;break}return e.abrupt("return");case 6:if(!xt.existsUnansweredQuestion(a.questions)){e.next=9;break}return alert("There are questions not answered properly, please check your answers"),e.abrupt("return");case 9:return e.next=11,ve.getCSRFToken();case 11:return i=e.sent,e.next=14,At.submitQuestionnaire({submissionID:a.submissionID,csrfToken:i});case 14:return u=e.sent,s=u.uuid,e.next=18,Lt.createTaskSubmissionsAccordingToQuestions({questions:a.questions,questionnaireSubmissionID:a.submissionID,csrfToken:i});case 18:D.redirectToQuestionnaireSummary(s),e.next=24;break;case 21:e.prev=21,e.t0=e.catch(0),alert(e.t0);case 24:case"end":return e.stop()}},e,this,[[0,21]])})),function(e,n){return t.apply(this,arguments)}))}}})(ao);function uo(e){return(uo="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function so(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(t){co(e,t,n[t])})}return e}function co(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function lo(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function fo(e,t){return!t||"object"!==uo(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function po(e){return(po=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function bo(e,t){return(bo=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var mo=function(e){return e.split("_").map(function(e){return e.charAt(0).toUpperCase()+e.slice(1)}).join(" ")},yo=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),fo(this,po(t).apply(this,arguments))}var n,a,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&bo(e,t)}(t,r["Component"]),n=t,(a=[{key:"render",value:function(){var e=so({},this.props),t=e.submission,n=e.viewAs;return t?"in_progress"===t.status&&"submitter"===n?o.a.createElement("div",{className:"Summary"},o.a.createElement("h3",null,"Submission has not been complete...")):o.a.createElement("div",{className:"Summary"},this.renderSubmitterInfo(t),this.renderTasks(t),this.renderApprovals(t),this.renderButtons(t)):null}},{key:"renderSubmitterInfo",value:function(e){var t=e.submitter;return o.a.createElement("div",{className:"request-info"},o.a.createElement("h3",null,"Request Information"),o.a.createElement("div",null,o.a.createElement("b",null,"Submitted by:")," ",t.name),o.a.createElement("div",null,o.a.createElement("b",null,"Email:")," ",t.email),o.a.createElement("div",null,o.a.createElement("b",null,"Status:")," ",mo(e.status)))}},{key:"renderTasks",value:function(e){var t=this,n=e.taskSubmissions;return 0===n.length?null:o.a.createElement("div",{className:"tasks"},o.a.createElement("h3",null,"Tasks"),n.map(function(e){var n=e.uuid,r=e.taskName,a=e.status,i=so({},t.props).token;return o.a.createElement("div",{key:n},o.a.createElement("button",{className:"btn btn-link",onClick:function(e){D.redirectToTaskSubmission(n,i)}},r," (",mo(a),")"))}))}},{key:"renderButtons",value:function(e){var t=so({},this.props),n=t.viewAs,r=t.handleSubmitButtonClick,a=t.handlePDFDownloadButtonClick,i=t.handleApproveButtonClick,u=t.handleDenyButtonClick,s=t.handleEditButtonClick,c=o.a.createElement(mt,{title:"DOWNLOAD PDF OF ANSWERS",iconImage:hr.a,classes:["button"],onClick:a});if("submitter"===n){var l=o.a.createElement(mt,{title:"EDIT ANSWERS",iconImage:yr.a,classes:["button"],onClick:s}),f=o.a.createElement(Qn,{title:"SEND FOR APPROVAL",classes:["button"],disabled:xt.existsIncompleteTaskSubmission(e.taskSubmissions),onClick:r});return"submitted"===e.status?o.a.createElement("div",{className:"buttons"},o.a.createElement("div",null,l,c,f),o.a.createElement("div",null)):"waiting_for_security_architect_approval"===e.status?o.a.createElement("div",{className:"buttons"},o.a.createElement("div",null,l,c),o.a.createElement("div",null)):o.a.createElement("div",{className:"buttons"},o.a.createElement("div",null,c),o.a.createElement("div",null))}if("approver"===n){var p=o.a.createElement(Qn,{title:"APPROVE",classes:["button"],onClick:i}),b=o.a.createElement(mt,{title:"DENY",classes:["button"],onClick:u});return"submitted"===e.status?o.a.createElement("div",{className:"buttons"},o.a.createElement("div",null,c),o.a.createElement("div",null)):o.a.createElement("div",{className:"buttons"},o.a.createElement("div",null,c),o.a.createElement("div",null,p,b))}return o.a.createElement("div",{className:"buttons"},o.a.createElement("div",null,c),o.a.createElement("div",null))}},{key:"renderApprovals",value:function(e){if("in_progress"===e.status||"submitted"===e.status)return null;var t=e.approvalStatus;return o.a.createElement("div",{className:"approvals"},o.a.createElement("h3",null,"Approvals"),o.a.createElement("div",null,o.a.createElement("b",null,"Security Architect")," - ",mo(t.securityArchitect)),o.a.createElement("div",null,o.a.createElement("b",null,"Chief Information Security Officer")," - ",mo(t.chiefInformationSecurityOfficer)),o.a.createElement("div",null,o.a.createElement("b",null,"Business Owner")," - ",mo(t.businessOwner)))}}])&&lo(n.prototype,a),i&&lo(n,i),t}();yo.defaultProps={submission:null,handlePDFDownloadButtonClick:function(){},handleSubmitButtonClick:function(){},handleApproveButtonClick:function(){},handleDenyButtonClick:function(){},handleEditButtonClick:function(){},viewAs:"others",token:""};var ho=yo,vo=n(102),So=n.n(vo);function go(e){return(go="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function wo(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(t){Oo(e,t,n[t])})}return e}function Oo(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ko(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Eo(e,t){return!t||"object"!==go(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function To(e){return(To=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function jo(e,t){return(jo=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var _o=function(e){function t(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(e=Eo(this,To(t).call(this))).state={showModal:!1},e}var n,a,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&jo(e,t)}(t,r["Component"]),n=t,(a=[{key:"componentDidMount",value:function(){var e=wo({},this.props),t=e.submissionHash;(0,e.dispatchLoadSubmissionAction)(t)}},{key:"render",value:function(){var e=wo({},this.props.submissionState),t=e.title,n=e.user,r=e.submission,a=e.isCurrentUserApprover;if(!n||!r)return null;var i="others";do{if(n.id===r.submitter.id){i="submitter";break}if(a){i="approver";break}}while(0);return o.a.createElement("div",{className:"SummaryContainer"},o.a.createElement(tn,{title:t,subtitle:"Summary"}),o.a.createElement(ho,{submission:r,handlePDFDownloadButtonClick:this.handlePDFDownloadButtonClick.bind(this),handleSubmitButtonClick:this.handleSubmitButtonClick.bind(this),handleApproveButtonClick:this.handleApproveButtonClick.bind(this),handleDenyButtonClick:this.handleDenyButtonClick.bind(this),handleEditButtonClick:this.handleOpenModal.bind(this),viewAs:i}),o.a.createElement(Le,null),o.a.createElement(So.a,{isOpen:this.state.showModal,parentSelector:function(){return document.querySelector(".SummaryContainer")}},o.a.createElement("h3",null,"Are you sure you want to edit this submission?"),o.a.createElement("div",{className:"content"},"This will cancel your current submission and require it to be resubmitted for approval."),o.a.createElement("div",null,o.a.createElement(Qn,{title:"Yes",onClick:this.handleEditButtonClick.bind(this)}),o.a.createElement(mt,{title:"No",onClick:this.handleCloseModal.bind(this)}))))}},{key:"handlePDFDownloadButtonClick",value:function(){var e=wo({},this.props.submissionState),t=e.submission,n=e.siteTitle;t&&Xr.generatePDF({questions:t.questions,submitter:t.submitter,questionnaireTitle:t.questionnaireTitle,siteTitle:n})}},{key:"handleSubmitButtonClick",value:function(){var e=wo({},this.props.submissionState),t=e.user,n=e.submission;t&&n&&this.props.dispatchSubmitForApprovalAction(n.submissionID)}},{key:"handleApproveButtonClick",value:function(){var e=wo({},this.props.submissionState),t=e.user,n=e.submission;t&&n&&this.props.dispatchApproveSubmissionAction(n.submissionID)}},{key:"handleDenyButtonClick",value:function(){var e=wo({},this.props.submissionState),t=e.user,n=e.submission;t&&n&&this.props.dispatchDenySubmissionAction(n.submissionID)}},{key:"handleEditButtonClick",value:function(){var e=wo({},this.props.submissionState),t=e.user,n=e.submission;t&&n&&(this.handleCloseModal(),this.props.dispatchEditSubmissionAction(n.submissionID))}},{key:"handleOpenModal",value:function(){this.setState({showModal:!0})}},{key:"handleCloseModal",value:function(){this.setState({showModal:!1})}}])&&ko(n.prototype,a),i&&ko(n,i),t}(),Ao=Object(c.b)(function(e){return{submissionState:e.questionnaireState.submissionState}},function(e,t){return{dispatchLoadSubmissionAction:function(t){e(Kt(t))},dispatchSubmitForApprovalAction:function(t){e(function(e){return t=Ht(regeneratorRuntime.mark(function t(n,r){var o,a,i;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,ve.getCSRFToken();case 3:return o=t.sent,t.next=6,At.submitQuestionnaireForApproval({submissionID:e,csrfToken:o});case 6:a=t.sent,i=a.uuid,n(Kt(i)),t.next=14;break;case 11:t.prev=11,t.t0=t.catch(0),alert(t.t0);case 14:case"end":return t.stop()}},t,this,[[0,11]])})),function(e,n){return t.apply(this,arguments)};var t}(t))},dispatchApproveSubmissionAction:function(t){e(function(e){return t=Ht(regeneratorRuntime.mark(function t(n,r){var o,a,i;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,ve.getCSRFToken();case 3:return o=t.sent,t.next=6,At.approveQuestionnaireSubmission({submissionID:e,csrfToken:o});case 6:a=t.sent,i=a.uuid,n(Kt(i)),t.next=14;break;case 11:t.prev=11,t.t0=t.catch(0),alert(t.t0);case 14:case"end":return t.stop()}},t,this,[[0,11]])})),function(e,n){return t.apply(this,arguments)};var t}(t))},dispatchDenySubmissionAction:function(t){e(function(e){return t=Ht(regeneratorRuntime.mark(function t(n,r){var o,a,i;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,ve.getCSRFToken();case 3:return o=t.sent,t.next=6,At.denyQuestionnaireSubmission({submissionID:e,csrfToken:o});case 6:a=t.sent,i=a.uuid,n(Kt(i)),t.next=14;break;case 11:t.prev=11,t.t0=t.catch(0),alert(t.t0);case 14:case"end":return t.stop()}},t,this,[[0,11]])})),function(e,n){return t.apply(this,arguments)};var t}(t))},dispatchEditSubmissionAction:function(t){e(function(e){return t=Ht(regeneratorRuntime.mark(function t(n,r){var o,a,i;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,ve.getCSRFToken();case 3:return o=t.sent,t.next=6,At.editQuestionnaireSubmission({submissionID:e,csrfToken:o});case 6:a=t.sent,i=a.uuid,D.redirectToQuestionnaireEditing(i),t.next=14;break;case 11:t.prev=11,t.t0=t.catch(0),alert(t.t0);case 14:case"end":return t.stop()}},t,this,[[0,11]])})),function(e,n){return t.apply(this,arguments)};var t}(t))}}})(_o);function Io(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function Po(e,t,n,r,o,a,i){try{var u=e[a](i),s=u.value}catch(e){return void n(e)}u.done?t(s):Promise.resolve(s).then(r,o)}function Do(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var a=e.apply(t,n);function i(e){Po(a,r,o,i,u,"next",e)}function u(e){Po(a,r,o,i,u,"throw",e)}i(void 0)})}}function xo(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(t){No(e,t,n[t])})}return e}function No(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Co(e){var t=xo({},e),n=t.uuid,r=t.secureToken;return function(){var e=Do(regeneratorRuntime.mark(function e(t){var o,a;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Lt.fetchTaskSubmission({uuid:n,secureToken:r});case 3:return o=e.sent,a={type:l.TASK.LOAD_TASK_SUBMISSION,payload:o},e.next=7,t(a);case 7:e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),Y.displayError(e.t0);case 12:case"end":return e.stop()}},e,this,[[0,9]])}));return function(t){return e.apply(this,arguments)}}()}function Ro(e){var t=xo({},e),n=t.answeredQuestion,r=t.secureToken,o=t.bypassNetwork;return function(){var e=Do(regeneratorRuntime.mark(function e(t,a){var i,u,s,c,f,p,b,m,y,d,h,v,S;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if((i=function(){return a().taskSubmissionState.taskSubmission})()){e.next=3;break}return e.abrupt("return");case 3:return u={type:l.TASK.PUT_DATA_IN_TASK_SUBMISSION,payload:n},e.next=6,t(u);case 6:if(o){e.next=24;break}return e.prev=7,e.t0=Lt,e.t1=i().uuid,e.t2=[n.id],e.t3=[xt.transformFromFullQuestionToData(n)],e.next=14,ve.getCSRFToken();case 14:return e.t4=e.sent,e.t5=r,e.t6={uuid:e.t1,questionIDList:e.t2,answerDataList:e.t3,csrfToken:e.t4,secureToken:e.t5},e.next=19,e.t0.batchUpdateTaskSubmissionData.call(e.t0,e.t6);case 19:e.next=24;break;case 21:e.prev=21,e.t7=e.catch(7),Y.displayError(e.t7);case 24:if(s=xt.getDataUpdateIntent({answeredQuestion:n,questions:i().questions}),c=s.currentIndex,f=s.nonApplicableIndexes,p=s.targetIndex,b=s.complete,s.terminate,m=s.result,!(f.length>0)){e.next=29;break}return y={type:l.TASK.MARK_TASK_QUESTION_NOT_APPLICABLE,payload:f},e.next=29,t(y);case 29:if(!(p>c)){e.next=33;break}return d={type:l.TASK.MOVE_TO_ANOTHER_TASK_QUESTION,payload:{currentIndex:c,targetIndex:p}},e.next=33,t(d);case 33:if(o){e.next=42;break}return e.prev=34,e.next=37,Qo(i(),I.a.uniq([c].concat(Io(f),[p])),r);case 37:e.next=42;break;case 39:e.prev=39,e.t8=e.catch(34),Y.displayError(e.t8);case 42:if(!b){e.next=66;break}if(o){e.next=64;break}return e.prev=44,e.next=47,ve.getCSRFToken();case 47:if(h=e.sent,r){e.next=51;break}return e.next=51,Lt.createTaskSubmissionsAccordingToQuestions({questions:i().questions,questionnaireSubmissionID:i().questionnaireSubmissionID,csrfToken:h});case 51:return e.next=53,Lt.completeTaskSubmission({uuid:i().uuid,result:m,secureToken:r,csrfToken:h});case 53:return v=e.sent,S=v.uuid,e.next=57,t(Co({uuid:S,secureToken:r}));case 57:e.next=62;break;case 59:e.prev=59,e.t9=e.catch(44),Y.displayError(e.t9);case 62:e.next=66;break;case 64:return e.next=66,t({type:l.TASK.COMPLETE_TASK_SUBMISSION,payload:m});case 66:case"end":return e.stop()}},e,this,[[7,21],[34,39],[44,59]])}));return function(t,n){return e.apply(this,arguments)}}()}function Uo(e){var t=xo({},e),n=t.targetQuestion,r=t.secureToken,o=t.bypassNetwork;return function(){var e=Do(regeneratorRuntime.mark(function e(t,a){var i,u,s,c,f;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(i=a().taskSubmissionState.taskSubmission){e.next=3;break}return e.abrupt("return");case 3:if(u=i.questions,!((s=u.findIndex(function(e){return e.isCurrent}))<0)){e.next=7;break}throw new Error("Wrong state, please reload the task");case 7:if(n.isApplicable&&n.hasAnswer){e.next=9;break}return e.abrupt("return");case 9:if(!((c=u.findIndex(function(e){return e.id===n.id}))<0)){e.next=12;break}return e.abrupt("return");case 12:return f={type:l.TASK.MOVE_TO_ANOTHER_TASK_QUESTION,payload:{currentIndex:s,targetIndex:c}},e.next=15,t(f);case 15:if(o){e.next=18;break}return e.next=18,Qo(i,I.a.uniq([s,c]),r);case 18:case"end":return e.stop()}},e,this)}));return function(t,n){return e.apply(this,arguments)}}()}function qo(){var e=xo({},arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}),t=e.secureToken,n=e.bypassNetwork;return function(){var e=Do(regeneratorRuntime.mark(function e(r,o){var a,i,u;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(a=o().taskSubmissionState.taskSubmission){e.next=3;break}return e.abrupt("return");case 3:if(n){e.next=25;break}return e.prev=4,e.t0=Lt,e.t1=a.uuid,e.next=9,ve.getCSRFToken();case 9:return e.t2=e.sent,e.t3=t,e.t4={uuid:e.t1,csrfToken:e.t2,secureToken:e.t3},e.next=14,e.t0.editTaskSubmission.call(e.t0,e.t4);case 14:return i=e.sent,u=i.uuid,e.next=18,r(Co({uuid:u,secureToken:t}));case 18:e.next=23;break;case 20:e.prev=20,e.t5=e.catch(4),Y.displayError(e.t5);case 23:e.next=26;break;case 25:r({type:l.TASK.EDIT_TASK_SUBMISSION});case 26:case"end":return e.stop()}},e,this,[[4,20]])}));return function(t,n){return e.apply(this,arguments)}}()}function Qo(e,t,n){return Mo.apply(this,arguments)}function Mo(){return(Mo=Do(regeneratorRuntime.mark(function e(t,n,r){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.t0=Lt,e.t1=t.uuid,e.t2=n.map(function(e){return t.questions[e].id}),e.t3=n.map(function(e){return xt.transformFromFullQuestionToData(t.questions[e])}),e.next=7,ve.getCSRFToken();case 7:return e.t4=e.sent,e.t5=r,e.t6={uuid:e.t1,questionIDList:e.t2,answerDataList:e.t3,csrfToken:e.t4,secureToken:e.t5},e.next=12,e.t0.batchUpdateTaskSubmissionData.call(e.t0,e.t6);case 12:e.next=17;break;case 14:e.prev=14,e.t7=e.catch(0),Y.displayError(e.t7.message);case 17:case"end":return e.stop()}},e,this,[[0,14]])}))).apply(this,arguments)}function Lo(e){return(Lo="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Bo(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Fo(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Ho(e,t){return!t||"object"!==Lo(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Ko(e){return(Ko=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Jo(e,t){return(Jo=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var zo=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),Ho(this,Ko(t).apply(this,arguments))}var n,a,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Jo(e,t)}(t,r["Component"]),n=t,(a=[{key:"render",value:function(){var e=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(t){Bo(e,t,n[t])})}return e}({},this.props),t=e.taskSubmission,n=e.saveAnsweredQuestion,r=e.moveToPreviousQuestion,a=e.editAnswers,i=e.showBackButton,u=e.showEditButton,s=e.canUpdateAnswers,c=o.a.createElement(Er,{questions:t.questions});s&&(c=o.a.createElement(or,{questions:t.questions,saveAnsweredQuestion:n,onLeftBarItemClick:r}));var l=i?o.a.createElement(Qn,{title:"BACK TO QUESTIONNAIRE SUMMARY",onClick:function(){D.redirectToQuestionnaireSummary(t.questionnaireSubmissionUUID)}}):null,f=u?o.a.createElement(mt,{title:"EDIT ANSWERS",onClick:a,iconImage:yr.a}):null,p=t.result&&"complete"===t.status?o.a.createElement("div",{className:"result"},o.a.createElement("h3",null,"Result:"),o.a.createElement("div",null,t.result)):null;return o.a.createElement("div",{className:"TaskSubmission"},p,c,o.a.createElement("div",{className:"buttons"},f,l))}}])&&Fo(n.prototype,a),i&&Fo(n,i),t}();function Wo(e,t,n,r,o,a,i){try{var u=e[a](i),s=u.value}catch(e){return void n(e)}u.done?t(s):Promise.resolve(s).then(r,o)}function Yo(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var Vo=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,r;return t=e,n=null,r=[{key:"fetchCurrentUser",value:function(){var e,t=(e=regeneratorRuntime.mark(function e(){var t,n,r;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return"\nquery {\n  readCurrentMember {\n    ID\n    Email\n    FirstName\n    Surname\n    IsSA\n    IsCISO\n  }\n}",e.next=3,U.request({query:"\nquery {\n  readCurrentMember {\n    ID\n    Email\n    FirstName\n    Surname\n    IsSA\n    IsCISO\n  }\n}"});case 3:if(t=e.sent,n=I.a.get(t,"data.readCurrentMember.0",null)){e.next=7;break}throw new Error("Authenticate error");case 7:if((r=Ot.parseUserFromJSON(n)).id){e.next=10;break}throw new Error("Authenticate error");case 10:return e.abrupt("return",r);case 11:case"end":return e.stop()}},e,this)}),function(){var t=this,n=arguments;return new Promise(function(r,o){var a=e.apply(t,n);function i(e){Wo(a,r,o,i,u,"next",e)}function u(e){Wo(a,r,o,i,u,"throw",e)}i(void 0)})});return function(){return t.apply(this,arguments)}}()}],n&&Yo(t.prototype,n),r&&Yo(t,r),e}();function Go(e,t,n,r,o,a,i){try{var u=e[a](i),s=u.value}catch(e){return void n(e)}u.done?t(s):Promise.resolve(s).then(r,o)}function Xo(){return function(){var e,t=(e=regeneratorRuntime.mark(function e(t){var n,r;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Vo.fetchCurrentUser();case 3:n=e.sent,r={type:l.USER.SET_CURRENT_USER,payload:n},t(r),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),Y.displayError(e.t0);case 11:case"end":return e.stop()}},e,this,[[0,8]])}),function(){var t=this,n=arguments;return new Promise(function(r,o){var a=e.apply(t,n);function i(e){Go(a,r,o,i,u,"next",e)}function u(e){Go(a,r,o,i,u,"throw",e)}i(void 0)})});return function(e){return t.apply(this,arguments)}}()}function Zo(e,t,n,r,o,a,i){try{var u=e[a](i),s=u.value}catch(e){return void n(e)}u.done?t(s):Promise.resolve(s).then(r,o)}function $o(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var ea=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,r;return t=e,n=null,r=[{key:"fetchSiteConfig",value:function(){var e,t=(e=regeneratorRuntime.mark(function e(){var t,n;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return"\nquery {\n  readSiteConfig {\n    Title\n  }\n}",e.next=3,U.request({query:"\nquery {\n  readSiteConfig {\n    Title\n  }\n}"});case 3:return t=e.sent,n=I.a.toString(I.a.get(t,"data.readSiteConfig.0.Title","")),e.abrupt("return",{siteTitle:n});case 6:case"end":return e.stop()}},e,this)}),function(){var t=this,n=arguments;return new Promise(function(r,o){var a=e.apply(t,n);function i(e){Zo(a,r,o,i,u,"next",e)}function u(e){Zo(a,r,o,i,u,"throw",e)}i(void 0)})});return function(){return t.apply(this,arguments)}}()}],n&&$o(t.prototype,n),r&&$o(t,r),e}();function ta(e,t,n,r,o,a,i){try{var u=e[a](i),s=u.value}catch(e){return void n(e)}u.done?t(s):Promise.resolve(s).then(r,o)}function na(){return function(){var e,t=(e=regeneratorRuntime.mark(function e(t){var n,r;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,ea.fetchSiteConfig();case 3:n=e.sent,r={type:l.SITE_CONFIG.SET_SITE_TITLE,payload:n.siteTitle},t(r),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),Y.displayError(e.t0);case 11:case"end":return e.stop()}},e,this,[[0,8]])}),function(){var t=this,n=arguments;return new Promise(function(r,o){var a=e.apply(t,n);function i(e){ta(a,r,o,i,u,"next",e)}function u(e){ta(a,r,o,i,u,"throw",e)}i(void 0)})});return function(e){return t.apply(this,arguments)}}()}function ra(e){return(ra="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function oa(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(t){aa(e,t,n[t])})}return e}function aa(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ia(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function ua(e,t){return!t||"object"!==ra(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function sa(e){return(sa=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ca(e,t){return(ca=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var la=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),ua(this,sa(t).apply(this,arguments))}var n,a,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ca(e,t)}(t,r["Component"]),n=t,(a=[{key:"componentDidMount",value:function(){var e=oa({},this.props),t=e.uuid;(0,e.dispatchLoadDataAction)(t)}},{key:"render",value:function(){var e=oa({},this.props),t=e.siteTitle,n=e.currentUser,r=e.taskSubmission,a=e.dispatchSaveAnsweredQuestionAction,i=e.dispatchMoveToPreviousQuestionAction,u=e.dispatchEditAnswersAction;if(!n||!r)return null;var s=parseInt(n.id)===parseInt(r.submitter.id),c="in_progress"===r.status&&(n.isSA||s),l="complete"===r.status&&(n.isSA||s&&!r.lockWhenComplete);return o.a.createElement("div",{className:"TaskSubmissionContainer"},o.a.createElement(tn,{title:r.taskName,subtitle:t}),o.a.createElement(zo,{taskSubmission:r,saveAnsweredQuestion:a,moveToPreviousQuestion:i,editAnswers:u,showEditButton:l,canUpdateAnswers:c,showBackButton:!!r.questionnaireSubmissionUUID}),o.a.createElement(Le,null))}}])&&ia(n.prototype,a),i&&ia(n,i),t}(),fa=Object(c.b)(function(e){return{taskSubmission:e.taskSubmissionState.taskSubmission,siteTitle:e.siteConfigState.siteTitle,currentUser:e.currentUserState.user}},function(e,t){return{dispatchLoadDataAction:function(t){e(Xo()),e(na()),e(Co({uuid:t}))},dispatchSaveAnsweredQuestionAction:function(t){e(Ro({answeredQuestion:t}))},dispatchMoveToPreviousQuestionAction:function(t){e(Uo({targetQuestion:t}))},dispatchEditAnswersAction:function(){e(qo())}}})(la);function pa(e){return(pa="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ba(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function ma(e,t){return!t||"object"!==pa(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function ya(e){return(ya=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function da(e,t){return(da=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function ha(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(t){va(e,t,n[t])})}return e}function va(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Sa=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),ma(this,ya(t).apply(this,arguments))}var n,a,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&da(e,t)}(t,r["Component"]),n=t,(a=[{key:"componentDidMount",value:function(){(0,ha({},this.props).dispatchLoadDataAction)()}},{key:"render",value:function(){var e=ha({},this.props),t=e.siteTitle,n=e.currentUser,r=e.taskSubmission,a=e.dispatchSaveAnsweredQuestionAction,i=e.dispatchMoveToPreviousQuestionAction,u=e.dispatchEditAnswersAction;if(!n||!r)return null;var s="in_progress"===r.status,c="complete"===r.status;return o.a.createElement("div",{className:"TaskSubmissionContainer"},o.a.createElement(tn,{title:r.taskName,subtitle:t}),o.a.createElement(zo,{taskSubmission:r,saveAnsweredQuestion:a,moveToPreviousQuestion:i,editAnswers:u,showEditButton:c,canUpdateAnswers:s,showBackButton:!1}),o.a.createElement(Le,null))}}])&&ba(n.prototype,a),i&&ba(n,i),t}(),ga=Object(c.b)(function(e){return{taskSubmission:e.taskSubmissionState.taskSubmission,siteTitle:e.siteConfigState.siteTitle,currentUser:e.currentUserState.user}},function(e,t){return{dispatchLoadDataAction:function(){var n=ha({},t).taskId;e(Xo()),e(na()),e(function(e){var t,n=xo({},e).taskId;return t=Do(regeneratorRuntime.mark(function e(t,r){var o,a,i;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Lt.fetchStandaloneTask({taskId:n});case 3:return o=e.sent,a={id:"",uuid:"",taskName:o.name,status:"in_progress",result:"",questions:o.questions,questionnaireSubmissionUUID:"",questionnaireSubmissionID:"",submitter:r().currentUserState,lockWhenComplete:!1},i={type:l.TASK.LOAD_TASK_SUBMISSION,payload:a},e.next=8,t(i);case 8:e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),Y.displayError(e.t0);case 13:case"end":return e.stop()}},e,this,[[0,10]])})),function(e,n){return t.apply(this,arguments)}}({taskId:n}))},dispatchSaveAnsweredQuestionAction:function(t){e(Ro({answeredQuestion:t,bypassNetwork:!0}))},dispatchMoveToPreviousQuestionAction:function(t){e(Uo({targetQuestion:t,bypassNetwork:!0}))},dispatchEditAnswersAction:function(){e(qo({bypassNetwork:!0}))}}})(Sa);function wa(e){return(wa="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Oa(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function ka(e,t){return!t||"object"!==wa(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Ea(e){return(Ea=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Ta(e,t){return(Ta=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var ja=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),ka(this,Ea(t).apply(this,arguments))}var n,a,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Ta(e,t)}(t,r["Component"]),n=t,(a=[{key:"render",value:function(){return o.a.createElement("div",null,o.a.createElement("main",null,o.a.createElement(u.a,null,o.a.createElement(s.a,{exact:!0,path:"/"},function(){return o.a.createElement(Ve,null)}),o.a.createElement(s.a,{path:"/questionnaire/start/:id"},function(e){var t=e.match;return o.a.createElement("div",{className:"gray-bg"},o.a.createElement(fn,{questionnaireID:t.params.id}))}),o.a.createElement(s.a,{path:"/questionnaire/submission/:hash"},function(e){var t=e.match;return o.a.createElement("div",{className:"gray-bg"},o.a.createElement(br,{submissionHash:t.params.hash}))}),o.a.createElement(s.a,{path:"/questionnaire/review/:hash"},function(e){var t=e.match;return o.a.createElement("div",{className:"gray-bg"},o.a.createElement(io,{submissionHash:t.params.hash}))}),o.a.createElement(s.a,{path:"/questionnaire/summary/:hash"},function(e){var t=e.match;return o.a.createElement("div",{className:"gray-bg"},o.a.createElement(Ao,{submissionHash:t.params.hash}))}),o.a.createElement(s.a,{path:"/task/submission/:uuid"},function(e){var t=e.match;return o.a.createElement("div",{className:"gray-bg"},o.a.createElement(fa,{uuid:t.params.uuid}))}),o.a.createElement(s.a,{path:"/tasks/standalone/:taskId"},function(e){var t=e.match;return o.a.createElement("div",{className:"gray-bg"},o.a.createElement(ga,{taskId:t.params.taskId}))}))))}}])&&Oa(n.prototype,a),i&&Oa(n,i),t}(),_a=n(634);function Aa(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(t){Ia(e,t,n[t])})}return e}function Ia(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Pa(e,t,n,r,o,a,i){try{var u=e[a](i),s=u.value}catch(e){return void n(e)}u.done?t(s):Promise.resolve(s).then(r,o)}function Da(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var a=e.apply(t,n);function i(e){Pa(a,r,o,i,u,"next",e)}function u(e){Pa(a,r,o,i,u,"throw",e)}i(void 0)})}}function xa(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var Na=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,r;return t=e,n=null,r=[{key:"fetchSubmissionData",value:function(){var e=Da(regeneratorRuntime.mark(function e(t){var n,r,o,a,i,u,s,c;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=Aa({},t),r=n.uuid,o=n.secureToken,a='\nquery {\n  readQuestionnaireSubmission(UUID: "'.concat(r,'", SecureToken: "').concat(o,'") {\n    ID\n    UUID\n    User {\n      ID\n    }\n    SubmitterName,\n    SubmitterRole,\n    SubmitterEmail,\n    QuestionnaireStatus\n    Questionnaire {\n      ID\n      Name\n    }\n    QuestionnaireData\n    AnswerData\n    CisoApprovalStatus\n    BusinessOwnerApprovalStatus\n    SecurityArchitectApprovalStatus\n    IsCurrentUserAnApprover\n    TaskSubmissions {\n      UUID\n      TaskName\n      Status\n    }\n  }\n  readSiteConfig {\n    Title\n  }\n}'),e.next=4,U.request({query:a});case 4:if(i=e.sent,u=I.a.get(i,"data.readCurrentMember.0",{}),s=I.a.get(i,"data.readQuestionnaireSubmission.0",{}),u&&s){e.next=9;break}throw q;case 9:return c={siteTitle:I.a.toString(I.a.get(i,"data.readSiteConfig.0.Title","")),submission:{questionnaireID:I.a.toString(I.a.get(s,"Questionnaire.ID","")),questionnaireTitle:I.a.toString(I.a.get(s,"Questionnaire.Name","")),submissionID:I.a.toString(I.a.get(s,"ID","")),submissionUUID:I.a.toString(I.a.get(s,"UUID","")),submitter:{id:I.a.toString(I.a.get(s,"User.ID")),name:I.a.toString(I.a.get(s,"SubmitterName","")),role:I.a.toString(I.a.get(s,"SubmitterRole","")),email:I.a.toString(I.a.get(s,"SubmitterEmail","")),isSA:!1,isCISO:!1},status:I.a.toString(I.a.get(s,"QuestionnaireStatus","")).toLowerCase().replace("-","_"),approvalStatus:{chiefInformationSecurityOfficer:I.a.toString(I.a.get(s,"CisoApprovalStatus","")),businessOwner:I.a.toString(I.a.get(s,"BusinessOwnerApprovalStatus","")),securityArchitect:I.a.toString(I.a.get(s,"SecurityArchitectApprovalStatus",""))},questions:B.parseQuestionsFromJSON({schemaJSON:I.a.toString(I.a.get(s,"QuestionnaireData","")),answersJSON:I.a.toString(I.a.get(s,"AnswerData",""))}),taskSubmissions:I.a.toArray(I.a.get(s,"TaskSubmissions",[])).map(function(e){return{uuid:I.a.toString(I.a.get(e,"UUID","")),taskName:I.a.toString(I.a.get(e,"TaskName","")),status:I.a.toString(I.a.get(e,"Status",""))}})}},e.abrupt("return",c);case 11:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"approveQuestionnaireSubmission",value:function(){var e=Da(regeneratorRuntime.mark(function e(t){var n,r,o,a,i,u,s,c;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=Aa({},t),r=n.submissionID,o=n.csrfToken,a=n.secureToken,i='\nmutation {\n updateQuestionnaireStatusToApproved(ID: "'.concat(r,'", SecureToken: "').concat(a,'") {\n   QuestionnaireStatus\n   UUID\n }\n}'),e.next=4,U.request({query:i,csrfToken:o});case 4:if(u=e.sent,s=I.a.toString(I.a.get(u,"data.updateQuestionnaireStatusToApproved.QuestionnaireStatus",null)),c=I.a.toString(I.a.get(u,"data.updateQuestionnaireStatusToApproved.UUID",null)),s&&c){e.next=9;break}throw q;case 9:return e.abrupt("return",{uuid:c});case 10:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"denyQuestionnaireSubmission",value:function(){var e=Da(regeneratorRuntime.mark(function e(t){var n,r,o,a,i,u,s,c;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=Aa({},t),r=n.submissionID,o=n.csrfToken,a=n.secureToken,i='\nmutation {\n updateQuestionnaireStatusToDenied(ID: "'.concat(r,'", SecureToken: "').concat(a,'") {\n   QuestionnaireStatus\n   UUID\n }\n}'),e.next=4,U.request({query:i,csrfToken:o});case 4:if(u=e.sent,s=I.a.toString(I.a.get(u,"data.updateQuestionnaireStatusToDenied.QuestionnaireStatus",null)),c=I.a.toString(I.a.get(u,"data.updateQuestionnaireStatusToDenied.UUID",null)),s&&c){e.next=9;break}throw q;case 9:return e.abrupt("return",{uuid:c});case 10:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()}],n&&xa(t.prototype,n),r&&xa(t,r),e}();function Ca(e){return(Ca="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ra(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(t){Ua(e,t,n[t])})}return e}function Ua(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function qa(e,t,n,r,o,a,i){try{var u=e[a](i),s=u.value}catch(e){return void n(e)}u.done?t(s):Promise.resolve(s).then(r,o)}function Qa(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var a=e.apply(t,n);function i(e){qa(a,r,o,i,u,"next",e)}function u(e){qa(a,r,o,i,u,"throw",e)}i(void 0)})}}function Ma(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function La(e,t){return!t||"object"!==Ca(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Ba(e){return(Ba=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Fa(e,t){return(Fa=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Ha=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=La(this,Ba(t).call(this,e))).state={siteTitle:"",submission:null},n}var n,a,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Fa(e,t)}(t,r["Component"]),n=t,(a=[{key:"componentDidMount",value:function(){var e=Qa(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.loadData();case 2:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this,t=Ra({},this.state),n=t.submission,r=t.siteTitle,a=Ra({},this.props).token,i="",u=null;if(n){var s="approved"===n.approvalStatus.securityArchitect&&"pending"===n.approvalStatus.businessOwner?"approver":"others";i=n.questionnaireTitle,u=o.a.createElement(ho,{submission:n,handlePDFDownloadButtonClick:function(){e.downloadPDF(n,r)},handleApproveButtonClick:function(){e.approve(n)},handleDenyButtonClick:function(){e.deny(n)},viewAs:s,token:a})}return o.a.createElement("div",{className:"SummaryContainer"},o.a.createElement(tn,{title:i,subtitle:"Summary",showLogoutButton:!1}),u,o.a.createElement(Le,null))}},{key:"downloadPDF",value:function(){var e=Qa(regeneratorRuntime.mark(function e(t,n){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Xr.generatePDF({questions:t.questions,submitter:t.submitter,questionnaireTitle:t.questionnaireTitle,siteTitle:n});case 2:case"end":return e.stop()}},e,this)}));return function(t,n){return e.apply(this,arguments)}}()},{key:"approve",value:function(){var e=Qa(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=Na,e.t1=t.submissionID,e.next=4,ve.getCSRFToken();case 4:return e.t2=e.sent,e.t3=this.props.token,e.t4={submissionID:e.t1,csrfToken:e.t2,secureToken:e.t3},e.next=9,e.t0.approveQuestionnaireSubmission.call(e.t0,e.t4);case 9:return e.next=11,this.loadData();case 11:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"deny",value:function(){var e=Qa(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=Na,e.t1=t.submissionID,e.next=4,ve.getCSRFToken();case 4:return e.t2=e.sent,e.t3=this.props.token,e.t4={submissionID:e.t1,csrfToken:e.t2,secureToken:e.t3},e.next=9,e.t0.denyQuestionnaireSubmission.call(e.t0,e.t4);case 9:return e.next=11,this.loadData();case 11:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"loadData",value:function(){var e=Qa(regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Na.fetchSubmissionData({uuid:this.props.uuid,secureToken:this.props.token});case 2:t=e.sent,this.setState({siteTitle:t.siteTitle,submission:t.submission});case 4:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()}])&&Ma(n.prototype,a),i&&Ma(n,i),t}(),Ka=n(79);function Ja(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(t){za(e,t,n[t])})}return e}function za(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Wa(e,t,n,r,o,a,i){try{var u=e[a](i),s=u.value}catch(e){return void n(e)}u.done?t(s):Promise.resolve(s).then(r,o)}function Ya(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var Va=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,r;return t=e,n=null,r=[{key:"fetchTaskSubmissionData",value:function(){var e,t=(e=regeneratorRuntime.mark(function e(t){var n,r,o,a,i,u,s;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=Ja({},t),r=n.uuid,o=n.token,a='\nquery {\n  readSiteConfig {\n    Title\n  }\n  readTaskSubmission(UUID: "'.concat(r,'", SecureToken: "').concat(o,'") {\n    ID\n    UUID\n    TaskName\n    Status\n    Result\n    LockAnswersWhenComplete\n    Submitter {\n      ID\n      Email\n      FirstName\n      Surname\n      IsSA\n      IsCISO\n    }\n    QuestionnaireSubmission {\n      UUID\n      ID\n    }\n    QuestionnaireData\n    AnswerData\n  }\n}'),e.next=4,U.request({query:a});case 4:if(i=e.sent,u=I.a.get(i,"data.readTaskSubmission.0",{})){e.next=8;break}throw q;case 8:return s={siteTitle:I.a.toString(I.a.get(i,"data.readSiteConfig.0.Title","")),taskSubmission:{id:I.a.toString(I.a.get(u,"ID","")),uuid:I.a.toString(I.a.get(u,"UUID","")),taskName:I.a.toString(I.a.get(u,"TaskName","")),status:I.a.toString(I.a.get(u,"Status","")),result:I.a.toString(I.a.get(u,"Result","")),submitter:Ot.parseUserFromJSON(w()(u,"Submitter")),questionnaireSubmissionUUID:I.a.toString(I.a.get(u,"QuestionnaireSubmission.UUID","")),questionnaireSubmissionID:I.a.toString(I.a.get(u,"QuestionnaireSubmission.ID","")),lockWhenComplete:Boolean(w()(u,"LockAnswersWhenComplete",!1)),questions:B.parseQuestionsFromJSON({schemaJSON:I.a.toString(I.a.get(u,"QuestionnaireData","")),answersJSON:I.a.toString(I.a.get(u,"AnswerData",""))})}},e.abrupt("return",s);case 10:case"end":return e.stop()}},e,this)}),function(){var t=this,n=arguments;return new Promise(function(r,o){var a=e.apply(t,n);function i(e){Wa(a,r,o,i,u,"next",e)}function u(e){Wa(a,r,o,i,u,"throw",e)}i(void 0)})});return function(e){return t.apply(this,arguments)}}()}],n&&Ya(t.prototype,n),r&&Ya(t,r),e}();function Ga(e){return(Ga="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Xa(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(t){Za(e,t,n[t])})}return e}function Za(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function $a(e,t,n,r,o,a,i){try{var u=e[a](i),s=u.value}catch(e){return void n(e)}u.done?t(s):Promise.resolve(s).then(r,o)}function ei(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var a=e.apply(t,n);function i(e){$a(a,r,o,i,u,"next",e)}function u(e){$a(a,r,o,i,u,"throw",e)}i(void 0)})}}function ti(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function ni(e,t){return!t||"object"!==Ga(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function ri(e){return(ri=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function oi(e,t){return(oi=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var ai=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=ni(this,ri(t).call(this,e))).state={siteTitle:"",taskSubmission:null},n}var n,a,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&oi(e,t)}(t,r["Component"]),n=t,(a=[{key:"componentDidMount",value:function(){var e=ei(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.loadData();case 2:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=Xa({},this.state),t=e.siteTitle,n=e.taskSubmission,r=Xa({},this.props).token;if(!n)return null;var a=n.result&&"complete"===n.status?o.a.createElement("div",{className:"result"},o.a.createElement("h3",null,"Result:"),o.a.createElement("div",null,n.result)):null,i=n.questionnaireSubmissionUUID?o.a.createElement(Qn,{title:"BACK TO QUESTIONNAIRE SUMMARY",onClick:function(){D.redirectToQuestionnaireSummary(n.questionnaireSubmissionUUID,r)}}):null;return o.a.createElement("div",{className:"TaskSubmissionContainer"},o.a.createElement(tn,{title:n.taskName,subtitle:t,showLogoutButton:!1}),o.a.createElement("div",{className:"TaskSubmission"},a,o.a.createElement(Er,{questions:n.questions}),o.a.createElement("div",{className:"buttons"},i)),o.a.createElement(Le,null))}},{key:"loadData",value:function(){var e=ei(regeneratorRuntime.mark(function e(){var t,n,r,o;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=Xa({},this.props),n=t.uuid,r=t.token,e.next=3,Va.fetchTaskSubmissionData({uuid:n,token:r});case 3:o=e.sent,this.setState(o);case 5:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()}])&&ti(n.prototype,a),i&&ti(n,i),t}();function ii(e){return(ii="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ui(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function si(e,t){return!t||"object"!==ii(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function ci(e){return(ci=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function li(e,t){return(li=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var fi=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),si(this,ci(t).apply(this,arguments))}var n,a,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&li(e,t)}(t,r["Component"]),n=t,(a=[{key:"render",value:function(){return o.a.createElement("div",null,o.a.createElement("main",null,o.a.createElement(_a.a,null,o.a.createElement(u.a,null,o.a.createElement(s.a,{path:"/questionnaire/summary/:uuid"},function(e){var t=e.match,n=e.location,r=Object(Ka.parse)(n.search);return o.a.createElement("div",{className:"gray-bg"},o.a.createElement(Ha,{uuid:t.params.uuid,token:r.token||""}))}),o.a.createElement(s.a,{path:"/task/submission/:uuid"},function(e){var t=e.match,n=e.location,r=Object(Ka.parse)(n.search);return o.a.createElement("div",{className:"gray-bg"},o.a.createElement(ai,{uuid:t.params.uuid,token:r.token||""}))})))))}}])&&ui(n.prototype,a),i&&ui(n,i),t}(),pi=n(19),bi=(n(584),{title:"",subtitle:"",pillars:[],tasks:[]});function mi(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(t){yi(e,t,n[t])})}return e}function yi(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var di={title:"",subtitle:"",keyInformation:"",questionnaireID:"",user:null},hi={title:"",siteTitle:"",user:null,submission:null,isCurrentUserApprover:!1};var vi=Object(pi.combineReducers)({startState:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:di,t=arguments.length>1?arguments[1]:void 0;return t.type===l.QUESTIONNAIRE.LOAD_QUESTIONNAIRE_START_STATE?t.payload:e},submissionState:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:hi,t=arguments.length>1?arguments[1]:void 0;if(t.type===l.QUESTIONNAIRE.LOAD_QUESTIONNAIRE_SUBMISSION_STATE)return t.payload;if(t.type===l.QUESTIONNAIRE.PUT_DATA_IN_QUESTIONNAIRE_ANSWER){if(!e.submission)return e;var n=t.payload,r=e.submission.questions.findIndex(function(e){return e.id===n.id});if(r<0)return e;var o=mi({},e);return I.a.set(o,"submission.questions.".concat(r),n),o}if(t.type===l.QUESTIONNAIRE.MOVE_TO_ANOTHER_QUESTIONNAIRE_QUESTION){var a=e.submission;if(!a)return e;var i=mi({},t).targetIndex,u=a.questions.findIndex(function(e){return e.isCurrent});if(i<0||i>=a.questions.length)return e;var s=mi({},e);return I.a.set(s,"submission.questions.".concat(u,".isCurrent"),!1),I.a.set(s,"submission.questions.".concat(i,".isCurrent"),!0),s}if(t.type===l.QUESTIONNAIRE.MARK_QUESTIONNAIRE_QUESTION_NOT_APPLICABLE){var c=e.submission;if(!c)return e;var f=mi({},e),p=t.nonApplicableIndexes;return p&&p.length>0&&p.forEach(function(e){var t=c.questions[e];t.isApplicable=!1,I.a.set(f,"submission.questions.".concat(e),t)}),f}return e}}),Si=n(71),gi=n.n(Si),wi=n(43),Oi=n.n(wi);function ki(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Ei={taskSubmission:null};function Ti(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var ji={user:null};function _i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Ai={siteTitle:""};var Ii=Object(pi.combineReducers)({homeState:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:bi,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case l.HOME.LOAD_HOME_STATE_FINISHED:return t.payload;default:return e}},questionnaireState:vi,taskSubmissionState:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ei,t=arguments.length>1?arguments[1]:void 0,n=e.taskSubmission;if(t.type===l.TASK.LOAD_TASK_SUBMISSION)return{taskSubmission:t.payload};if(t.type===l.TASK.PUT_DATA_IN_TASK_SUBMISSION){if(!n)return e;var r=t.payload,o=n.questions.findIndex(function(e){return e.id===r.id});if(o<0)return e;var a=gi()(e);return Oi()(a,"taskSubmission.questions.".concat(o),r),a}if(t.type===l.TASK.MARK_TASK_QUESTION_NOT_APPLICABLE){if(!n)return e;var i=gi()(e),u=t.payload;return u&&u.length>0&&u.forEach(function(e){var t=n.questions[e];t.isApplicable=!1,Oi()(i,"taskSubmission.questions.".concat(e),t)}),i}if(t.type===l.TASK.MOVE_TO_ANOTHER_TASK_QUESTION){if(!n)return e;var s=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(t){ki(e,t,n[t])})}return e}({},t.payload),c=s.currentIndex,f=s.targetIndex;if(f<0||f>=n.questions.length)return e;var p=gi()(e);return Oi()(p,"taskSubmission.questions.".concat(c,".isCurrent"),!1),Oi()(p,"taskSubmission.questions.".concat(f,".isCurrent"),!0),p}if(t.type===l.TASK.COMPLETE_TASK_SUBMISSION){var b=gi()(e);return Oi()(b,"taskSubmission.status","complete"),t.payload&&Oi()(b,"taskSubmission.result",t.payload),b}if(t.type===l.TASK.EDIT_TASK_SUBMISSION){var m=gi()(e);return Oi()(m,"taskSubmission.status","in_progress"),Oi()(m,"taskSubmission.result",null),m}return e},currentUserState:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ji,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case l.USER.SET_CURRENT_USER:return function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(t){Ti(e,t,n[t])})}return e}({},e,{user:t.payload});default:return e}},siteConfigState:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ai,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case l.SITE_CONFIG.SET_SITE_TITLE:return function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(t){_i(e,t,n[t])})}return e}({},e,{siteTitle:t.payload});default:return e}}}),Pi=n(355),Di=[f.a];var xi=Object(pi.createStore)(Ii,Object(Pi.composeWithDevTools)(pi.applyMiddleware.apply(void 0,Di)));function Ni(e){return(Ni="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ci(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Ri(e,t){return!t||"object"!==Ni(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Ui(e){return(Ui=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function qi(e,t){return(qi=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Qi(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(t){Mi(e,t,n[t])})}return e}function Mi(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Li=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),Ri(this,Ui(t).apply(this,arguments))}var n,a,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&qi(e,t)}(t,r["Component"]),n=t,(a=[{key:"componentDidMount",value:function(){(0,Qi({},this.props).dispatchLoadDataAction)()}},{key:"render",value:function(){var e=Qi({},this.props),t=e.siteTitle,n=e.taskSubmission,r=e.dispatchSaveAnsweredQuestionAction,a=e.dispatchMoveToPreviousQuestionAction,i=e.dispatchEditAnswersAction;return n?o.a.createElement("div",{className:"TaskSubmissionContainer"},o.a.createElement(tn,{title:n.taskName,subtitle:t}),o.a.createElement(zo,{taskSubmission:n,saveAnsweredQuestion:r,moveToPreviousQuestion:a,editAnswers:i,showBackButton:!1,showEditButton:!1,canUpdateAnswers:"in_progress"===n.status}),o.a.createElement(Le,null)):null}}])&&Ci(n.prototype,a),i&&Ci(n,i),t}(),Bi=Object(c.b)(function(e){return{taskSubmission:e.taskSubmissionState.taskSubmission,siteTitle:e.siteConfigState.siteTitle}},function(e,t){return{dispatchLoadDataAction:function(){var n=Qi({},t),r=n.uuid,o=n.secureToken;e(na()),e(Co({uuid:r,secureToken:o}))},dispatchSaveAnsweredQuestionAction:function(n){var r=Qi({},t).secureToken;e(Ro({answeredQuestion:n,secureToken:r}))},dispatchMoveToPreviousQuestionAction:function(n){var r=Qi({},t).secureToken;e(Uo({targetQuestion:n,secureToken:r}))},dispatchEditAnswersAction:function(){var n=Qi({},t).secureToken;e(qo({secureToken:n}))}}})(Li);function Fi(e){return(Fi="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Hi(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Ki(e,t){return!t||"object"!==Fi(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Ji(e){return(Ji=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function zi(e,t){return(zi=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Wi=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),Ki(this,Ji(t).apply(this,arguments))}var n,a,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&zi(e,t)}(t,r["Component"]),n=t,(a=[{key:"render",value:function(){return o.a.createElement("div",null,o.a.createElement("main",null,o.a.createElement(u.a,null,o.a.createElement(s.a,{path:"/task/submission/:uuid"},function(e){var t=e.match,n=e.location,r=Object(Ka.parse)(n.search);return o.a.createElement("div",{className:"gray-bg"},o.a.createElement(Bi,{uuid:t.params.uuid,secureToken:r.token||""}))}))))}}])&&Hi(n.prototype,a),i&&Hi(n,i),t}();window.addEventListener("load",function(){So.a.defaultStyles={overlay:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.5)",display:"flex",flexDirection:"row",justifyContent:"center",alignItems:"center"},content:{background:"#fff",overflow:"auto",WebkitOverflowScrolling:"touch",padding:"20px"}};var e=document.getElementById("main-app");e&&i.a.render(o.a.createElement(_a.a,null,o.a.createElement(c.a,{store:xi},o.a.createElement(ja,null))),e);var t=document.getElementById("business-owner-app");t&&i.a.render(o.a.createElement(fi,null),t);var n=document.getElementById("vendor-app");n&&i.a.render(o.a.createElement(_a.a,null,o.a.createElement(c.a,{store:xi},o.a.createElement(Wi,null))),n)})},70:function(e,t,n){e.exports=n.p+"../img/4aa06b86ab33745eda39a0996b2a31bd.svg"},78:function(e,t,n){e.exports=n.p+"../img/b002cf666ac7512c21ad21462efdf4e8.svg"}});
//# sourceMappingURL=main.bundle.js.map