!function(e){function t(t){for(var r,o,a=t[0],i=t[1],u=t[2],s=0,c=[];s<a.length;s++)o=a[s],I[o]&&c.push(I[o][0]),I[o]=0;for(r in i)Object.prototype.hasOwnProperty.call(i,r)&&(e[r]=i[r]);for(C&&C(t);c.length;)c.shift()();return D.push.apply(D,u||[]),n()}function n(){for(var e,t=0;t<D.length;t++){for(var n=D[t],r=!0,o=1;o<n.length;o++){var a=n[o];0!==I[a]&&(r=!1)}r&&(D.splice(t--,1),e=P(P.s=n[0]))}return e}var r=window.webpackHotUpdate;window.webpackHotUpdate=function(e,t){!function(e,t){if(!w[e]||!O[e])return;for(var n in O[e]=!1,t)Object.prototype.hasOwnProperty.call(t,n)&&(d[n]=t[n]);0==--v&&0===g&&T()}(e,t),r&&r(e,t)};var o,a=!0,i="83d60105c8dd1cf136bf",u=1e4,s={},c=[],l=[];function f(e){var t={_acceptedDependencies:{},_declinedDependencies:{},_selfAccepted:!1,_selfDeclined:!1,_disposeHandlers:[],_main:o!==e,active:!0,accept:function(e,n){if(void 0===e)t._selfAccepted=!0;else if("function"==typeof e)t._selfAccepted=e;else if("object"==typeof e)for(var r=0;r<e.length;r++)t._acceptedDependencies[e[r]]=n||function(){};else t._acceptedDependencies[e]=n||function(){}},decline:function(e){if(void 0===e)t._selfDeclined=!0;else if("object"==typeof e)for(var n=0;n<e.length;n++)t._declinedDependencies[e[n]]=!0;else t._declinedDependencies[e]=!0},dispose:function(e){t._disposeHandlers.push(e)},addDisposeHandler:function(e){t._disposeHandlers.push(e)},removeDisposeHandler:function(e){var n=t._disposeHandlers.indexOf(e);n>=0&&t._disposeHandlers.splice(n,1)},check:j,apply:_,status:function(e){if(!e)return b;p.push(e)},addStatusHandler:function(e){p.push(e)},removeStatusHandler:function(e){var t=p.indexOf(e);t>=0&&p.splice(t,1)},data:s[e]};return o=void 0,t}var p=[],b="idle";function m(e){b=e;for(var t=0;t<p.length;t++)p[t].call(null,e)}var y,d,h,v=0,g=0,S={},O={},w={};function E(e){return+e+""===e?+e:e}function j(e){if("idle"!==b)throw new Error("check() is only allowed in idle status");return a=e,m("check"),(t=u,t=t||1e4,new Promise(function(e,n){if("undefined"==typeof XMLHttpRequest)return n(new Error("No browser support"));try{var r=new XMLHttpRequest,o=P.p+"hot/hot-update.json";r.open("GET",o,!0),r.timeout=t,r.send(null)}catch(e){return n(e)}r.onreadystatechange=function(){if(4===r.readyState)if(0===r.status)n(new Error("Manifest request to "+o+" timed out."));else if(404===r.status)e();else if(200!==r.status&&304!==r.status)n(new Error("Manifest request to "+o+" failed."));else{try{var t=JSON.parse(r.responseText)}catch(e){return void n(e)}e(t)}}})).then(function(e){if(!e)return m("idle"),null;O={},S={},w=e.c,h=e.h,m("prepare");var t=new Promise(function(e,t){y={resolve:e,reject:t}});for(var n in d={},I)k(n);return"prepare"===b&&0===g&&0===v&&T(),t});var t}function k(e){var t;w[e]?(O[e]=!0,v++,(t=document.createElement("script")).charset="utf-8",t.src=P.p+"hot/hot-update.js",document.head.appendChild(t)):S[e]=!0}function T(){m("ready");var e=y;if(y=null,e)if(a)Promise.resolve().then(function(){return _(a)}).then(function(t){e.resolve(t)},function(t){e.reject(t)});else{var t=[];for(var n in d)Object.prototype.hasOwnProperty.call(d,n)&&t.push(E(n));e.resolve(t)}}function _(t){if("ready"!==b)throw new Error("apply() is only allowed in ready status");var n,r,o,a,u;function l(e){for(var t=[e],n={},r=t.slice().map(function(e){return{chain:[e],id:e}});r.length>0;){var o=r.pop(),i=o.id,u=o.chain;if((a=A[i])&&!a.hot._selfAccepted){if(a.hot._selfDeclined)return{type:"self-declined",chain:u,moduleId:i};if(a.hot._main)return{type:"unaccepted",chain:u,moduleId:i};for(var s=0;s<a.parents.length;s++){var c=a.parents[s],l=A[c];if(l){if(l.hot._declinedDependencies[i])return{type:"declined",chain:u.concat([c]),moduleId:i,parentId:c};-1===t.indexOf(c)&&(l.hot._acceptedDependencies[i]?(n[c]||(n[c]=[]),f(n[c],[i])):(delete n[c],t.push(c),r.push({chain:u.concat([c]),id:c})))}}}}return{type:"accepted",moduleId:e,outdatedModules:t,outdatedDependencies:n}}function f(e,t){for(var n=0;n<t.length;n++){var r=t[n];-1===e.indexOf(r)&&e.push(r)}}t=t||{};var p={},y=[],v={},g=function(){console.warn("[HMR] unexpected require("+O.moduleId+") to disposed module")};for(var S in d)if(Object.prototype.hasOwnProperty.call(d,S)){var O;u=E(S);var j=!1,k=!1,T=!1,_="";switch((O=d[S]?l(u):{type:"disposed",moduleId:S}).chain&&(_="\nUpdate propagation: "+O.chain.join(" -> ")),O.type){case"self-declined":t.onDeclined&&t.onDeclined(O),t.ignoreDeclined||(j=new Error("Aborted because of self decline: "+O.moduleId+_));break;case"declined":t.onDeclined&&t.onDeclined(O),t.ignoreDeclined||(j=new Error("Aborted because of declined dependency: "+O.moduleId+" in "+O.parentId+_));break;case"unaccepted":t.onUnaccepted&&t.onUnaccepted(O),t.ignoreUnaccepted||(j=new Error("Aborted because "+u+" is not accepted"+_));break;case"accepted":t.onAccepted&&t.onAccepted(O),k=!0;break;case"disposed":t.onDisposed&&t.onDisposed(O),T=!0;break;default:throw new Error("Unexception type "+O.type)}if(j)return m("abort"),Promise.reject(j);if(k)for(u in v[u]=d[u],f(y,O.outdatedModules),O.outdatedDependencies)Object.prototype.hasOwnProperty.call(O.outdatedDependencies,u)&&(p[u]||(p[u]=[]),f(p[u],O.outdatedDependencies[u]));T&&(f(y,[O.moduleId]),v[u]=g)}var D,x=[];for(r=0;r<y.length;r++)u=y[r],A[u]&&A[u].hot._selfAccepted&&x.push({module:u,errorHandler:A[u].hot._selfAccepted});m("dispose"),Object.keys(w).forEach(function(e){!1===w[e]&&function(e){delete I[e]}(e)});for(var N,R,C=y.slice();C.length>0;)if(u=C.pop(),a=A[u]){var U={},q=a.hot._disposeHandlers;for(o=0;o<q.length;o++)(n=q[o])(U);for(s[u]=U,a.hot.active=!1,delete A[u],delete p[u],o=0;o<a.children.length;o++){var Q=A[a.children[o]];Q&&((D=Q.parents.indexOf(u))>=0&&Q.parents.splice(D,1))}}for(u in p)if(Object.prototype.hasOwnProperty.call(p,u)&&(a=A[u]))for(R=p[u],o=0;o<R.length;o++)N=R[o],(D=a.children.indexOf(N))>=0&&a.children.splice(D,1);for(u in m("apply"),i=h,v)Object.prototype.hasOwnProperty.call(v,u)&&(e[u]=v[u]);var L=null;for(u in p)if(Object.prototype.hasOwnProperty.call(p,u)&&(a=A[u])){R=p[u];var M=[];for(r=0;r<R.length;r++)if(N=R[r],n=a.hot._acceptedDependencies[N]){if(-1!==M.indexOf(n))continue;M.push(n)}for(r=0;r<M.length;r++){n=M[r];try{n(R)}catch(e){t.onErrored&&t.onErrored({type:"accept-errored",moduleId:u,dependencyId:R[r],error:e}),t.ignoreErrored||L||(L=e)}}}for(r=0;r<x.length;r++){var F=x[r];u=F.module,c=[u];try{P(u)}catch(e){if("function"==typeof F.errorHandler)try{F.errorHandler(e)}catch(n){t.onErrored&&t.onErrored({type:"self-accept-error-handler-errored",moduleId:u,error:n,originalError:e}),t.ignoreErrored||L||(L=n),L||(L=e)}else t.onErrored&&t.onErrored({type:"self-accept-errored",moduleId:u,error:e}),t.ignoreErrored||L||(L=e)}}return L?(m("fail"),Promise.reject(L)):(m("idle"),new Promise(function(e){e(y)}))}var A={},I={1:0},D=[];function P(t){if(A[t])return A[t].exports;var n=A[t]={i:t,l:!1,exports:{},hot:f(t),parents:(l=c,c=[],l),children:[]};return e[t].call(n.exports,n,n.exports,function(e){var t=A[e];if(!t)return P;var n=function(n){return t.hot.active?(A[n]?-1===A[n].parents.indexOf(e)&&A[n].parents.push(e):(c=[e],o=n),-1===t.children.indexOf(n)&&t.children.push(n)):(console.warn("[HMR] unexpected require("+n+") from disposed module "+e),c=[]),P(n)},r=function(e){return{configurable:!0,enumerable:!0,get:function(){return P[e]},set:function(t){P[e]=t}}};for(var a in P)Object.prototype.hasOwnProperty.call(P,a)&&"e"!==a&&"t"!==a&&Object.defineProperty(n,a,r(a));return n.e=function(e){return"ready"===b&&m("prepare"),g++,P.e(e).then(t,function(e){throw t(),e});function t(){g--,"prepare"===b&&(S[e]||k(e),0===g&&0===v&&T())}},n.t=function(e,t){return 1&t&&(e=n(e)),P.t(e,-2&t)},n}(t)),n.l=!0,n.exports}P.m=e,P.c=A,P.d=function(e,t,n){P.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},P.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},P.t=function(e,t){if(1&t&&(e=P(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(P.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)P.d(n,r,function(t){return e[t]}.bind(null,r));return n},P.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return P.d(t,"a",t),t},P.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},P.p="/resources/themes/sdlt/dist/img/",P.h=function(){return i};var x=window.webpackJsonp=window.webpackJsonp||[],N=x.push.bind(x);x.push=t,x=x.slice();for(var R=0;R<x.length;R++)t(x[R]);var C=N;D.push([478,2]),n()}({284:function(e,t,n){e.exports=n.p+"../img/b2ce59ecfcc515cb33d81013163089b9.svg"},285:function(e,t,n){e.exports=n.p+"../img/41e304962a77cf734f9bfe9772ab12b9.svg"},286:function(e,t,n){e.exports=n.p+"../img/0e61629440d7a6d860ba88aad4af303a.svg"},287:function(e,t,n){e.exports=n.p+"../img/442b4a253c2be23661dc12e64f264053.svg"},289:function(e,t,n){e.exports=n.p+"../img/44cca0ef5b0830924492e8a8413b854e.svg"},290:function(e,t,n){e.exports=n.p+"../img/f0545538d29150bca803dd2e1d422c11.jpg"},294:function(e,t,n){e.exports=n.p+"../img/b0b707ee0bdf8b4add381179f4a89bf9.svg"},298:function(e,t,n){e.exports=n.p+"../img/4b4872cec3cb197b21f4d3ac1b8ee472.jpg"},299:function(e,t,n){e.exports=n.p+"../img/d1029db2ceff54ee06b8dafcf9f6a671.jpg"},468:function(e,t,n){var r={"./af":156,"./af.js":156,"./ar":157,"./ar-dz":158,"./ar-dz.js":158,"./ar-kw":159,"./ar-kw.js":159,"./ar-ly":160,"./ar-ly.js":160,"./ar-ma":161,"./ar-ma.js":161,"./ar-sa":162,"./ar-sa.js":162,"./ar-tn":163,"./ar-tn.js":163,"./ar.js":157,"./az":164,"./az.js":164,"./be":165,"./be.js":165,"./bg":166,"./bg.js":166,"./bm":167,"./bm.js":167,"./bn":168,"./bn.js":168,"./bo":169,"./bo.js":169,"./br":170,"./br.js":170,"./bs":171,"./bs.js":171,"./ca":172,"./ca.js":172,"./cs":173,"./cs.js":173,"./cv":174,"./cv.js":174,"./cy":175,"./cy.js":175,"./da":176,"./da.js":176,"./de":177,"./de-at":178,"./de-at.js":178,"./de-ch":179,"./de-ch.js":179,"./de.js":177,"./dv":180,"./dv.js":180,"./el":181,"./el.js":181,"./en-SG":182,"./en-SG.js":182,"./en-au":183,"./en-au.js":183,"./en-ca":184,"./en-ca.js":184,"./en-gb":185,"./en-gb.js":185,"./en-ie":186,"./en-ie.js":186,"./en-il":187,"./en-il.js":187,"./en-nz":188,"./en-nz.js":188,"./eo":189,"./eo.js":189,"./es":190,"./es-do":191,"./es-do.js":191,"./es-us":192,"./es-us.js":192,"./es.js":190,"./et":193,"./et.js":193,"./eu":194,"./eu.js":194,"./fa":195,"./fa.js":195,"./fi":196,"./fi.js":196,"./fo":197,"./fo.js":197,"./fr":198,"./fr-ca":199,"./fr-ca.js":199,"./fr-ch":200,"./fr-ch.js":200,"./fr.js":198,"./fy":201,"./fy.js":201,"./ga":202,"./ga.js":202,"./gd":203,"./gd.js":203,"./gl":204,"./gl.js":204,"./gom-latn":205,"./gom-latn.js":205,"./gu":206,"./gu.js":206,"./he":207,"./he.js":207,"./hi":208,"./hi.js":208,"./hr":209,"./hr.js":209,"./hu":210,"./hu.js":210,"./hy-am":211,"./hy-am.js":211,"./id":212,"./id.js":212,"./is":213,"./is.js":213,"./it":214,"./it-ch":215,"./it-ch.js":215,"./it.js":214,"./ja":216,"./ja.js":216,"./jv":217,"./jv.js":217,"./ka":218,"./ka.js":218,"./kk":219,"./kk.js":219,"./km":220,"./km.js":220,"./kn":221,"./kn.js":221,"./ko":222,"./ko.js":222,"./ku":223,"./ku.js":223,"./ky":224,"./ky.js":224,"./lb":225,"./lb.js":225,"./lo":226,"./lo.js":226,"./lt":227,"./lt.js":227,"./lv":228,"./lv.js":228,"./me":229,"./me.js":229,"./mi":230,"./mi.js":230,"./mk":231,"./mk.js":231,"./ml":232,"./ml.js":232,"./mn":233,"./mn.js":233,"./mr":234,"./mr.js":234,"./ms":235,"./ms-my":236,"./ms-my.js":236,"./ms.js":235,"./mt":237,"./mt.js":237,"./my":238,"./my.js":238,"./nb":239,"./nb.js":239,"./ne":240,"./ne.js":240,"./nl":241,"./nl-be":242,"./nl-be.js":242,"./nl.js":241,"./nn":243,"./nn.js":243,"./pa-in":244,"./pa-in.js":244,"./pl":245,"./pl.js":245,"./pt":246,"./pt-br":247,"./pt-br.js":247,"./pt.js":246,"./ro":248,"./ro.js":248,"./ru":249,"./ru.js":249,"./sd":250,"./sd.js":250,"./se":251,"./se.js":251,"./si":252,"./si.js":252,"./sk":253,"./sk.js":253,"./sl":254,"./sl.js":254,"./sq":255,"./sq.js":255,"./sr":256,"./sr-cyrl":257,"./sr-cyrl.js":257,"./sr.js":256,"./ss":258,"./ss.js":258,"./sv":259,"./sv.js":259,"./sw":260,"./sw.js":260,"./ta":261,"./ta.js":261,"./te":262,"./te.js":262,"./tet":263,"./tet.js":263,"./tg":264,"./tg.js":264,"./th":265,"./th.js":265,"./tl-ph":266,"./tl-ph.js":266,"./tlh":267,"./tlh.js":267,"./tr":268,"./tr.js":268,"./tzl":269,"./tzl.js":269,"./tzm":270,"./tzm-latn":271,"./tzm-latn.js":271,"./tzm.js":270,"./ug-cn":272,"./ug-cn.js":272,"./uk":273,"./uk.js":273,"./ur":274,"./ur.js":274,"./uz":275,"./uz-latn":276,"./uz-latn.js":276,"./uz.js":275,"./vi":277,"./vi.js":277,"./x-pseudo":278,"./x-pseudo.js":278,"./yo":279,"./yo.js":279,"./zh-cn":280,"./zh-cn.js":280,"./zh-hk":281,"./zh-hk.js":281,"./zh-tw":282,"./zh-tw.js":282};function o(e){var t=a(e);return n(t)}function a(e){if(!n.o(r,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return r[e]}o.keys=function(){return Object.keys(r)},o.resolve=a,e.exports=o,o.id=468},478:function(e,t,n){"use strict";n.r(t);n(303),n(305),n(306),n(309),n(310),n(311),n(94),n(314),n(315),n(317),n(318),n(319),n(321),n(322),n(323),n(324),n(325),n(326),n(327),n(328),n(329),n(330),n(332),n(333),n(334),n(335),n(336),n(337),n(338),n(339),n(340),n(341),n(342),n(343),n(344),n(345),n(346),n(347),n(348),n(349),n(351),n(353),n(354),n(355),n(356),n(357),n(358),n(359),n(360),n(361),n(362),n(363),n(364),n(365),n(366),n(367),n(368),n(369),n(370),n(371),n(372),n(373),n(376),n(377),n(378),n(380),n(381),n(382),n(383),n(384),n(385),n(386),n(387),n(388),n(389),n(390),n(391),n(138),n(392),n(394),n(395),n(396),n(397),n(398),n(399),n(401),n(402),n(403),n(404),n(405),n(406),n(407),n(408),n(409),n(410),n(411),n(412),n(413),n(414),n(415),n(416),n(417),n(418),n(419),n(420),n(421),n(422),n(423),n(424),n(425),n(426),n(427),n(428),n(429),n(430),n(431),n(432),n(433),n(434),n(435),n(436),n(437),n(438),n(439),n(440);var r=n(0),o=n.n(r),a=n(65),i=n.n(a),u=n(484),s=n(483),c=n(21),l={HOME:{LOAD_HOME_STATE_STARTED:"LOAD_HOME_STATE_STARTED",LOAD_HOME_STATE_FAILED:"LOAD_HOME_STATE_FAILED",LOAD_HOME_STATE_FINISHED:"LOAD_HOME_STATE_FINISHED"},QUESTIONNAIRE:{LOAD_QUESTIONNAIRE_START_STATE:"LOAD_QUESTIONNAIRE_START_STATE",LOAD_QUESTIONNAIRE_SUBMISSION_STATE:"LOAD_QUESTIONNAIRE_SUBMISSION_STATE",PUT_DATA_IN_QUESTIONNAIRE_ANSWER:"PUT_DATA_IN_QUESTIONNAIRE_ANSWER",MOVE_TO_ANOTHER_QUESTIONNAIRE_QUESTION:"MOVE_TO_ANOTHER_QUESTIONNAIRE_QUESTION",MARK_QUESTIONNAIRE_QUESTION_NOT_APPLICABLE:"MARK_QUESTIONNAIRE_QUESTION_NOT_APPLICABLE"},TASK:{LOAD_TASK_SUBMISSION_STATE:"LOAD_TASK_SUBMISSION_STATE",PUT_DATA_IN_TASK_SUBMISSION:"PUT_DATA_IN_TASK_SUBMISSION",MARK_TASK_QUESTION_NOT_APPLICABLE:"MARK_TASK_QUESTION_NOT_APPLICABLE",MOVE_TO_ANOTHER_TASK_QUESTION:"MOVE_TO_ANOTHER_TASK_QUESTION"},UI:{LOAD_DATA_STARTED:"LOAD_DATA_STARTED",LOAD_DATA_FAILED:"LOAD_DATA_FAILED",LOAD_DATA_FINISHED:"LOAD_DATA_FINISHED"}},f=n(64),p=n(284),b=n.n(p),m=n(285),y=n.n(m),d=n(286),h=n.n(d),v=n(287),g=n.n(v),S=n(2),O=n.n(S),w=n(288),E=n.n(w),j=n(79),k=n.n(j);function T(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var _=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,r;return t=e,r=[{key:"getTaskSubmissionURL",value:function(e){return"/task/submission/".concat(e)}},{key:"redirectToQuestionnaireEditing",value:function(e){window.location.href="/#/questionnaire/submission/".concat(e)}},{key:"redirectToQuestionnaireReview",value:function(e){window.location.href="/#/questionnaire/review/".concat(e)}},{key:"redirectToQuestionnaireSummary",value:function(e){window.location.href="/#/questionnaire/summary/".concat(e)}},{key:"redirectToLogout",value:function(){window.location.href="/Security/Logout"}},{key:"redirectToLogin",value:function(){window.location.href="/Security/login?BackURL=%2F"}}],(n=null)&&T(t.prototype,n),r&&T(t,r),e}();function A(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(t){I(e,t,n[t])})}return e}function I(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function D(e,t,n,r,o,a,i){try{var u=e[a](i),s=u.value}catch(e){return void n(e)}u.done?t(s):Promise.resolve(s).then(r,o)}function P(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var x=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,r;return t=e,n=null,r=[{key:"request",value:function(){var e,t=(e=regeneratorRuntime.mark(function e(t){var n,r,o,a,i,u,s,c,l,f;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=A({},t),r=n.query,o=n.variables,a=n.csrfToken,i={},a&&(i["X-CSRF-TOKEN"]=a),u={query:E()(r),variables:o},s=k.a.create({url:"/graphql",method:"post",data:u,headers:i}),e.next=7,s.request();case 7:if(c=e.sent,l=c.data,!(f=O.a.get(l,"errors.0.message",null))){e.next=13;break}throw"Please log in first..."===f&&_.redirectToLogin(),new Error(f);case 13:return e.abrupt("return",l);case 14:case"end":return e.stop()}},e,this)}),function(){var t=this,n=arguments;return new Promise(function(r,o){var a=e.apply(t,n);function i(e){D(a,r,o,i,u,"next",e)}function u(e){D(a,r,o,i,u,"throw",e)}i(void 0)})});return function(e){return t.apply(this,arguments)}}()}],n&&P(t.prototype,n),r&&P(t,r),e}(),N=new Error("There is an error when fetching data..."),R=new Error("There is an error when parsing data...");function C(e,t,n,r,o,a,i){try{var u=e[a](i),s=u.value}catch(e){return void n(e)}u.done?t(s):Promise.resolve(s).then(r,o)}function U(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var q=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,r;return t=e,n=null,r=[{key:"fetchHomeData",value:function(){var e,t=(e=regeneratorRuntime.mark(function e(){var t,n,r,o,a,i;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return"\nquery {\n  readDashboard {\n    Title\n    Subtitle\n    Pillars {\n      Label\n      Type\n      Disabled\n      Questionnaire {\n        ID\n      }\n    }\n  }\n}",e.next=3,x.request({query:"\nquery {\n  readDashboard {\n    Title\n    Subtitle\n    Pillars {\n      Label\n      Type\n      Disabled\n      Questionnaire {\n        ID\n      }\n    }\n  }\n}"});case 3:if(t=e.sent,n=O.a.get(t,"data.readDashboard",[]),Array.isArray(n)&&0!==n.length){e.next=7;break}throw N;case 7:if(r=n[0],o=O.a.get(r,"Title",""),a=O.a.get(r,"Subtitle",""),i=O.a.get(r,"Pillars",[]),Array.isArray(i)){e.next=13;break}throw N;case 13:return i=i.map(function(e){var t="";switch(e.Type){case"proof_of_concept":t=b.a;break;case"software_as_service":t=y.a;break;case"product_project_or_solution":t=h.a;break;case"feature_or_bug_fix":t=g.a}return{title:O.a.get(e,"Label",""),disabled:O.a.get(e,"Disabled",!0),questionnaireID:O.a.get(e,"Questionnaire.0.ID",""),icon:t}}),e.abrupt("return",{title:o,subtitle:a,pillars:i});case 15:case"end":return e.stop()}},e,this)}),function(){var t=this,n=arguments;return new Promise(function(r,o){var a=e.apply(t,n);function i(e){C(a,r,o,i,u,"next",e)}function u(e){C(a,r,o,i,u,"throw",e)}i(void 0)})});return function(){return t.apply(this,arguments)}}()}],n&&U(t.prototype,n),r&&U(t,r),e}();function Q(e,t,n,r,o,a,i){try{var u=e[a](i),s=u.value}catch(e){return void n(e)}u.done?t(s):Promise.resolve(s).then(r,o)}function L(){return function(){var e,t=(e=regeneratorRuntime.mark(function e(t){var n;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t({type:l.HOME.LOAD_HOME_STATE_STARTED}),e.prev=1,e.next=4,q.fetchHomeData();case 4:n=e.sent,t(M(n)),e.next=13;break;case 8:e.prev=8,e.t0=e.catch(1),t((r=e.t0,{type:l.HOME.LOAD_HOME_STATE_FAILED,error:r})),console.error(e.t0),alert(e.t0.message);case 13:case"end":return e.stop()}var r},e,this,[[1,8]])}),function(){var t=this,n=arguments;return new Promise(function(r,o){var a=e.apply(t,n);function i(e){Q(a,r,o,i,u,"next",e)}function u(e){Q(a,r,o,i,u,"throw",e)}i(void 0)})});return function(e){return t.apply(this,arguments)}}()}function M(e){return{type:l.HOME.LOAD_HOME_STATE_FINISHED,payload:e}}var F=n(80),B=n.n(F),H=n(481);function K(e){return(K="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function z(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function J(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Y(e,t){return!t||"object"!==K(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function W(e){return(W=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function V(e,t){return(V=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var G=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),Y(this,W(t).apply(this,arguments))}var n,a,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&V(e,t)}(t,r["Component"]),n=t,(a=[{key:"render",value:function(){var e=this,t=["Pillar"].concat(z(this.props.classes));return this.props.pillar.disabled&&t.push("disabled"),o.a.createElement(H.a,{className:t.join(" "),to:this.props.link,onClick:function(t){e.props.pillar.disabled&&(t.preventDefault(),alert("Coming soon..."))}},o.a.createElement("div",{className:"icon"},o.a.createElement("img",{src:this.props.pillar.icon,alt:this.props.pillar.title})),o.a.createElement("div",{className:"title"},this.props.pillar.title))}}])&&J(n.prototype,a),i&&J(n,i),t}();function X(e){return(X="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Z(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function $(e,t){return!t||"object"!==X(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function ee(e){return(ee=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function te(e,t){return(te=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var ne=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),$(this,ee(t).apply(this,arguments))}var n,a,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&te(e,t)}(t,r["Component"]),n=t,(a=[{key:"render",value:function(){var e=this;return o.a.createElement(H.a,{className:"TaskButton ".concat(this.props.classes.join(" ")),to:this.props.link,onClick:function(t){e.props.disabled&&(t.preventDefault(),alert("Coming soon..."))}},o.a.createElement("div",{className:"title"},this.props.title))}}])&&Z(n.prototype,a),i&&Z(n,i),t}(),re=n(289),oe=n.n(re);function ae(e){return(ae="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ie(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ue(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function se(e,t){return!t||"object"!==ae(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function ce(e){return(ce=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function le(e,t){return(le=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var fe=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),se(this,ce(t).apply(this,arguments))}var n,a,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&le(e,t)}(t,r["Component"]),n=t,(a=[{key:"render",value:function(){var e=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(t){ie(e,t,n[t])})}return e}({},this.props).classes;return o.a.createElement("button",{className:"LogoutButton ".concat(e.join(" ")),onClick:this.onButtonClick.bind(this)},o.a.createElement("div",null,o.a.createElement("img",{src:oe.a}),"Log Out"))}},{key:"onButtonClick",value:function(){_.redirectToLogout()}}])&&ue(n.prototype,a),i&&ue(n,i),t}();fe.defaultProps={classes:[]};var pe=fe;function be(e){return(be="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function me(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function ye(e,t){return!t||"object"!==be(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function de(e){return(de=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function he(e,t){return(he=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var ve=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),ye(this,de(t).apply(this,arguments))}var n,a,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&he(e,t)}(t,r["Component"]),n=t,(a=[{key:"render",value:function(){return o.a.createElement("div",{className:"Home"},o.a.createElement(pe,{classes:["clearfix","float-right","mt-5","mr-5"]}),o.a.createElement("div",{className:"layout"},o.a.createElement("img",{src:B.a,className:"logo"}),o.a.createElement("h1",null,this.props.homeState.title),o.a.createElement("h2",null,this.props.homeState.subtitle),o.a.createElement("div",{className:"pillars"},this.props.homeState.pillars.map(function(e,t){return o.a.createElement(G,{link:"/questionnaire/start/".concat(e.questionnaireID),classes:["col","mx-1"],pillar:e,key:t})})),o.a.createElement("div",{className:"tasks"},o.a.createElement(ne,{link:"/tasks/blah",classes:["mx-1"],disabled:!0,title:"Information Classification"}),o.a.createElement(ne,{link:"/tasks/blah",classes:["mx-1"],disabled:!0,title:"Information Classification"}),o.a.createElement(ne,{link:"/tasks/blah",classes:["mx-1"],disabled:!0,title:"Information Classification"}),o.a.createElement(ne,{link:"/tasks/blah",classes:["mx-1"],disabled:!0,title:"Information Classification"}),o.a.createElement(ne,{link:"/tasks/blah",classes:["mx-1"],disabled:!0,title:"Information Classification"}))))}}])&&me(n.prototype,a),i&&me(n,i),t}();function ge(e){return(ge="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Se(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Oe(e,t){return!t||"object"!==ge(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function we(e){return(we=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Ee(e,t){return(Ee=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var je=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),Oe(this,we(t).apply(this,arguments))}var n,a,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Ee(e,t)}(t,r["Component"]),n=t,(a=[{key:"render",value:function(){return o.a.createElement("footer",{className:"Footer"},o.a.createElement("div",null,"© 2019 | NZ Transport Agency"))}}])&&Se(n.prototype,a),i&&Se(n,i),t}(),ke=n(290),Te=n.n(ke);function _e(e){return(_e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ae(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Ie(e,t){return!t||"object"!==_e(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function De(e){return(De=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Pe(e,t){return(Pe=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var xe=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),Ie(this,De(t).apply(this,arguments))}var n,a,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Pe(e,t)}(t,r["Component"]),n=t,(a=[{key:"componentDidMount",value:function(){this.props.dispatchLoadHomeDataAction&&this.props.dispatchLoadHomeDataAction()}},{key:"render",value:function(){return this.props.homeState?o.a.createElement("div",{className:"HomeContainer",style:{backgroundImage:'url("'.concat(Te.a,'")'),backgroundSize:"cover"}},o.a.createElement(ve,{homeState:this.props.homeState}),o.a.createElement(je,null)):null}}])&&Ae(n.prototype,a),i&&Ae(n,i),t}(),Ne=Object(c.b)(function(e){return{homeState:e.homeState}},function(e,t){return{dispatchLoadHomeDataAction:function(){e(L())}}})(xe),Re=n(28),Ce=n.n(Re);function Ue(e){return(Ue="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function qe(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Qe(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Le(e,t){return!t||"object"!==Ue(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Me(e){return(Me=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Fe(e,t){return(Fe=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Be=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),Le(this,Me(t).apply(this,arguments))}var n,a,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Fe(e,t)}(t,r["Component"]),n=t,(a=[{key:"render",value:function(){var e=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(t){qe(e,t,n[t])})}return e}({},this.props),t=e.title,n=e.classes,r=e.disabled,a=e.onClick,i=e.iconImage,u=null;return i&&(u=o.a.createElement("img",{src:i})),o.a.createElement("button",{className:Ce()("BaseButton",n,{disabled:r}),onClick:function(e){r?e.preventDefault():a(e)}},u,t)}}])&&Qe(n.prototype,a),i&&Qe(n,i),t}();Be.defaultProps={title:"",disabled:!1,classes:[],onClick:function(){}};var He=Be;function Ke(e){return(Ke="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ze(){return(ze=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function Je(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function Ye(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function We(e,t){return!t||"object"!==Ke(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Ve(e){return(Ve=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Ge(e,t){return(Ge=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Xe=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),We(this,Ve(t).apply(this,arguments))}var n,a,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Ge(e,t)}(t,r["Component"]),n=t,(a=[{key:"render",value:function(){return o.a.createElement(He,ze({},this.props,{classes:["LightButton"].concat(Je(this.props.classes))}))}}])&&Ye(n.prototype,a),i&&Ye(n,i),t}();Xe.defaultProps={title:"",disabled:!1,classes:[],onClick:function(){}};var Ze=Xe;function $e(e){return($e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function et(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function tt(e,t){return!t||"object"!==$e(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function nt(e){return(nt=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function rt(e,t){return(rt=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var ot=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),tt(this,nt(t).apply(this,arguments))}var n,a,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&rt(e,t)}(t,r["Component"]),n=t,(a=[{key:"render",value:function(){var e=this.props,t=e.keyInformation,n=e.user,r=e.onStartButtonClick;return o.a.createElement("div",{className:"Start"},o.a.createElement("div",{className:"start-form"},o.a.createElement("div",{className:"info-box"},o.a.createElement("div",{className:"key-info-title"},"Key Information:"),o.a.createElement("div",{className:"key-info",dangerouslySetInnerHTML:{__html:t}}),o.a.createElement("div",{className:"user-info"},o.a.createElement("div",{className:"info-line"},o.a.createElement("b",null,"Your Name: "),o.a.createElement("span",null,n.name)),o.a.createElement("div",{className:"info-line"},o.a.createElement("b",null,"Your Role: "),o.a.createElement("span",null,n.role)),o.a.createElement("div",{className:"info-line"},o.a.createElement("b",null,"Email Address: "),o.a.createElement("span",null,n.email))),o.a.createElement("div",{className:"actions"},o.a.createElement(Ze,{title:"START",onClick:r})))))}}])&&et(n.prototype,a),i&&et(n,i),t}();function at(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function it(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var ut=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,r;return t=e,r=[{key:"parseQuestionsFromJSON",value:function(e){var t=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(t){at(e,t,n[t])})}return e}({},e),n=t.schemaJSON,r=t.answersJSON,o=function(e){var t=JSON.parse(e);if(!t||!Array.isArray(t))throw R;return t}(n),a=function(e){if(!e)return{};var t=JSON.parse(e),n={};return t&&O.a.keys(t).forEach(function(e){n[O.a.toString(e)]=t[e]}),n}(r),i=function(e){var t="";return O.a.keys(e).forEach(function(n){var r=e[n];!t&&Boolean(O.a.get(r,"isCurrent",!1))&&(t=n)}),t}(a);return o.map(function(e,t){var n=O.a.toString(O.a.get(e,"ID","")),r=Boolean(O.a.get(a,"".concat(n,".hasAnswer"),!1)),o=Boolean(O.a.get(a,"".concat(n,".isApplicable"),!0)),u=!1;u=i?i===n:0===t;var s=null,c=null,l=r?O.a.get(a,"".concat(n,".inputs"),[]):[],f=r?O.a.get(a,"".concat(n,".actions"),[]):[],p=O.a.get(e,"AnswerInputFields",[]),b=O.a.get(e,"AnswerActionFields",[]);p&&Array.isArray(p)&&p.length>0&&(s=p.map(function(e){var t=O.a.toString(O.a.get(e,"InputType","")).toLowerCase();["text","email","textarea","date"].includes(t)||(t="text");var n=O.a.toString(O.a.get(e,"ID","")),r={id:n,label:O.a.toString(O.a.get(e,"Label","")),type:t,required:Boolean(O.a.get(e,"Required",!1)),minLength:Number.parseInt(O.a.toString(O.a.get(e,"MinLength",0))),placeholder:O.a.toString(O.a.get(e,"PlaceHolder","")),data:null};if(l&&Array.isArray(l)&&l.length>0){var o=O.a.head(l.filter(function(e){return e.id===n}));if(o){var a=O.a.toString(O.a.get(o,"data",null));a&&(r.data=a)}}return r})),b&&Array.isArray(b)&&b.length>0&&(c=b.map(function(e){var t=O.a.toString(O.a.get(e,"ActionType","")).toLowerCase();["continue","goto","message","finish"].includes(t)||(t="continue");var n=O.a.toString(O.a.get(e,"ID","")),r={id:n,label:O.a.toString(O.a.get(e,"Label","")),type:t,isChose:!1};"message"===t&&(r.message=O.a.toString(O.a.get(e,"Message",""))),"goto"===t&&(r.goto=O.a.toString(O.a.get(e,"GotoID",""))),"finish"===t&&(r.result=O.a.toString(O.a.get(e,"Result","")));var o=O.a.toString(O.a.get(e,"TaskID",""));if(r.taskID=o,f&&Array.isArray(f)&&f.length>0){var a=O.a.head(f.filter(function(e){return e.id===n}));if(a){var i=Boolean(O.a.get(a,"isChose",!1));r.isChose=i}}return r}));var m={id:n,title:O.a.toString(O.a.get(e,"Title","")),heading:O.a.toString(O.a.get(e,"Question","")),description:O.a.toString(O.a.get(e,"Description","")),type:"input"===O.a.toString(O.a.get(e,"AnswerFieldType","")).toLowerCase()?"input":"action",isCurrent:u,hasAnswer:r,isApplicable:o};return s&&(m.inputs=s),c&&(m.actions=c),m})}}],(n=null)&&it(t.prototype,n),r&&it(t,r),e}();function st(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var ct=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,r;return t=e,r=[{key:"parseUserFromJSON",value:function(e){var t="string"==typeof e?JSON.parse(e):e;return{id:O.a.toString(O.a.get(t,"ID")),name:"".concat(O.a.get(t,"FirstName")," ").concat(O.a.get(t,"Surname")),role:O.a.get(t,"UserRole"),email:O.a.get(t,"Email")}}}],(n=null)&&st(t.prototype,n),r&&st(t,r),e}();function lt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(t){ft(e,t,n[t])})}return e}function ft(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function pt(e,t,n,r,o,a,i){try{var u=e[a](i),s=u.value}catch(e){return void n(e)}u.done?t(s):Promise.resolve(s).then(r,o)}function bt(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var a=e.apply(t,n);function i(e){pt(a,r,o,i,u,"next",e)}function u(e){pt(a,r,o,i,u,"throw",e)}i(void 0)})}}function mt(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var yt=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,r;return t=e,n=null,r=[{key:"createInProgressSubmission",value:function(){var e=bt(regeneratorRuntime.mark(function e(t){var n,r,o,a,i,u;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=lt({},t),r=n.questionnaireID,o=n.csrfToken,a="\nmutation {\n createQuestionnaireSubmission(QuestionnaireID: ".concat(r,"){\n   UUID\n }\n}"),e.next=4,x.request({query:a,csrfToken:o});case 4:if(i=e.sent,u=O.a.get(i,"data.createQuestionnaireSubmission.UUID",null)){e.next=8;break}throw N;case 8:return e.abrupt("return",u);case 9:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"fetchStartData",value:function(){var e=bt(regeneratorRuntime.mark(function e(t){var n,r,o,a,i;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n="\nquery {\n  readCurrentMember {\n    ID\n    Email\n    FirstName\n    Surname\n    UserRole\n  }\n  readQuestionnaire(ID: ".concat(t,") {\n    ID\n    Name\n    KeyInformation\n  }\n  readSiteConfig {\n    Title\n  }\n}\n"),e.next=3,x.request({query:n});case 3:if(r=e.sent,o=O.a.get(r,"data.readCurrentMember.0",null),a=O.a.get(r,"data.readQuestionnaire",null),i=O.a.get(r,"data.readSiteConfig.0",null),o&&a&&i){e.next=9;break}throw N;case 9:return e.abrupt("return",{title:O.a.get(a,"Name",""),subtitle:O.a.get(i,"Title",""),questionnaireID:O.a.get(a,"ID",""),keyInformation:O.a.get(a,"KeyInformation",""),user:{id:O.a.get(o,"ID"),name:"".concat(O.a.get(o,"FirstName")," ").concat(O.a.get(o,"Surname")),role:O.a.get(o,"UserRole"),email:O.a.get(o,"Email")}});case 10:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"fetchSubmissionData",value:function(){var e=bt(regeneratorRuntime.mark(function e(t){var n,r,o,a,i;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n='\nquery {\n  readCurrentMember {\n    ID\n    Email\n    FirstName\n    Surname\n    UserRole\n  }\n  readQuestionnaireSubmission(UUID: "'.concat(t,'") {\n    ID\n    UUID\n    User {\n      ID\n    }\n    SubmitterName,\n    SubmitterRole,\n    SubmitterEmail,\n    QuestionnaireStatus\n    Questionnaire {\n      ID\n      Name\n    }\n    QuestionnaireData\n    AnswerData\n    CisoApprovalStatus\n    BusinessOwnerApprovalStatus\n    SecurityArchitectApprovalStatus\n    IsCurrentUserAnApprover\n    TaskSubmissions {\n      UUID\n      TaskName\n      Status\n    }\n  }\n  readSiteConfig {\n    Title\n  }\n}'),e.next=3,x.request({query:n});case 3:if(r=e.sent,o=O.a.get(r,"data.readCurrentMember.0",{}),a=O.a.get(r,"data.readQuestionnaireSubmission.0",{}),o&&a){e.next=8;break}throw N;case 8:return i={title:O.a.toString(O.a.get(a,"Questionnaire.Name","")),siteTitle:O.a.toString(O.a.get(r,"data.readSiteConfig.0.Title","")),user:ct.parseUserFromJSON(o),isCurrentUserApprover:Boolean(O.a.get(a,"IsCurrentUserAnApprover","")),submission:{questionnaireID:O.a.toString(O.a.get(a,"Questionnaire.ID","")),questionnaireTitle:O.a.toString(O.a.get(a,"Questionnaire.Name","")),submissionID:O.a.toString(O.a.get(a,"ID","")),submissionUUID:O.a.toString(O.a.get(a,"UUID","")),submitter:{id:O.a.toString(O.a.get(a,"User.ID")),name:O.a.toString(O.a.get(a,"SubmitterName","")),role:O.a.toString(O.a.get(a,"SubmitterRole","")),email:O.a.toString(O.a.get(a,"SubmitterEmail",""))},status:O.a.toString(O.a.get(a,"QuestionnaireStatus","")).toLowerCase().replace("-","_"),approvalStatus:{chiefInformationSecurityOfficer:O.a.toString(O.a.get(a,"CisoApprovalStatus","")),businessOwner:O.a.toString(O.a.get(a,"BusinessOwnerApprovalStatus","")),securityArchitect:O.a.toString(O.a.get(a,"SecurityArchitectApprovalStatus",""))},questions:ut.parseQuestionsFromJSON({schemaJSON:O.a.toString(O.a.get(a,"QuestionnaireData","")),answersJSON:O.a.toString(O.a.get(a,"AnswerData",""))}),taskSubmissions:O.a.toArray(O.a.get(a,"TaskSubmissions",[])).map(function(e){return{uuid:O.a.toString(O.a.get(e,"UUID","")),taskName:O.a.toString(O.a.get(e,"TaskName","")),status:O.a.toString(O.a.get(e,"Status",""))}})}},e.abrupt("return",i);case 10:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"updateSubmissionData",value:function(){var e=bt(regeneratorRuntime.mark(function e(t){var n,r,o,a,i,u,s,c;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=lt({},t),r=n.submissionID,o=n.questionID,a=n.answerData,i=n.csrfToken,u=window.btoa(JSON.stringify(a)),s='\nmutation {\n  updateQuestionnaireSubmission(ID: "'.concat(r,'", QuestionID: "').concat(o,'", AnswerData: "').concat(u,'") {\n    ID\n    AnswerData\n  }\n}'),e.next=5,x.request({query:s,csrfToken:i});case 5:if(c=e.sent,O.a.get(c,"data.updateQuestionnaireSubmission.AnswerData",null)){e.next=9;break}throw N;case 9:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"batchUpdateSubmissionData",value:function(){var e=bt(regeneratorRuntime.mark(function e(t){var n,r,o,a,i,u,s,c,l,f,p,b,m;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n=lt({},t),r=n.submissionID,o=n.questionIDList,a=n.answerDataList,i=n.csrfToken,o.length===a.length){e.next=3;break}throw N;case 3:for(u=[],s=0;s<o.length;s++)c=o[s],l=a[s],f=window.btoa(JSON.stringify(l)),p="\nupdateQuestion".concat(c,': updateQuestionnaireSubmission(ID: "').concat(r,'", QuestionID: "').concat(c,'", AnswerData: "').concat(f,'") {\n  ID\n  AnswerData\n}'),u.push(p);return b="\nmutation {\n  ".concat(u.join("\n"),"\n}\n"),e.next=8,x.request({query:b,csrfToken:i});case 8:if(m=e.sent,O.a.get(m,"data",null)){e.next=12;break}throw N;case 12:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"submitQuestionnaire",value:function(){var e=bt(regeneratorRuntime.mark(function e(t){var n,r,o,a,i,u,s;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=lt({},t),r=n.submissionID,o=n.csrfToken,a='\nmutation {\n updateQuestionnaireStatusToSubmitted(ID: "'.concat(r,'") {\n   QuestionnaireStatus\n   UUID\n }\n}'),e.next=4,x.request({query:a,csrfToken:o});case 4:if(i=e.sent,u=O.a.toString(O.a.get(i,"data.updateQuestionnaireStatusToSubmitted.QuestionnaireStatus",null)),s=O.a.toString(O.a.get(i,"data.updateQuestionnaireStatusToSubmitted.UUID",null)),u&&s){e.next=9;break}throw N;case 9:return e.abrupt("return",{uuid:s});case 10:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"submitQuestionnaireForApproval",value:function(){var e=bt(regeneratorRuntime.mark(function e(t){var n,r,o,a,i,u,s;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=lt({},t),r=n.submissionID,o=n.csrfToken,a='\nmutation {\n updateQuestionnaireStatusToWaitingForSecurityArchitectApproval(ID: "'.concat(r,'") {\n   QuestionnaireStatus\n   UUID\n }\n}'),e.next=4,x.request({query:a,csrfToken:o});case 4:if(i=e.sent,u=O.a.toString(O.a.get(i,"data.updateQuestionnaireStatusToWaitingForSecurityArchitectApproval.QuestionnaireStatus",null)),s=O.a.toString(O.a.get(i,"data.updateQuestionnaireStatusToWaitingForSecurityArchitectApproval.UUID",null)),u&&s){e.next=9;break}throw N;case 9:return e.abrupt("return",{uuid:s});case 10:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"approveQuestionnaireSubmission",value:function(){var e=bt(regeneratorRuntime.mark(function e(t){var n,r,o,a,i,u,s;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=lt({},t),r=n.submissionID,o=n.csrfToken,a='\nmutation {\n updateQuestionnaireStatusToApproved(ID: "'.concat(r,'") {\n   QuestionnaireStatus\n   UUID\n }\n}'),e.next=4,x.request({query:a,csrfToken:o});case 4:if(i=e.sent,u=O.a.toString(O.a.get(i,"data.updateQuestionnaireStatusToApproved.QuestionnaireStatus",null)),s=O.a.toString(O.a.get(i,"data.updateQuestionnaireStatusToApproved.UUID",null)),u&&s){e.next=9;break}throw N;case 9:return e.abrupt("return",{uuid:s});case 10:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"denyQuestionnaireSubmission",value:function(){var e=bt(regeneratorRuntime.mark(function e(t){var n,r,o,a,i,u,s;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=lt({},t),r=n.submissionID,o=n.csrfToken,a='\nmutation {\n updateQuestionnaireStatusToDenied(ID: "'.concat(r,'") {\n   QuestionnaireStatus\n   UUID\n }\n}'),e.next=4,x.request({query:a,csrfToken:o});case 4:if(i=e.sent,u=O.a.toString(O.a.get(i,"data.updateQuestionnaireStatusToDenied.QuestionnaireStatus",null)),s=O.a.toString(O.a.get(i,"data.updateQuestionnaireStatusToDenied.UUID",null)),u&&s){e.next=9;break}throw N;case 9:return e.abrupt("return",{uuid:s});case 10:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()}],n&&mt(t.prototype,n),r&&mt(t,r),e}();function dt(e,t,n,r,o,a,i){try{var u=e[a](i),s=u.value}catch(e){return void n(e)}u.done?t(s):Promise.resolve(s).then(r,o)}function ht(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var vt=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,r;return t=e,n=null,r=[{key:"getCSRFToken",value:function(){var e,t=(e=regeneratorRuntime.mark(function e(){var t,n,r,o;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=k.a.create({url:"/getCSRFToken",method:"get",headers:{"x-requested-with":"XMLHttpRequest"}}),e.next=3,t.request();case 3:if(n=e.sent,r=n.data,o=O.a.get(r,"CSRFToken",null)){e.next=8;break}throw new Error(r);case 8:return e.abrupt("return",o);case 9:case"end":return e.stop()}},e,this)}),function(){var t=this,n=arguments;return new Promise(function(r,o){var a=e.apply(t,n);function i(e){dt(a,r,o,i,u,"next",e)}function u(e){dt(a,r,o,i,u,"throw",e)}i(void 0)})});return function(){return t.apply(this,arguments)}}()}],n&&ht(t.prototype,n),r&&ht(t,r),e}();function gt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(t){St(e,t,n[t])})}return e}function St(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Ot(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var wt=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,r;return t=e,r=[{key:"transformFromFullQuestionToData",value:function(e){var t={isCurrent:e.isCurrent,hasAnswer:e.hasAnswer,isApplicable:e.isApplicable,answerType:e.type};return"input"===e.type&&Array.isArray(e.inputs)&&(t.inputs=e.inputs.map(function(e){var t=e.data;return t&&O.a.isString(t)&&(t=t.trim()),{id:e.id,data:t}})),"action"===e.type&&Array.isArray(e.actions)&&(t.actions=e.actions.map(function(e){return{id:e.id,isChose:e.isChose}})),t}},{key:"existsUnansweredQuestion",value:function(e){var t=!1;return e.forEach(function(e){var n=gt({},e),r=n.hasAnswer,o=n.isApplicable;!r&&o&&(t=!0)}),t}},{key:"existsIncompleteTaskSubmission",value:function(e){var t=!1;return e.forEach(function(e){"in_progress"===e.status&&(t=!0)}),t}},{key:"getDataUpdateIntent",value:function(e){var t=gt({},e),n=t.answeredQuestion,r=t.questions,o={currentIndex:r.findIndex(function(e){return e.id===n.id}),nonApplicableIndexes:[],targetIndex:0,complete:!1,terminate:!1,result:""};if("input"===n.type)return o.currentIndex===r.length-1?o.complete=!0:o.targetIndex=o.currentIndex+1,o;if("action"===n.type){if(!n.actions)throw new Error("This question does not have any action!");var a=n.actions.find(function(e){return e.isChose});if(!a)throw new Error("This question does not have any chosen action!");if("finish"===a.type){for(var i=o.currentIndex+1;i<r.length;i++)o.nonApplicableIndexes.push(i);o.result=a.result||"",o.complete=!0}if("message"===a.type&&(o.terminate=!0),"continue"===a.type&&(o.targetIndex=o.currentIndex+1),"goto"===a.type){var u=a.goto;if(o.targetIndex=r.findIndex(function(e){return e.id===u}),o.targetIndex<=o.currentIndex)throw new Error("The next question is not set correctly!");if(o.targetIndex-o.currentIndex>1)for(var s=o.currentIndex+1;s<o.targetIndex;)o.nonApplicableIndexes.push(s),s++}return o.currentIndex===r.length-1&&(o.complete=!0),o}throw new Error("Wrong question type!")}}],(n=null)&&Ot(t.prototype,n),r&&Ot(t,r),e}();function Et(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(t){jt(e,t,n[t])})}return e}function jt(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function kt(e,t,n,r,o,a,i){try{var u=e[a](i),s=u.value}catch(e){return void n(e)}u.done?t(s):Promise.resolve(s).then(r,o)}function Tt(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var a=e.apply(t,n);function i(e){kt(a,r,o,i,u,"next",e)}function u(e){kt(a,r,o,i,u,"throw",e)}i(void 0)})}}function _t(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var At=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,r;return t=e,n=null,r=[{key:"createTaskSubmissionsForQuestionnaireSubmission",value:function(){var e=Tt(regeneratorRuntime.mark(function e(t){var n,r,o,a,i,u,s,c;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n=Et({},t),r=n.questionnaireSubmission,o=n.csrfToken,a=[],r.questions.forEach(function(e){if("action"===e.type){var t=e.actions;if(!t||!Array.isArray(t))throw new Error("Invalid questionnaire data, please reload the questionnaire");t.forEach(function(e){if(e.isChose){var t=e.taskID;!t||Number.parseInt(t)<=0||a.push(t)}})}}),0!==(i=O.a.uniq(a)).length){e.next=6;break}return e.abrupt("return");case 6:return u=[],i.forEach(function(e){var t="\ncreateTaskSubmission".concat(e,': createTaskSubmission(TaskID: "').concat(e,'", QuestionnaireSubmissionID: "').concat(r.submissionID,'") {\n  ID\n  UUID\n}');u.push(t)}),s="\nmutation {\n  ".concat(u.join("\n"),"\n}"),e.next=11,x.request({query:s,csrfToken:o});case 11:if(c=e.sent,O.a.get(c,"data",null)){e.next=15;break}throw N;case 15:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"fetchTaskSubmissionState",value:function(){var e=Tt(regeneratorRuntime.mark(function e(t){var n,r,o,a,i;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n='\nquery {\n  readSiteConfig {\n    Title\n  }\n  readCurrentMember {\n    ID\n    Email\n    FirstName\n    Surname\n    UserRole\n  }\n  readTaskSubmission(UUID: "'.concat(t,'") {\n    ID\n    UUID\n    TaskName\n    Status\n    Result\n    QuestionnaireSubmission {\n      UUID\n    }\n    QuestionnaireData\n    AnswerData\n  }\n}'),e.next=3,x.request({query:n});case 3:if(r=e.sent,o=O.a.get(r,"data.readCurrentMember.0",{}),a=O.a.get(r,"data.readTaskSubmission.0",{}),o&&a){e.next=8;break}throw N;case 8:return i={siteTitle:O.a.toString(O.a.get(r,"data.readSiteConfig.0.Title","")),currentUser:ct.parseUserFromJSON(o),taskSubmission:{id:O.a.toString(O.a.get(a,"ID","")),uuid:O.a.toString(O.a.get(a,"UUID","")),taskName:O.a.toString(O.a.get(a,"TaskName","")),status:O.a.toString(O.a.get(a,"Status","")),result:O.a.toString(O.a.get(a,"Result","")),questionnaireSubmissionUUID:O.a.toString(O.a.get(a,"QuestionnaireSubmission.UUID","")),questions:ut.parseQuestionsFromJSON({schemaJSON:O.a.toString(O.a.get(a,"QuestionnaireData","")),answersJSON:O.a.toString(O.a.get(a,"AnswerData",""))})}},e.abrupt("return",i);case 10:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"batchUpdateTaskSubmissionData",value:function(){var e=Tt(regeneratorRuntime.mark(function e(t){var n,r,o,a,i,u,s,c,l,f,p,b,m;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n=Et({},t),r=n.uuid,o=n.questionIDList,a=n.answerDataList,i=n.csrfToken,o.length===a.length){e.next=3;break}throw N;case 3:for(u=[],s=0;s<o.length;s++)c=o[s],l=a[s],f=window.btoa(JSON.stringify(l)),p="\nupdateQuestion".concat(c,': updateTaskSubmission(UUID: "').concat(r,'", QuestionID: "').concat(c,'", AnswerData: "').concat(f,'") {\n  UUID\n  Status\n}'),u.push(p);return b="\nmutation {\n  ".concat(u.join("\n"),"\n}\n"),e.next=8,x.request({query:b,csrfToken:i});case 8:if(m=e.sent,O.a.get(m,"data",null)){e.next=12;break}throw N;case 12:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"completeTaskSubmission",value:function(){var e=Tt(regeneratorRuntime.mark(function e(t){var n,r,o,a,i,u;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=Et({},t),r=n.uuid,o=n.result,a=n.csrfToken,i='\nmutation {\n completeTaskSubmission(UUID: "'.concat(r,'", Result: "').concat(o,'") {\n   UUID\n   Status\n }\n}'),e.next=4,x.request({query:i,csrfToken:a});case 4:if(u=e.sent,O.a.get(u,"data.completeTaskSubmission.UUID",null)){e.next=7;break}throw N;case 7:return e.abrupt("return",{uuid:r});case 8:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"editTaskSubmission",value:function(){var e=Tt(regeneratorRuntime.mark(function e(t){var n,r,o,a,i;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=Et({},t),r=n.uuid,o=n.csrfToken,a='\nmutation {\n editTaskSubmission(UUID: "'.concat(r,'") {\n   UUID\n   Status\n }\n}'),e.next=4,x.request({query:a,csrfToken:o});case 4:if(i=e.sent,O.a.get(i,"data.editTaskSubmission.UUID",null)){e.next=7;break}throw N;case 7:return e.abrupt("return",{uuid:r});case 8:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()}],n&&_t(t.prototype,n),r&&_t(t,r),e}();function It(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function Dt(e,t,n,r,o,a,i){try{var u=e[a](i),s=u.value}catch(e){return void n(e)}u.done?t(s):Promise.resolve(s).then(r,o)}function Pt(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var a=e.apply(t,n);function i(e){Dt(a,r,o,i,u,"next",e)}function u(e){Dt(a,r,o,i,u,"throw",e)}i(void 0)})}}function xt(e){return function(){var t=Pt(regeneratorRuntime.mark(function t(n){var r;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,yt.fetchSubmissionData(e);case 3:r=t.sent,n((o=r,{type:l.QUESTIONNAIRE.LOAD_QUESTIONNAIRE_SUBMISSION_STATE,payload:o})),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),alert(t.t0);case 10:case"end":return t.stop()}var o},t,this,[[0,7]])}));return function(e){return t.apply(this,arguments)}}()}function Nt(e){return function(){var t=Pt(regeneratorRuntime.mark(function t(n,r){var o,a,i,u,s,c,f;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(o=r(),a=o.questionnaireState.submissionState.submission){t.next=4;break}return t.abrupt("return");case 4:return i=wt.getDataUpdateIntent({answeredQuestion:e,questions:a.questions}),u=i.currentIndex,s=i.targetIndex,c=i.nonApplicableIndexes,f=i.complete,c.length>0&&n({type:l.QUESTIONNAIRE.MARK_QUESTIONNAIRE_QUESTION_NOT_APPLICABLE,nonApplicableIndexes:c}),s>u&&n({type:l.QUESTIONNAIRE.MOVE_TO_ANOTHER_QUESTIONNAIRE_QUESTION,targetIndex:s}),t.next=9,Rt(r(),O.a.uniq([u].concat(It(c),[s])));case 9:f&&_.redirectToQuestionnaireReview(a.submissionUUID);case 10:case"end":return t.stop()}},t,this)}));return function(e,n){return t.apply(this,arguments)}}()}function Rt(e,t){return Ct.apply(this,arguments)}function Ct(){return(Ct=Pt(regeneratorRuntime.mark(function e(t,n){var r,o;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t.questionnaireState.submissionState.submission){e.next=3;break}return e.abrupt("return");case 3:return e.next=5,vt.getCSRFToken();case 5:return o=e.sent,e.prev=6,e.next=9,yt.batchUpdateSubmissionData({submissionID:r.submissionID,questionIDList:n.map(function(e){return r.questions[e].id}),answerDataList:n.map(function(e){return wt.transformFromFullQuestionToData(r.questions[e])}),csrfToken:o});case 9:e.next=14;break;case 11:e.prev=11,e.t0=e.catch(6),alert(e.t0.message);case 14:case"end":return e.stop()}},e,this,[[6,11]])}))).apply(this,arguments)}function Ut(e){return(Ut="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function qt(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Qt(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Lt(e,t){return!t||"object"!==Ut(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Mt(e){return(Mt=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Ft(e,t){return(Ft=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Bt=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),Lt(this,Mt(t).apply(this,arguments))}var n,a,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Ft(e,t)}(t,r["Component"]),n=t,(a=[{key:"render",value:function(){var e=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(t){qt(e,t,n[t])})}return e}({},this.props),t=e.title,n=e.subtitle;return o.a.createElement("header",{className:"Header"},o.a.createElement("div",{className:"top-banner"},o.a.createElement("img",{src:B.a,className:"logo"})),o.a.createElement("div",{className:"logout-wrapper"},o.a.createElement(pe,null)),o.a.createElement("h1",null,t),o.a.createElement("h2",null,n))}}])&&Qt(n.prototype,a),i&&Qt(n,i),t}();function Ht(e){return(Ht="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Kt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(t){zt(e,t,n[t])})}return e}function zt(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Jt(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Yt(e,t){return!t||"object"!==Ht(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Wt(e){return(Wt=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Vt(e,t){return(Vt=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Gt=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),Yt(this,Wt(t).apply(this,arguments))}var n,a,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Vt(e,t)}(t,r["Component"]),n=t,(a=[{key:"componentDidMount",value:function(){var e=Kt({},this.props),t=e.questionnaireID;(0,e.dispatchLoadQuestionnaireAction)(t)}},{key:"render",value:function(){var e=Kt({},this.props.startState),t=e.title,n=e.subtitle,r=e.keyInformation,a=e.user,i=Kt({},this.props),u=i.questionnaireID,s=i.dispatchCreateInProgressSubmissionAction;return a?o.a.createElement("div",{className:"StartContainer"},o.a.createElement(Bt,{title:t,subtitle:n}),o.a.createElement(ot,{keyInformation:r,user:a,onStartButtonClick:function(){s(u)}}),o.a.createElement(je,null)):null}}])&&Jt(n.prototype,a),i&&Jt(n,i),t}(),Xt=Object(c.b)(function(e){return{startState:e.questionnaireState.startState}},function(e,t){return{dispatchLoadQuestionnaireAction:function(t){e(function(e){return t=Pt(regeneratorRuntime.mark(function t(n){var r;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,yt.fetchStartData(e);case 3:r=t.sent,n((o=r,{type:l.QUESTIONNAIRE.LOAD_QUESTIONNAIRE_START_STATE,payload:o})),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),alert(t.t0);case 10:case"end":return t.stop()}var o},t,this,[[0,7]])})),function(e){return t.apply(this,arguments)};var t}(t))},dispatchCreateInProgressSubmissionAction:function(t){e(function(e){return t=Pt(regeneratorRuntime.mark(function t(n){var r,o;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,vt.getCSRFToken();case 3:return r=t.sent,t.next=6,yt.createInProgressSubmission({questionnaireID:e,csrfToken:r});case 6:o=t.sent,_.redirectToQuestionnaireEditing(o),t.next=13;break;case 10:t.prev=10,t.t0=t.catch(0),alert(t.t0);case 13:case"end":return t.stop()}},t,this,[[0,10]])})),function(e){return t.apply(this,arguments)};var t}(t))}}})(Gt),Zt=n(50),$t=n(294),en=n.n($t);function tn(e){return(tn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function nn(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(t){rn(e,t,n[t])})}return e}function rn(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function on(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function an(e,t){return!t||"object"!==tn(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function un(e){return(un=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function sn(e,t){return(sn=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var cn=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),an(this,un(t).apply(this,arguments))}var n,a,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&sn(e,t)}(t,r["Component"]),n=t,(a=[{key:"render",value:function(){var e=nn({},this.props),t=e.question,n=e.onItemClick;return o.a.createElement("div",{className:"LeftBarItem"},this.renderIcon(t),o.a.createElement("button",{className:"btn",disabled:!t.isApplicable,onClick:function(e){n(t)}},t.title))}},{key:"renderIcon",value:function(e){var t=nn({},e),n=t.isCurrent,r=t.hasAnswer,a=t.isApplicable;return n?o.a.createElement("img",{src:en.a}):a?r&&a?o.a.createElement("i",{className:"fas fa-check-circle success"}):o.a.createElement("i",{className:"fas fa-check-circle pending"}):o.a.createElement("i",{className:"fas fa-question-circle not-applicable"})}}])&&on(n.prototype,a),i&&on(n,i),t}();function ln(e){return(ln="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function fn(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function pn(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function bn(e,t){return!t||"object"!==ln(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function mn(e){return(mn=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function yn(e,t){return(yn=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var dn=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),bn(this,mn(t).apply(this,arguments))}var n,a,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&yn(e,t)}(t,r["Component"]),n=t,(a=[{key:"render",value:function(){var e=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(t){fn(e,t,n[t])})}return e}({},this.props),t=e.questions,n=e.onItemClick;return o.a.createElement("div",{className:"LeftBar"},o.a.createElement("div",{className:"title"},"QUESTIONS:"),o.a.createElement("div",null,t.map(function(e){return o.a.createElement(cn,{question:e,onItemClick:n,key:e.id})})))}}])&&pn(n.prototype,a),i&&pn(n,i),t}();function hn(e){return(hn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function vn(){return(vn=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function gn(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function Sn(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function On(e,t){return!t||"object"!==hn(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function wn(e){return(wn=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function En(e,t){return(En=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var jn=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),On(this,wn(t).apply(this,arguments))}var n,a,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&En(e,t)}(t,r["Component"]),n=t,(a=[{key:"render",value:function(){return o.a.createElement(He,vn({},this.props,{classes:["DarkButton"].concat(gn(this.props.classes))}))}}])&&Sn(n.prototype,a),i&&Sn(n,i),t}();jn.defaultProps={title:"",disabled:!1,classes:[],onClick:function(){}};var kn=jn,Tn=n(3),_n=n.n(Tn),An=n(302);n(470);function In(e){return(In="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Dn(){return(Dn=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function Pn(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(t){xn(e,t,n[t])})}return e}function xn(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Nn(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Rn(e,t){return!t||"object"!==In(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Cn(e){return(Cn=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Un(e,t){return(Un=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var qn=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),Rn(this,Cn(t).apply(this,arguments))}var n,a,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Un(e,t)}(t,r["Component"]),n=t,(a=[{key:"render",value:function(){var e=Pn({},this.props).question;return o.a.createElement("div",{className:"QuestionForm"},o.a.createElement("div",{className:"heading"},e.heading),o.a.createElement("div",{className:"description"},e.description),this.renderActions(e),this.renderInputsForm(e))}},{key:"renderActions",value:function(e){var t=Pn({},this.props).handleActionClick;if("action"===e.type){var n=O.a.get(e,"actions",null);if(!n)return null;var r=null,a=n.find(function(e){return e.isChose});return a&&a.message&&(r=o.a.createElement("div",{className:"message"},o.a.createElement("b",null,"Message:"),o.a.createElement("div",{dangerouslySetInnerHTML:{__html:a.message}}))),o.a.createElement("div",null,o.a.createElement("div",{className:"actions"},n.map(function(e,n){switch(n){case 0:return o.a.createElement(kn,{title:e.label,key:e.id,classes:["mr-3"],onClick:function(){t(e)}});default:return o.a.createElement(Ze,{title:e.label,key:e.id,classes:["mr-3"],onClick:function(){t(e)}})}})),r)}}},{key:"renderInputsForm",value:function(e){var t=Pn({},this.props).handleFormSubmit;if("input"===e.type){var n=O.a.get(e,"inputs",null);if(!n)return null;var r={};return n.forEach(function(e){r[e.id]=e.data||""}),o.a.createElement(Zt.c,{initialValues:r,validate:function(e){var t={};return n.forEach(function(n){var r=Pn({},n),o=r.id,a=r.type,i=r.required,u=r.label,s=r.minLength,c=O.a.get(e,o,null);!i||c?s>0&&c&&c.length<s?t[o]="- Please enter a value with at least ".concat(s," characters for ").concat(u):"email"!==a||/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,}$/i.test(c)?"date"===a&&(_n()(c,"YYYY-MM-DD").isValid()||(t[o]="- Invalid date")):t[o]="- Invalid email address":t[o]="- Please enter a value for ".concat(u)}),t},onSubmit:function(e,n){t(n,e)}},function(e){e.isSubmitting;var t=e.errors,r=e.touched,a=e.setFieldValue,i=[];return O.a.keys(t).filter(function(e){return Boolean(r[e])}).forEach(function(e){i[e]=t[e]}),o.a.createElement(Zt.b,null,o.a.createElement("table",null,o.a.createElement("tbody",null,n.map(function(e){var t=Pn({},e),n=t.id,r=t.type,u=t.label,s=t.placeholder,c=Boolean(O.a.get(i,n,null)),l=[];return c&&l.push("error"),["text","email"].includes(r)?o.a.createElement("tr",{key:n},o.a.createElement("td",{className:"label"},o.a.createElement("label",null,u)),o.a.createElement("td",null,o.a.createElement(Zt.a,{type:r,name:n,className:l.join(" "),placeholder:s}),c&&o.a.createElement("i",{className:"fas fa-exclamation-circle text-danger ml-1"}))):"date"===r?o.a.createElement("tr",{key:n},o.a.createElement("td",{className:"label"},o.a.createElement("label",null,u)),o.a.createElement("td",null,o.a.createElement(Zt.a,{name:n,render:function(e){var t=null,r=e.field.value||null;return r&&r.trim().length>0&&(t=_n()(r).toDate()),o.a.createElement(An.a,{dateFormat:"dd-MM-yyyy",className:l.join(" "),selected:t,onChange:function(e){if(e){var t=_n()(e).format("YYYY-MM-DD");a(n,t)}else a(n,null)},placeholderText:s,dropdownMode:"scroll",withPortal:!0})}}),c&&o.a.createElement("i",{className:"fas fa-exclamation-circle text-danger ml-1"}))):"textarea"===r?o.a.createElement("tr",{key:n},o.a.createElement("td",{className:"label"},o.a.createElement("label",null,u)),o.a.createElement("td",null,o.a.createElement(Zt.a,{name:n},function(e){var t=e.field;return o.a.createElement("textarea",Dn({},t,{className:l.join(" "),placeholder:s}))}),c&&o.a.createElement("i",{className:"fas fa-exclamation-circle text-danger ml-1"}))):null}),o.a.createElement("tr",null,o.a.createElement("td",null),o.a.createElement("td",null,o.a.createElement(kn,{title:"Continue"}))),o.a.createElement("tr",null,o.a.createElement("td",null),o.a.createElement("td",{className:"text-danger"},i&&O.a.keys(i).length>0&&o.a.createElement("div",null,"Whoops!",O.a.keys(i).map(function(e){return o.a.createElement("div",{className:"text-error",key:e},i[e])})))))))})}}}])&&Nn(n.prototype,a),i&&Nn(n,i),t}();function Qn(e){return(Qn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ln(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(t){Mn(e,t,n[t])})}return e}function Mn(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Fn(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Bn(e,t){return!t||"object"!==Qn(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Hn(e){return(Hn=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Kn(e,t){return(Kn=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var zn=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),Bn(this,Hn(t).apply(this,arguments))}var n,a,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Kn(e,t)}(t,r["Component"]),n=t,(a=[{key:"handleFormSubmit",value:function(e,t){var n=Ln({},this.props),r=n.questions,o=n.saveAnsweredQuestion,a=r.find(function(e){return!0===e.isCurrent});if(a){var i=Ln({},a);O.a.forIn(t,function(e,t){var n=i.inputs.findIndex(function(e){return e.id===t});n>=0&&O.a.set(i,"inputs.".concat(n,".data"),e)}),i.hasAnswer=!0,i.isApplicable=!0,o(i)}}},{key:"handleActionClick",value:function(e){var t=Ln({},this.props),n=t.questions,r=t.saveAnsweredQuestion,o=n.find(function(e){return!0===e.isCurrent});if(o){var a=Ln({},o);a.actions=a.actions.map(function(t){return t.isChose=t.id===e.id,t}),a.hasAnswer=!0,a.isApplicable=!0,r(a)}}},{key:"render",value:function(){var e=Ln({},this.props),t=e.questions,n=e.onLeftBarItemClick,r=t.find(function(e){return!0===e.isCurrent});return o.a.createElement("div",{className:"Questionnaire mx-1"},o.a.createElement("div",{className:"major"},o.a.createElement(dn,{questions:t,onItemClick:n}),r&&o.a.createElement(qn,{key:r.id,question:r,handleFormSubmit:this.handleFormSubmit.bind(this),handleActionClick:this.handleActionClick.bind(this)})))}}])&&Fn(n.prototype,a),i&&Fn(n,i),t}();function Jn(e){return(Jn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Yn(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(t){Wn(e,t,n[t])})}return e}function Wn(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Vn(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Gn(e,t){return!t||"object"!==Jn(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Xn(e){return(Xn=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Zn(e,t){return(Zn=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var $n=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),Gn(this,Xn(t).apply(this,arguments))}var n,a,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Zn(e,t)}(t,r["Component"]),n=t,(a=[{key:"componentDidMount",value:function(){var e=Yn({},this.props),t=e.submissionHash;(0,e.dispatchLoadSubmissionAction)(t)}},{key:"render",value:function(){var e=Yn({},this.props),t=e.dispatchSaveAnsweredQuestionAction,n=e.dispatchMoveToPreviousQuestionAction,r=Yn({},this.props.submissionState),a=r.title,i=r.siteTitle,u=r.user,s=r.submission;return u&&s?"in_progress"!==s.status?o.a.createElement("div",{className:"QuestionnaireContainer"},o.a.createElement(Bt,{title:a,subtitle:i}),o.a.createElement("div",{className:"Questionnaire"},o.a.createElement("h1",null,"The questionnaire is not in progress...")),o.a.createElement(je,null)):o.a.createElement("div",{className:"QuestionnaireContainer"},o.a.createElement(Bt,{title:a,subtitle:i}),o.a.createElement(zn,{questions:s.questions,saveAnsweredQuestion:function(e){t(e)},onLeftBarItemClick:function(e){n(e)}}),o.a.createElement(je,null)):null}}])&&Vn(n.prototype,a),i&&Vn(n,i),t}(),er=Object(c.b)(function(e){return{submissionState:e.questionnaireState.submissionState}},function(e,t){return{dispatchLoadSubmissionAction:function(t){e(xt(t))},dispatchSaveAnsweredQuestionAction:function(t){var n,r;e((n=t,r=Pt(regeneratorRuntime.mark(function e(t,r){var o,a,i,u,s;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t({type:l.QUESTIONNAIRE.PUT_DATA_IN_QUESTIONNAIRE_ANSWER,payload:n}),o=r(),a=O.a.get(o,"questionnaireState.submissionState.submission.submissionID",null)){e.next=5;break}throw new Error("Something is wrong, please reload the page");case 5:return e.next=7,vt.getCSRFToken();case 7:return i=e.sent,u=n.id,s=wt.transformFromFullQuestionToData(n),e.prev=10,e.next=13,yt.updateSubmissionData({submissionID:a,questionID:u,csrfToken:i,answerData:s});case 13:t(Nt(n)),e.next=19;break;case 16:e.prev=16,e.t0=e.catch(10),alert(e.t0.message);case 19:case"end":return e.stop()}},e,this,[[10,16]])})),function(e,t){return r.apply(this,arguments)}))},dispatchMoveToPreviousQuestionAction:function(t){e(function(e){return t=Pt(regeneratorRuntime.mark(function t(n,r){var o,a,i,u;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(o=r(),a=o.questionnaireState.submissionState.submission){t.next=4;break}return t.abrupt("return");case 4:if(!((i=a.questions.findIndex(function(e){return e.isCurrent}))<0)){t.next=7;break}throw new Error("Wrong state, please reload the questionnaire");case 7:if(e.isApplicable&&e.hasAnswer){t.next=9;break}return t.abrupt("return");case 9:if(!((u=a.questions.findIndex(function(t){return t.id===e.id}))<0)){t.next=12;break}return t.abrupt("return");case 12:return n({type:l.QUESTIONNAIRE.MOVE_TO_ANOTHER_QUESTIONNAIRE_QUESTION,targetIndex:u}),t.next=15,Rt(r(),[i,u]);case 15:case"end":return t.stop()}},t,this)})),function(e,n){return t.apply(this,arguments)};var t}(t))}}})($n),tr=n(60),nr=n.n(tr),rr=n(83),or=n.n(rr);function ar(e){return(ar="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ir(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ur(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function sr(e,t){return!t||"object"!==ar(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function cr(e){return(cr=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function lr(e,t){return(lr=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var fr=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),sr(this,cr(t).apply(this,arguments))}var n,a,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&lr(e,t)}(t,r["Component"]),n=t,(a=[{key:"render",value:function(){var e=this,t=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(t){ir(e,t,n[t])})}return e}({},this.props).questions;return o.a.createElement("div",{className:"AnswersPreview"},o.a.createElement("div",{className:"questions"},t.map(function(t,n,r){var a=e.renderData(t);return o.a.createElement("div",{className:"row",key:t.id},o.a.createElement("div",{className:"col"},o.a.createElement("b",null,n+1,". ",t.heading)),o.a.createElement("div",{className:"vertical-divider"}),o.a.createElement("div",{className:"col"},a))})))}},{key:"renderData",value:function(e){if(!e.isApplicable){return o.a.createElement("div",null,"(Not applicable)")}if(!e.hasAnswer){return o.a.createElement("div",null,"(Has no answer)")}if("input"===e.type&&e.inputs&&Array.isArray(e.inputs)&&e.inputs.length>0){var t=function(e){var t=e.data||"";return"date"===e.type&&(t=_n()(t).format("DD-MM-YYYY")),"textarea"===e.type&&(t="\n"+t),t};return e.inputs.length>1?o.a.createElement("div",null,e.inputs.map(function(e){var n=t(e);return o.a.createElement("div",{key:e.id},o.a.createElement("b",null,e.label)," ",o.a.createElement("span",null,"-")," ",o.a.createElement("span",null,n))})):o.a.createElement("div",null,t(e.inputs[0]).trim())}if("action"===e.type&&e.actions&&Array.isArray(e.actions)){var n=O.a.head(e.actions.filter(function(e){return e.isChose}));return o.a.createElement("div",null,n&&o.a.createElement("div",null,n.label))}}}])&&ur(n.prototype,a),i&&ur(n,i),t}();function pr(e){return(pr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function br(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function mr(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function yr(e,t){return!t||"object"!==pr(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function dr(e){return(dr=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function hr(e,t){return(hr=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var vr=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),yr(this,dr(t).apply(this,arguments))}var n,a,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&hr(e,t)}(t,r["Component"]),n=t,(a=[{key:"render",value:function(){var e=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(t){br(e,t,n[t])})}return e}({},this.props),t=e.submission,n=e.handleSubmitButtonClick,r=e.handlePDFDownloadButtonClick,a=e.handleEditAnswerButtonClick;return t?"in_progress"!==t.status?o.a.createElement("div",{className:"Review"},o.a.createElement("h3",null,"The questionnaire is not in progress...")):o.a.createElement("div",{className:"Review"},o.a.createElement(fr,{questions:t.questions}),o.a.createElement("div",{className:"buttons"},o.a.createElement(Ze,{title:"EDIT ANSWERS",iconImage:nr.a,classes:["button"],onClick:a}),o.a.createElement(Ze,{title:"DOWNLOAD PDF",iconImage:or.a,classes:["button"],onClick:r}),o.a.createElement(kn,{title:"SUBMIT QUESTIONNAIRE",classes:["button"],disabled:wt.existsUnansweredQuestion(t.questions),onClick:n}))):null}}])&&mr(n.prototype,a),i&&mr(n,i),t}(),gr=n(119),Sr=n.n(gr),Or=n(297),wr=n.n(Or);function Er(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var jr=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,r;return t=e,r=[{key:"toString",value:function(e){return e?"".concat(e):""}}],(n=null)&&Er(t.prototype,n),r&&Er(t,r),e}(),kr=n(298),Tr=n.n(kr),_r=n(299),Ar=n.n(_r);function Ir(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(t){Dr(e,t,n[t])})}return e}function Dr(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Pr(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function xr(e,t,n,r,o,a,i){try{var u=e[a](i),s=u.value}catch(e){return void n(e)}u.done?t(s):Promise.resolve(s).then(r,o)}function Nr(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var a=e.apply(t,n);function i(e){xr(a,r,o,i,u,"next",e)}function u(e){xr(a,r,o,i,u,"throw",e)}i(void 0)})}}function Rr(e){return Cr.apply(this,arguments)}function Cr(){return(Cr=Nr(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise(function(e){var n=new FileReader;n.addEventListener("load",function(t){e(t.target.result)}),n.readAsDataURL(t)}));case 1:case"end":return e.stop()}},e,this)}))).apply(this,arguments)}function Ur(e){return qr.apply(this,arguments)}function qr(){return(qr=Nr(regeneratorRuntime.mark(function e(t){var n,r,o;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(t);case 2:return n=e.sent,e.next=5,n.blob();case 5:return r=e.sent,e.next=8,Rr(r);case 8:return o=e.sent,e.abrupt("return",o);case 10:case"end":return e.stop()}},e,this)}))).apply(this,arguments)}var Qr=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,r;return t=e,n=null,r=[{key:"generatePDF",value:function(){var e=Nr(regeneratorRuntime.mark(function e(t){var n,r,o,a,i,u,s,c,l,f,p,b,m;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=Ir({},t),r=n.questions,o=n.submitter,a=n.questionnaireTitle,i=n.siteTitle,s=[],c={questionnaireTitle:{bold:!0,fontSize:(u=12)+4,color:"#004071",alignment:"center"},siteTitle:{bold:!0,fontSize:u,color:"#004071",alignment:"center"},sectionHeading:{bold:!0,fontSize:u+2,color:"#004071"},questionHeading:{bold:!0}},l={fontSize:u},f={title:"".concat(a," - ").concat(o.name)},p=wr.a.pdfMake.vfs,Sr.a.vfs=p,e.next=10,Ur(Tr.a);case 10:return b=e.sent,s.push({image:b,width:500,margin:[0,0,0,u]}),s.push({text:a,style:"questionnaireTitle",margin:[0,0,0,u/2]}),s.push({text:i,style:"siteTitle",margin:[0,0,0,2*u]}),s.push({text:"Submitted by:",style:"sectionHeading",margin:[0,0,0,u]}),s.push({text:"Name: ".concat(o.name),style:"questionHeading",margin:[0,0,0,u/2]}),s.push({text:"Role: ".concat(o.role),margin:[0,0,0,u/2]}),s.push({text:"Email: ".concat(o.email),margin:[0,0,0,2*u]}),s.push({text:"Responses",style:"sectionHeading",margin:[0,0,0,u]}),r.forEach(function(e,t){if(s.push({text:"".concat(t+1,". ").concat(e.heading),style:"questionHeading",margin:[0,0,0,u/2]}),e.isApplicable)if(e.hasAnswer){if("input"===e.type&&e.inputs&&Array.isArray(e.inputs)&&e.inputs.length>0){var n=function(e){var t=e.data||"";return"date"===e.type&&(t=_n()(t).format("DD-MM-YYYY")),"textarea"===e.type&&(t="\n"+t),t};return e.inputs.length>1?void e.inputs.forEach(function(e,t,r){var o=t===r.length-1;s.push({text:"".concat(e.label,": ").concat(jr.toString(n(e))),margin:[0,0,0,o?u:parseInt("".concat(u/3))]})}):void s.push({text:n(e.inputs[0]).trim(),margin:[0,0,0,u]})}if("action"===e.type&&e.actions&&Array.isArray(e.actions)){var r=O.a.head(e.actions.filter(function(e){return e.isChose}));s.push({text:r.label,margin:[0,0,0,u]})}}else s.push({text:"(Has no answer)",margin:[0,0,0,u]});else s.push({text:"(Not applicable)",margin:[0,0,0,u]})}),e.next=22,Ur(Ar.a);case 22:return m=e.sent,s.push({image:m,width:500,margin:[0,0,0,u]}),e.prev=24,e.next=27,Sr.a.createPdf({info:f,content:s,styles:c,defaultStyle:l}).download(f.title);case 27:e.next=32;break;case 29:e.prev=29,e.t0=e.catch(24),alert("Can't download PDF, please disable AdBlock!");case 32:case"end":return e.stop()}},e,this,[[24,29]])}));return function(t){return e.apply(this,arguments)}}()},{key:"blobToDataURL",value:function(){var e=Nr(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise(function(e){var n=new FileReader;n.onload=function(t){e(t.target.result)},n.readAsDataURL(t)}));case 1:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()}],n&&Pr(t.prototype,n),r&&Pr(t,r),e}();function Lr(e){return(Lr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Mr(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(t){Fr(e,t,n[t])})}return e}function Fr(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Br(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Hr(e,t){return!t||"object"!==Lr(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Kr(e){return(Kr=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function zr(e,t){return(zr=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Jr=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),Hr(this,Kr(t).apply(this,arguments))}var n,a,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&zr(e,t)}(t,r["Component"]),n=t,(a=[{key:"componentDidMount",value:function(){var e=Mr({},this.props),t=e.submissionHash;(0,e.dispatchLoadSubmissionAction)(t)}},{key:"render",value:function(){var e=Mr({},this.props.submissionState),t=e.title,n=e.siteTitle,r=e.user,a=e.submission;return r?o.a.createElement("div",{className:"ReviewContainer"},o.a.createElement(Bt,{title:t,subtitle:"Review Responses"}),o.a.createElement(vr,{siteTitle:n,submission:a,handleSubmitButtonClick:this.handleSubmitButtonClick.bind(this),handlePDFDownloadButtonClick:this.handlePDFDownloadButtonClick.bind(this),handleEditAnswerButtonClick:this.handleEditAnswerButtonClick.bind(this)}),o.a.createElement(je,null),";"):null}},{key:"handleSubmitButtonClick",value:function(){this.props.dispatchSubmitQuestionnaire()}},{key:"handlePDFDownloadButtonClick",value:function(){var e=Mr({},this.props.submissionState),t=e.submission,n=e.siteTitle;t&&Qr.generatePDF({questions:t.questions,submitter:t.submitter,questionnaireTitle:t.questionnaireTitle,siteTitle:n})}},{key:"handleEditAnswerButtonClick",value:function(){var e=O.a.get(this.props.submissionState,"submission.submissionUUID","");e&&_.redirectToQuestionnaireEditing(e)}}])&&Br(n.prototype,a),i&&Br(n,i),t}(),Yr=Object(c.b)(function(e){return{submissionState:e.questionnaireState.submissionState}},function(e,t){return{dispatchLoadSubmissionAction:function(t){e(xt(t))},dispatchSubmitQuestionnaire:function(){var t;e((t=Pt(regeneratorRuntime.mark(function e(t,n){var r,o,a,i,u,s;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,r=n(),o=r.questionnaireState.submissionState,a=o.submission){e.next=6;break}return e.abrupt("return");case 6:if(!wt.existsUnansweredQuestion(a.questions)){e.next=9;break}return alert("There are questions not answered properly, please check your answers"),e.abrupt("return");case 9:return e.next=11,vt.getCSRFToken();case 11:return i=e.sent,e.next=14,yt.submitQuestionnaire({submissionID:a.submissionID,csrfToken:i});case 14:return u=e.sent,s=u.uuid,e.next=18,At.createTaskSubmissionsForQuestionnaireSubmission({questionnaireSubmission:a,csrfToken:i});case 18:_.redirectToQuestionnaireSummary(s),e.next=24;break;case 21:e.prev=21,e.t0=e.catch(0),alert(e.t0);case 24:case"end":return e.stop()}},e,this,[[0,21]])})),function(e,n){return t.apply(this,arguments)}))}}})(Jr);function Wr(e){return(Wr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Vr(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(t){Gr(e,t,n[t])})}return e}function Gr(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Xr(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Zr(e,t){return!t||"object"!==Wr(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function $r(e){return($r=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function eo(e,t){return(eo=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var to=function(e){return e.split("_").map(function(e){return e.charAt(0).toUpperCase()+e.slice(1)}).join(" ")},no=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),Zr(this,$r(t).apply(this,arguments))}var n,a,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&eo(e,t)}(t,r["Component"]),n=t,(a=[{key:"render",value:function(){var e=Vr({},this.props).submission;return e?"in_progress"===e.status?o.a.createElement("div",{className:"Summary"},o.a.createElement("h3",null,"Submission has not been complete...")):o.a.createElement("div",{className:"Summary"},this.renderSubmitterInfo(e),this.renderTasks(e),this.renderApprovals(e),this.renderButtons(e)):null}},{key:"renderSubmitterInfo",value:function(e){var t=e.submitter;return o.a.createElement("div",{className:"request-info"},o.a.createElement("h3",null,"Request Information"),o.a.createElement("div",null,o.a.createElement("b",null,"Submitted by:")," ",t.name),o.a.createElement("div",null,o.a.createElement("b",null,"Role:")," ",t.role),o.a.createElement("div",null,o.a.createElement("b",null,"Email:")," ",t.email),o.a.createElement("div",null,o.a.createElement("b",null,"Status:")," ",to(e.status)))}},{key:"renderTasks",value:function(e){var t=e.taskSubmissions;return 0===t.length?null:o.a.createElement("div",{className:"tasks"},o.a.createElement("h3",null,"Tasks"),t.map(function(e){var t=e.uuid,n=e.taskName,r=e.status;return o.a.createElement("div",{key:t},o.a.createElement(H.a,{to:_.getTaskSubmissionURL(t)},n," (",to(r),")"))}))}},{key:"renderButtons",value:function(e){var t=Vr({},this.props),n=t.viewAs,r=t.handleSubmitButtonClick,a=t.handlePDFDownloadButtonClick,i=t.handleApproveButtonClick,u=t.handleDenyButtonClick,s=null,c=null,l=o.a.createElement(Ze,{title:"DOWNLOAD PDF OF ANSWERS",iconImage:or.a,classes:["button"],onClick:a}),f=null,p=null;return"approved"===e.status||"denied"===e.status?o.a.createElement("div",{className:"buttons"},o.a.createElement("div",null,s,l,c),o.a.createElement("div",null,f,p)):("submitter"===n&&(s=o.a.createElement(Ze,{title:"EDIT ANSWERS",iconImage:nr.a,classes:["button"],disabled:!0}),"submitted"===e.status&&(c=o.a.createElement(kn,{title:"SEND FOR APPROVAL",classes:["button"],disabled:wt.existsIncompleteTaskSubmission(e.taskSubmissions),onClick:r}))),"approver"===n&&(f=o.a.createElement(kn,{title:"APPROVE",classes:["button"],onClick:i}),p=o.a.createElement(Ze,{title:"DENY",classes:["button"],onClick:u})),o.a.createElement("div",{className:"buttons"},o.a.createElement("div",null,s,l,c),o.a.createElement("div",null,f,p)))}},{key:"renderApprovals",value:function(e){if("in_progress"===e.status||"submitted"===e.status)return null;var t=e.approvalStatus;return o.a.createElement("div",{className:"approvals"},o.a.createElement("h3",null,"Approvals"),o.a.createElement("div",null,o.a.createElement("b",null,"Security Architect")," - ",to(t.securityArchitect)),o.a.createElement("div",null,o.a.createElement("b",null,"Chief Information Security Officer")," - ",to(t.chiefInformationSecurityOfficer)),o.a.createElement("div",null,o.a.createElement("b",null,"Business Owner")," - ",to(t.businessOwner)))}}])&&Xr(n.prototype,a),i&&Xr(n,i),t}();function ro(e){return(ro="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function oo(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(t){ao(e,t,n[t])})}return e}function ao(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function io(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function uo(e,t){return!t||"object"!==ro(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function so(e){return(so=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function co(e,t){return(co=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var lo=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),uo(this,so(t).apply(this,arguments))}var n,a,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&co(e,t)}(t,r["Component"]),n=t,(a=[{key:"componentDidMount",value:function(){var e=oo({},this.props),t=e.submissionHash;(0,e.dispatchLoadSubmissionAction)(t)}},{key:"render",value:function(){var e=oo({},this.props.submissionState),t=e.title,n=e.user,r=e.submission,a=e.isCurrentUserApprover;if(!n||!r)return null;var i="others";do{if(n.id===r.submitter.id){i="submitter";break}if(a){i="approver";break}}while(0);return o.a.createElement("div",{className:"SummaryContainer"},o.a.createElement(Bt,{title:t,subtitle:"Summary"}),o.a.createElement(no,{submission:r,handlePDFDownloadButtonClick:this.handlePDFDownloadButtonClick.bind(this),handleSubmitButtonClick:this.handleSubmitButtonClick.bind(this),handleApproveButtonClick:this.handleApproveButtonClick.bind(this),handleDenyButtonClick:this.handleDenyButtonClick.bind(this),viewAs:i}),o.a.createElement(je,null))}},{key:"handlePDFDownloadButtonClick",value:function(){var e=oo({},this.props.submissionState),t=e.submission,n=e.siteTitle;t&&Qr.generatePDF({questions:t.questions,submitter:t.submitter,questionnaireTitle:t.questionnaireTitle,siteTitle:n})}},{key:"handleSubmitButtonClick",value:function(){var e=oo({},this.props.submissionState),t=e.user,n=e.submission;t&&n&&this.props.dispatchSubmitForApprovalAction(n.submissionID)}},{key:"handleApproveButtonClick",value:function(){var e=oo({},this.props.submissionState),t=e.user,n=e.submission;t&&n&&this.props.dispatchApproveSubmissionAction(n.submissionID)}},{key:"handleDenyButtonClick",value:function(){var e=oo({},this.props.submissionState),t=e.user,n=e.submission;t&&n&&this.props.dispatchDenySubmissionAction(n.submissionID)}}])&&io(n.prototype,a),i&&io(n,i),t}(),fo=Object(c.b)(function(e){return{submissionState:e.questionnaireState.submissionState}},function(e,t){return{dispatchLoadSubmissionAction:function(t){e(xt(t))},dispatchSubmitForApprovalAction:function(t){e(function(e){return t=Pt(regeneratorRuntime.mark(function t(n,r){var o,a,i;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,vt.getCSRFToken();case 3:return o=t.sent,t.next=6,yt.submitQuestionnaireForApproval({submissionID:e,csrfToken:o});case 6:a=t.sent,i=a.uuid,n(xt(i)),t.next=14;break;case 11:t.prev=11,t.t0=t.catch(0),alert(t.t0);case 14:case"end":return t.stop()}},t,this,[[0,11]])})),function(e,n){return t.apply(this,arguments)};var t}(t))},dispatchApproveSubmissionAction:function(t){e(function(e){return t=Pt(regeneratorRuntime.mark(function t(n,r){var o,a,i;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,vt.getCSRFToken();case 3:return o=t.sent,t.next=6,yt.approveQuestionnaireSubmission({submissionID:e,csrfToken:o});case 6:a=t.sent,i=a.uuid,n(xt(i)),t.next=14;break;case 11:t.prev=11,t.t0=t.catch(0),alert(t.t0);case 14:case"end":return t.stop()}},t,this,[[0,11]])})),function(e,n){return t.apply(this,arguments)};var t}(t))},dispatchDenySubmissionAction:function(t){e(function(e){return t=Pt(regeneratorRuntime.mark(function t(n,r){var o,a,i;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,vt.getCSRFToken();case 3:return o=t.sent,t.next=6,yt.denyQuestionnaireSubmission({submissionID:e,csrfToken:o});case 6:a=t.sent,i=a.uuid,n(xt(i)),t.next=14;break;case 11:t.prev=11,t.t0=t.catch(0),alert(t.t0);case 14:case"end":return t.stop()}},t,this,[[0,11]])})),function(e,n){return t.apply(this,arguments)};var t}(t))}}})(lo);function po(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function bo(e,t,n,r,o,a,i){try{var u=e[a](i),s=u.value}catch(e){return void n(e)}u.done?t(s):Promise.resolve(s).then(r,o)}function mo(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var a=e.apply(t,n);function i(e){bo(a,r,o,i,u,"next",e)}function u(e){bo(a,r,o,i,u,"throw",e)}i(void 0)})}}function yo(e){return function(){var t=mo(regeneratorRuntime.mark(function t(n){var r;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,At.fetchTaskSubmissionState(e);case 3:r=t.sent,n({type:l.TASK.LOAD_TASK_SUBMISSION_STATE,payload:r}),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),alert(t.t0);case 10:case"end":return t.stop()}},t,this,[[0,7]])}));return function(e){return t.apply(this,arguments)}}()}function ho(e,t){return vo.apply(this,arguments)}function vo(){return(vo=mo(regeneratorRuntime.mark(function e(t,n){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.t0=At,e.t1=t.uuid,e.t2=n.map(function(e){return t.questions[e].id}),e.t3=n.map(function(e){return wt.transformFromFullQuestionToData(t.questions[e])}),e.next=7,vt.getCSRFToken();case 7:return e.t4=e.sent,e.t5={uuid:e.t1,questionIDList:e.t2,answerDataList:e.t3,csrfToken:e.t4},e.next=11,e.t0.batchUpdateTaskSubmissionData.call(e.t0,e.t5);case 11:e.next=16;break;case 13:e.prev=13,e.t6=e.catch(0),alert(e.t6.message);case 16:case"end":return e.stop()}},e,this,[[0,13]])}))).apply(this,arguments)}function go(e){return(go="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function So(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Oo(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function wo(e,t){return!t||"object"!==go(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Eo(e){return(Eo=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function jo(e,t){return(jo=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var ko=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),wo(this,Eo(t).apply(this,arguments))}var n,a,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&jo(e,t)}(t,r["Component"]),n=t,(a=[{key:"render",value:function(){var e=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(t){So(e,t,n[t])})}return e}({},this.props),t=e.taskSubmission,n=e.saveAnsweredQuestion,r=e.moveToPreviousQuestion,a=e.editAnswers,i=null;"in_progress"===t.status&&(i=o.a.createElement(zn,{questions:t.questions,saveAnsweredQuestion:n,onLeftBarItemClick:r})),"complete"===t.status&&(i=o.a.createElement(fr,{questions:t.questions}));var u=t.questionnaireSubmissionUUID?o.a.createElement(kn,{title:"BACK TO QUESTIONNAIRE SUMMARY",onClick:function(){_.redirectToQuestionnaireSummary(t.questionnaireSubmissionUUID)}}):null,s="complete"===t.status?o.a.createElement(Ze,{title:"EDIT ANSWERS",onClick:a,iconImage:nr.a}):null,c=t.result?o.a.createElement("div",{className:"result"},o.a.createElement("h3",null,"Result:"),o.a.createElement("div",null,t.result)):null;return o.a.createElement("div",{className:"TaskSubmission"},c,i,o.a.createElement("div",{className:"buttons"},s,u))}}])&&Oo(n.prototype,a),i&&Oo(n,i),t}();function To(e){return(To="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(t){Ao(e,t,n[t])})}return e}function Ao(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Io(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Do(e,t){return!t||"object"!==To(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Po(e){return(Po=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function xo(e,t){return(xo=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var No=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),Do(this,Po(t).apply(this,arguments))}var n,a,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&xo(e,t)}(t,r["Component"]),n=t,(a=[{key:"componentDidMount",value:function(){var e=_o({},this.props),t=e.uuid;(0,e.dispatchLoadTaskSubmissionAction)(t)}},{key:"render",value:function(){var e=_o({},this.props),t=e.dispatchSaveAnsweredQuestionAction,n=e.dispatchMoveToPreviousQuestionAction,r=e.dispatchEditAnswersAction,a=_o({},this.props.state),i=a.siteTitle,u=a.currentUser,s=a.taskSubmission;return u&&s?o.a.createElement("div",{className:"TaskSubmissionContainer"},o.a.createElement(Bt,{title:s.taskName,subtitle:i}),o.a.createElement(ko,{taskSubmission:s,saveAnsweredQuestion:t,moveToPreviousQuestion:n,editAnswers:r}),o.a.createElement(je,null)):null}}])&&Io(n.prototype,a),i&&Io(n,i),t}(),Ro=Object(c.b)(function(e){return{state:e.taskSubmissionState}},function(e,t){return{dispatchLoadTaskSubmissionAction:function(t){e(yo(t))},dispatchSaveAnsweredQuestionAction:function(t){e(function(e){return t=mo(regeneratorRuntime.mark(function t(n,r){var o,a,i,u,s,c,f,p,b;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(o=O.a.get(r(),"taskSubmissionState.taskSubmission")){t.next=3;break}return t.abrupt("return");case 3:return n({type:l.TASK.PUT_DATA_IN_TASK_SUBMISSION,payload:e}),t.t0=At,t.t1=o.uuid,t.t2=[e.id],t.t3=[wt.transformFromFullQuestionToData(e)],t.next=10,vt.getCSRFToken();case 10:return t.t4=t.sent,t.t5={uuid:t.t1,questionIDList:t.t2,answerDataList:t.t3,csrfToken:t.t4},t.next=14,t.t0.batchUpdateTaskSubmissionData.call(t.t0,t.t5);case 14:return a=wt.getDataUpdateIntent({answeredQuestion:e,questions:o.questions}),i=a.currentIndex,u=a.nonApplicableIndexes,s=a.targetIndex,c=a.complete,a.terminate,f=a.result,u.length>0&&n({type:l.TASK.MARK_TASK_QUESTION_NOT_APPLICABLE,payload:u}),s>i&&n({type:l.TASK.MOVE_TO_ANOTHER_TASK_QUESTION,payload:{currentIndex:i,targetIndex:s}}),t.next=19,ho(o,O.a.uniq([i].concat(po(u),[s])));case 19:if(!c){t.next=32;break}return t.t6=At,t.t7=o.uuid,t.t8=f,t.next=25,vt.getCSRFToken();case 25:return t.t9=t.sent,t.t10={uuid:t.t7,result:t.t8,csrfToken:t.t9},t.next=29,t.t6.completeTaskSubmission.call(t.t6,t.t10);case 29:p=t.sent,b=p.uuid,n(yo(b));case 32:case"end":return t.stop()}},t,this)})),function(e,n){return t.apply(this,arguments)};var t}(t))},dispatchMoveToPreviousQuestionAction:function(t){e(function(e){return t=mo(regeneratorRuntime.mark(function t(n,r){var o,a,i,u;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(o=O.a.get(r(),"taskSubmissionState.taskSubmission",null)){t.next=3;break}return t.abrupt("return");case 3:if(a=o.questions,!((i=a.findIndex(function(e){return e.isCurrent}))<0)){t.next=7;break}throw new Error("Wrong state, please reload the task");case 7:if(e.isApplicable&&e.hasAnswer){t.next=9;break}return t.abrupt("return");case 9:if(!((u=a.findIndex(function(t){return t.id===e.id}))<0)){t.next=12;break}return t.abrupt("return");case 12:return n({type:l.TASK.MOVE_TO_ANOTHER_TASK_QUESTION,payload:{currentIndex:i,targetIndex:u}}),t.next=15,ho(o,O.a.uniq([i,u]));case 15:case"end":return t.stop()}},t,this)})),function(e,n){return t.apply(this,arguments)};var t}(t))},dispatchEditAnswersAction:function(){var t;e((t=mo(regeneratorRuntime.mark(function e(t,n){var r,o,a;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(r=O.a.get(n(),"taskSubmissionState.taskSubmission",null)){e.next=3;break}return e.abrupt("return");case 3:return e.t0=At,e.t1=r.uuid,e.next=7,vt.getCSRFToken();case 7:return e.t2=e.sent,e.t3={uuid:e.t1,csrfToken:e.t2},e.next=11,e.t0.editTaskSubmission.call(e.t0,e.t3);case 11:o=e.sent,a=o.uuid,t(yo(a));case 14:case"end":return e.stop()}},e,this)})),function(e,n){return t.apply(this,arguments)}))}}})(No);function Co(e){return(Co="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Uo(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function qo(e,t){return!t||"object"!==Co(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Qo(e){return(Qo=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Lo(e,t){return(Lo=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Mo=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),qo(this,Qo(t).apply(this,arguments))}var n,a,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Lo(e,t)}(t,r["Component"]),n=t,(a=[{key:"render",value:function(){return o.a.createElement("div",null,o.a.createElement("main",null,o.a.createElement(u.a,null,o.a.createElement(s.a,{exact:!0,path:"/"},function(){return o.a.createElement(Ne,null)}),o.a.createElement(s.a,{path:"/questionnaire/start/:id"},function(e){var t=e.match;return o.a.createElement("div",{className:"gray-bg"},o.a.createElement(Xt,{questionnaireID:t.params.id}))}),o.a.createElement(s.a,{path:"/questionnaire/submission/:hash"},function(e){var t=e.match;return o.a.createElement("div",{className:"gray-bg"},o.a.createElement(er,{submissionHash:t.params.hash}))}),o.a.createElement(s.a,{path:"/questionnaire/review/:hash"},function(e){var t=e.match;return o.a.createElement("div",{className:"gray-bg"},o.a.createElement(Yr,{submissionHash:t.params.hash}))}),o.a.createElement(s.a,{path:"/questionnaire/summary/:hash"},function(e){var t=e.match;return o.a.createElement("div",{className:"gray-bg"},o.a.createElement(fo,{submissionHash:t.params.hash}))}),o.a.createElement(s.a,{path:"/task/submission/:uuid"},function(e){var t=e.match;return o.a.createElement("div",{className:"gray-bg"},o.a.createElement(Ro,{uuid:t.params.uuid}))}))))}}])&&Uo(n.prototype,a),i&&Uo(n,i),t}(),Fo=n(482),Bo=n(16),Ho=(n(477),{title:"",subtitle:"",pillars:[]});function Ko(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(t){zo(e,t,n[t])})}return e}function zo(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Jo={title:"",subtitle:"",keyInformation:"",questionnaireID:"",user:null},Yo={title:"",siteTitle:"",user:null,submission:null,isCurrentUserApprover:!1};var Wo=Object(Bo.combineReducers)({startState:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Jo,t=arguments.length>1?arguments[1]:void 0;return t.type===l.QUESTIONNAIRE.LOAD_QUESTIONNAIRE_START_STATE?t.payload:e},submissionState:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Yo,t=arguments.length>1?arguments[1]:void 0;if(t.type===l.QUESTIONNAIRE.LOAD_QUESTIONNAIRE_SUBMISSION_STATE)return t.payload;if(t.type===l.QUESTIONNAIRE.PUT_DATA_IN_QUESTIONNAIRE_ANSWER){if(!e.submission)return e;var n=t.payload,r=e.submission.questions.findIndex(function(e){return e.id===n.id});if(r<0)return e;var o=Ko({},e);return O.a.set(o,"submission.questions.".concat(r),n),o}if(t.type===l.QUESTIONNAIRE.MOVE_TO_ANOTHER_QUESTIONNAIRE_QUESTION){var a=e.submission;if(!a)return e;var i=Ko({},t).targetIndex,u=a.questions.findIndex(function(e){return e.isCurrent});if(i<0||i>=a.questions.length)return e;var s=Ko({},e);return O.a.set(s,"submission.questions.".concat(u,".isCurrent"),!1),O.a.set(s,"submission.questions.".concat(i,".isCurrent"),!0),s}if(t.type===l.QUESTIONNAIRE.MARK_QUESTIONNAIRE_QUESTION_NOT_APPLICABLE){var c=e.submission;if(!c)return e;var f=Ko({},e),p=t.nonApplicableIndexes;return p&&p.length>0&&p.forEach(function(e){var t=c.questions[e];t.isApplicable=!1,O.a.set(f,"submission.questions.".concat(e),t)}),f}return e}});function Vo(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(t){Go(e,t,n[t])})}return e}function Go(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Xo={siteTitle:"",currentUser:null,taskSubmission:null};var Zo=Object(Bo.combineReducers)({homeState:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ho,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case l.HOME.LOAD_HOME_STATE_STARTED:case l.HOME.LOAD_HOME_STATE_FAILED:return e;case l.HOME.LOAD_HOME_STATE_FINISHED:return t.payload;default:return e}},questionnaireState:Wo,taskSubmissionState:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Xo,t=arguments.length>1?arguments[1]:void 0,n=e.taskSubmission;if(t.type===l.TASK.LOAD_TASK_SUBMISSION_STATE)return t.payload;if(t.type===l.TASK.PUT_DATA_IN_TASK_SUBMISSION){if(!n)return e;var r=t.payload,o=n.questions.findIndex(function(e){return e.id===r.id});if(o<0)return e;var a=Vo({},e);return O.a.set(a,"taskSubmission.questions.".concat(o),r),a}if(t.type===l.TASK.MARK_TASK_QUESTION_NOT_APPLICABLE){if(!n)return e;var i=Vo({},e),u=t.payload;return u&&u.length>0&&u.forEach(function(e){var t=n.questions[e];t.isApplicable=!1,O.a.set(i,"taskSubmission.questions.".concat(e),t)}),i}if(t.type===l.TASK.MOVE_TO_ANOTHER_TASK_QUESTION){if(!n)return e;var s=Vo({},t.payload),c=s.currentIndex,f=s.targetIndex;if(f<0||f>=n.questions.length)return e;var p=Vo({},e);return O.a.set(p,"taskSubmission.questions.".concat(c,".isCurrent"),!1),O.a.set(p,"taskSubmission.questions.".concat(f,".isCurrent"),!0),p}return e}}),$o=n(301),ea=[f.a];var ta=Object(Bo.createStore)(Zo,Object($o.composeWithDevTools)(Bo.applyMiddleware.apply(void 0,ea)));i.a.render(o.a.createElement(Fo.a,null,o.a.createElement(c.a,{store:ta},o.a.createElement(Mo,null))),document.getElementById("main-app"))},60:function(e,t,n){e.exports=n.p+"../img/4aa06b86ab33745eda39a0996b2a31bd.svg"},80:function(e,t,n){e.exports=n.p+"../img/b002cf666ac7512c21ad21462efdf4e8.svg"},83:function(e,t,n){e.exports=n.p+"../img/64544011f835a0bcc13b668a98a70f78.svg"}});
//# sourceMappingURL=main.bundle.js.map