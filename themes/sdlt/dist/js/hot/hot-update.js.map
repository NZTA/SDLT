{"version":3,"sources":["webpack:///./src/js/utils/GraphQLRequestHelper.js"],"names":["GraphQLRequestHelper","query","variables","headers","data","compress","inst","axios","create","url","method","request","response","json","errorMessage","_","get","window","location","href","Error"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;AAEA;AACA;AACA;;IAEqBA,oB;;;;;;;;;;;;+CAEEC,K,EAAeC,S;;;;;;AAC5BC,uB,GAAU,E;AAEhB;;;;;;;AAOMC,oB,GAAO;AACXH,uBAAK,EAAEI,6DAAQ,CAACJ,KAAD,CADJ;AAEXC,2BAAS,EAAEA;AAFA,iB;AAKPI,oB,GAAOC,4CAAK,CAACC,MAAN,CAAa;AACxBC,qBAAG,EAAE,UADmB;AAExBC,wBAAM,EAAE,MAFgB;AAGxBN,sBAAI,EAAEA,IAHkB;AAIxBD,yBAAO,EAAEA;AAJe,iBAAb,C;;uBAOUG,IAAI,CAACK,OAAL,E;;;AAAjBC,wB;AACAC,oB,GAAOD,QAAQ,CAACR,I,EAEtB;;AACMU,4B,GAAeC,6CAAC,CAACC,GAAF,CAAMH,IAAN,EAAY,kBAAZ,EAAgC,IAAhC,C;;qBACjBC,Y;;;;;AACF;AACA,oBAAIA,YAAY,KAAK,wBAArB,EAA+C;AAC7CG,wBAAM,CAACC,QAAP,CAAgBC,IAAhB,GAAuB,6BAAvB;AACD;;sBAEK,IAAIC,KAAJ,CAAUN,YAAV,C;;;iDAGDD,I","file":"hot/hot-update.js","sourcesContent":["// @flow\n\nimport compress from \"graphql-query-compress\";\nimport axios from \"axios\";\nimport _ from \"lodash\";\n\nexport default class GraphQLRequestHelper {\n\n  static async request(query: string, variables?: Object): Promise<Object> {\n    const headers = {};\n\n    /* Uncomment following lines to add custom headers for auth and/or statics\n    const user = StorageService.readUser();\n    if (user && user.Token) {\n      headers[\"Authorization\"] = \"Bearer \" + user.Token;\n    }\n    */\n\n    const data = {\n      query: compress(query),\n      variables: variables,\n    };\n\n    const inst = axios.create({\n      url: \"/graphql\",\n      method: \"post\",\n      data: data,\n      headers: headers,\n    });\n\n    const response = await inst.request();\n    const json = response.data;\n\n    // Deal with common error\n    const errorMessage = _.get(json, \"errors.0.message\", null);\n    if (errorMessage) {\n      // Check auth error\n      if (errorMessage === \"Please log in first...\") {\n        window.location.href = \"/Security/login?BackURL=%2F\";\n      }\n\n      throw new Error(errorMessage);\n    }\n\n    return json;\n  }\n}\n"],"sourceRoot":""}